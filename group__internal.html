<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jsocketpp: Internal Helpers</title>
<link rel="icon" href="logo55px.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo55px.png"/></td>
  <td id="projectalign">
   <div id="projectname">jsocketpp<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A cross-platform C++20 socket library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__internal.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Internal Helpers <div class="ingroups"><a class="el" href="group__jsocketpp.html">jsocketpp: C++20 cross-platform socket library</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Implementation-only utilities for internal use.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Internal Helpers:</div>
<div class="dyncontent">
<div class="center"><img src="group__internal.png" border="0" usemap="#agroup____internal" loading="lazy" alt=""/></div>
<map name="agroup____internal" id="agroup____internal">
<area shape="rect" title="Implementation&#45;only utilities for internal use." alt="" coords="230,14,355,42"/>
<area shape="rect" href="group__jsocketpp.html" title="All core classes and functions of the jsocketpp networking library." alt="" coords="5,5,182,50"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-namespaces" class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:jsocketpp_3A_3Ainternal" id="r_jsocketpp_3A_3Ainternal"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacejsocketpp_1_1internal.html">jsocketpp::internal</a></td></tr>
<tr class="memdesc:namespacejsocketpp_1_1internal"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation-only utilities and platform abstractions for jsocketpp. <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:jsocketpp_3A_3Ainternal_3A_3AAddrinfoDeleter" id="r_jsocketpp_3A_3Ainternal_3A_3AAddrinfoDeleter"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html">jsocketpp::internal::AddrinfoDeleter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom deleter for <span class="tt">addrinfo*</span> pointers to support RAII-style cleanup.  <a href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html#details">More...</a><br /></td></tr>
<tr class="memitem:jsocketpp_3A_3Ainternal_3A_3AScopedBlockingMode" id="r_jsocketpp_3A_3Ainternal_3A_3AScopedBlockingMode"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html">jsocketpp::internal::ScopedBlockingMode</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">RAII helper for temporarily overriding a socket's blocking mode.  <a href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga62d9b0682386f85cca0aadbdfbb76646" id="r_ga62d9b0682386f85cca0aadbdfbb76646"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646">jsocketpp::internal::AddrinfoPtr</a> = std::unique_ptr&lt;addrinfo, <a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html">AddrinfoDeleter</a>&gt;</td></tr>
<tr class="memdesc:ga62d9b0682386f85cca0aadbdfbb76646"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smart pointer that manages <span class="tt">addrinfo*</span> resources using <span class="tt"><a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html" title="Custom deleter for addrinfo* pointers to support RAII-style cleanup.">AddrinfoDeleter</a></span>.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae140ce724d1cfc733f3c2dbccf0cf60b" id="r_gae140ce724d1cfc733f3c2dbccf0cf60b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; WSABUF &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae140ce724d1cfc733f3c2dbccf0cf60b">jsocketpp::internal::toWSABUF</a> (const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> *buffers, const std::size_t count)</td></tr>
<tr class="memdesc:gae140ce724d1cfc733f3c2dbccf0cf60b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a raw array of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into a WSABUF array for use with Windows socket APIs.  <br /></td></tr>
<tr class="memitem:ga53db0a38699800e21866a0ded1b433ba" id="r_ga53db0a38699800e21866a0ded1b433ba"><td class="memItemLeft" align="right" valign="top">std::vector&lt; WSABUF &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga53db0a38699800e21866a0ded1b433ba">jsocketpp::internal::toWSABUF</a> (const std::span&lt; const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> &gt; buffers)</td></tr>
<tr class="memdesc:ga53db0a38699800e21866a0ded1b433ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a span of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into a WSABUF array (Windows).  <br /></td></tr>
<tr class="memitem:ga7701a273337a71485ba1583df464b178" id="r_ga7701a273337a71485ba1583df464b178"><td class="memItemLeft" align="right" valign="top">std::vector&lt; iovec &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7701a273337a71485ba1583df464b178">jsocketpp::internal::toIOVec</a> (const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> *buffers, const std::size_t count)</td></tr>
<tr class="memdesc:ga7701a273337a71485ba1583df464b178"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a raw array of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into an iovec array for POSIX <span class="tt">readv</span>/<span class="tt">writev</span>.  <br /></td></tr>
<tr class="memitem:gacdd48d04c87ec69aff97c5d29dbfe1a1" id="r_gacdd48d04c87ec69aff97c5d29dbfe1a1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; iovec &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacdd48d04c87ec69aff97c5d29dbfe1a1">jsocketpp::internal::toIOVec</a> (const std::span&lt; const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> &gt; buffers)</td></tr>
<tr class="memdesc:gacdd48d04c87ec69aff97c5d29dbfe1a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a span of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into an iovec array for POSIX vectorized I/O.  <br /></td></tr>
<tr class="memitem:gab7cbd90f4b6d2e5f506de1b7fd5c6331" id="r_gab7cbd90f4b6d2e5f506de1b7fd5c6331"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646">AddrinfoPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab7cbd90f4b6d2e5f506de1b7fd5c6331">jsocketpp::internal::resolveAddress</a> (const std::string_view host, const <a class="el" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, const int family, const int socktype, const int protocol, const int flags=0)</td></tr>
<tr class="memdesc:gab7cbd90f4b6d2e5f506de1b7fd5c6331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves a hostname and port into a list of usable socket address structures.  <br /></td></tr>
<tr class="memitem:ga19ca69ef83631dcf9e59205de179fbde" id="r_ga19ca69ef83631dcf9e59205de179fbde"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga19ca69ef83631dcf9e59205de179fbde">jsocketpp::internal::getBoundLocalIp</a> (<a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> sockFd)</td></tr>
<tr class="memdesc:ga19ca69ef83631dcf9e59205de179fbde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the local IP address to which the socket is currently bound.  <br /></td></tr>
<tr class="memitem:ga8826c90e1bb9e0023b75940ff4cd72f8" id="r_ga8826c90e1bb9e0023b75940ff4cd72f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8826c90e1bb9e0023b75940ff4cd72f8">jsocketpp::internal::sendExact</a> (<a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd, const void *data, std::size_t size)</td></tr>
<tr class="memdesc:ga8826c90e1bb9e0023b75940ff4cd72f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an entire datagram to a connected peer using <span class="tt">send()</span>.  <br /></td></tr>
<tr class="memitem:ga67bcc094472935bce938ff821b7ce8d8" id="r_ga67bcc094472935bce938ff821b7ce8d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga67bcc094472935bce938ff821b7ce8d8">jsocketpp::internal::sendExactTo</a> (<a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd, const void *data, std::size_t size, const sockaddr *addr, socklen_t addrLen, void(*afterSuccess)(void *ctx), void *ctx)</td></tr>
<tr class="memdesc:ga67bcc094472935bce938ff821b7ce8d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an entire datagram to a specific destination using <span class="tt">sendto()</span>.  <br /></td></tr>
<tr class="memitem:ga311f6b46f1941a20ab7e389787fc3bea" id="r_ga311f6b46f1941a20ab7e389787fc3bea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga311f6b46f1941a20ab7e389787fc3bea">jsocketpp::internal::tryCloseNoexcept</a> (const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd) noexcept</td></tr>
<tr class="memdesc:ga311f6b46f1941a20ab7e389787fc3bea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to close a socket descriptor without throwing exceptions.  <br /></td></tr>
<tr class="memitem:gab3b8ac088a7936657681c6de9a4400e1" id="r_gab3b8ac088a7936657681c6de9a4400e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gab3b8ac088a7936657681c6de9a4400e1">jsocketpp::internal::closeOrThrow</a> (const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd)</td></tr>
<tr class="memdesc:gab3b8ac088a7936657681c6de9a4400e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a socket descriptor and throws on failure.  <br /></td></tr>
<tr class="memitem:ga606aec57de9374b5b0fc69f37504fedd" id="r_ga606aec57de9374b5b0fc69f37504fedd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga606aec57de9374b5b0fc69f37504fedd">jsocketpp::internal::ScopedBlockingMode::ScopedBlockingMode</a> (const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> sock, bool temporaryNonBlocking)</td></tr>
<tr class="memdesc:ga606aec57de9374b5b0fc69f37504fedd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a <span class="tt"><a class="el" href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html" title="RAII helper for temporarily overriding a socket&#39;s blocking mode.">ScopedBlockingMode</a></span> that temporarily overrides the socket's blocking mode.  <br /></td></tr>
<tr class="memitem:ga413d5e88aaee47a98645a9760884bec0" id="r_ga413d5e88aaee47a98645a9760884bec0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga413d5e88aaee47a98645a9760884bec0">jsocketpp::internal::ScopedBlockingMode::~ScopedBlockingMode</a> ()</td></tr>
<tr class="memdesc:ga413d5e88aaee47a98645a9760884bec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore the socket's original blocking mode on destruction.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Implementation-only utilities for internal use. </p>
<p>These functions and types are not part of the public API. They are intended for internal glue code, platform compatibility, and cross-cutting concerns.</p>
<dl class="section warning"><dt>Warning</dt><dd>Do not rely on this module from user code. It is subject to change without notice. </dd></dl>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="ga62d9b0682386f85cca0aadbdfbb76646" name="ga62d9b0682386f85cca0aadbdfbb76646"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62d9b0682386f85cca0aadbdfbb76646">&#9670;&#160;</a></span>AddrinfoPtr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646">jsocketpp::internal::AddrinfoPtr</a> = std::unique_ptr&lt;addrinfo, <a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html">AddrinfoDeleter</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Smart pointer that manages <span class="tt">addrinfo*</span> resources using <span class="tt"><a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html" title="Custom deleter for addrinfo* pointers to support RAII-style cleanup.">AddrinfoDeleter</a></span>. </p>
<p><span class="tt"><a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646" title="Smart pointer that manages addrinfo* resources using AddrinfoDeleter.">AddrinfoPtr</a></span> wraps a raw <span class="tt">addrinfo*</span> (typically from <span class="tt">getaddrinfo()</span>) in a <span class="tt">std::unique_ptr</span> with a custom deleter to ensure safe, automatic cleanup using <span class="tt">freeaddrinfo()</span>. This eliminates manual memory management and guards against memory leaks in error-prone network code.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md612"></a>
Example Usage</h3>
<div class="fragment"><div class="line">addrinfo* raw = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="keywordflow">if</span> (getaddrinfo(<span class="stringliteral">&quot;example.com&quot;</span>, <span class="stringliteral">&quot;80&quot;</span>, &amp;hints, &amp;raw) == 0) {</div>
<div class="line">    <a class="code hl_typedef" href="#ga62d9b0682386f85cca0aadbdfbb76646">AddrinfoPtr</a> info(raw); <span class="comment">// Automatically cleaned up on scope exit</span></div>
<div class="line">    <span class="comment">// Use info.get() safely here</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__internal_html_ga62d9b0682386f85cca0aadbdfbb76646"><div class="ttname"><a href="#ga62d9b0682386f85cca0aadbdfbb76646">jsocketpp::internal::AddrinfoPtr</a></div><div class="ttdeci">std::unique_ptr&lt; addrinfo, AddrinfoDeleter &gt; AddrinfoPtr</div><div class="ttdoc">Smart pointer that manages addrinfo* resources using AddrinfoDeleter.</div><div class="ttdef"><b>Definition</b> common.hpp:819</div></div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html" title="Custom deleter for addrinfo* pointers to support RAII-style cleanup.">AddrinfoDeleter</a> </dd>
<dd>
getaddrinfo() </dd>
<dd>
freeaddrinfo() </dd></dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="gab3b8ac088a7936657681c6de9a4400e1" name="gab3b8ac088a7936657681c6de9a4400e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3b8ac088a7936657681c6de9a4400e1">&#9670;&#160;</a></span>closeOrThrow()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jsocketpp::internal::closeOrThrow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Closes a socket descriptor and throws on failure. </p>
<p>This helper attempts to close the specified socket descriptor using the platform‐specific <span class="tt"><a class="el" href="namespacejsocketpp.html#a12fd46ba498b19d6102220bc100ef931">CloseSocket()</a></span> function. If the descriptor is invalid (<span class="tt"><a class="el" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a></span>), the function returns immediately without error.</p>
<p>If <span class="tt"><a class="el" href="namespacejsocketpp.html#a12fd46ba498b19d6102220bc100ef931">CloseSocket()</a></span> fails, the function retrieves the platform error code via <span class="tt"><a class="el" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError()</a></span> and throws a <span class="tt"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></span> containing both the numeric error and a descriptive message produced by <span class="tt">SocketErrorMessage(error)</span>.</p>
<p>This function is intended for use in public <span class="tt">close()</span> methods or other contexts where socket closure errors must be explicitly reported to the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>The platform‐specific socket descriptor to close. If set to <span class="tt"><a class="el" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a></span>, no action is taken.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></td><td>If closing the socket fails, with the platform error code and message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function may throw. For destructors or cleanup routines where exceptions are not allowed, use <span class="tt"><a class="el" href="#ga311f6b46f1941a20ab7e389787fc3bea" title="Attempts to close a socket descriptor without throwing exceptions.">tryCloseNoexcept()</a></span> instead.</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Example: throwing close in a public API</span></div>
<div class="line"><span class="keywordtype">void</span> MySocket::close() {</div>
<div class="line">    <a class="code hl_function" href="#gab3b8ac088a7936657681c6de9a4400e1">closeOrThrow</a>(_sockFd);</div>
<div class="line">    _sockFd = <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__internal_html_gab3b8ac088a7936657681c6de9a4400e1"><div class="ttname"><a href="#gab3b8ac088a7936657681c6de9a4400e1">jsocketpp::internal::closeOrThrow</a></div><div class="ttdeci">void closeOrThrow(const SOCKET fd)</div><div class="ttdoc">Closes a socket descriptor and throws on failure.</div><div class="ttdef"><b>Definition</b> common.hpp:1244</div></div>
<div class="ttc" id="anamespacejsocketpp_html_a3ddf4938a63ed33a5e2f7d2625cb4405"><div class="ttname"><a href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">jsocketpp::INVALID_SOCKET</a></div><div class="ttdeci">constexpr SOCKET INVALID_SOCKET</div><div class="ttdef"><b>Definition</b> common.hpp:264</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga19ca69ef83631dcf9e59205de179fbde" name="ga19ca69ef83631dcf9e59205de179fbde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19ca69ef83631dcf9e59205de179fbde">&#9670;&#160;</a></span>getBoundLocalIp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string jsocketpp::internal::getBoundLocalIp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>sockFd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the local IP address to which the socket is currently bound. </p>
<p>This function returns the <b>numeric IP address</b> of the socket's local endpoint, based on the actual binding or connection state. It supports both IPv4 and IPv6 sockets.</p>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md628"></a>
🔧 Internal Mechanism</h3>
<p>This method wraps two low-level system calls:</p>
<ul>
<li><span class="tt">getsockname()</span>: Obtains the local address (IP and port) that the socket is bound to. This works regardless of whether the socket was explicitly bound (<span class="tt">bind()</span>) or implicitly assigned a source address via <span class="tt">connect()</span> or <span class="tt">sendto()</span> on unconnected sockets.</li>
<li><span class="tt">getnameinfo()</span>: Converts the raw <span class="tt">sockaddr</span> structure returned by <span class="tt">getsockname()</span> into a <b>numeric IP string</b> (e.g., <span class="tt">"127.0.0.1"</span> or <span class="tt">"::1"</span>), independent of DNS.</li>
</ul>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md630"></a>
✅ Use Cases</h3>
<ul>
<li>Discover which local interface the OS selected after <span class="tt">bind()</span> or <span class="tt">connect()</span></li>
<li>Match the socket to a network adapter for MTU queries or interface statistics</li>
<li>Print the socket’s local IP address for diagnostics or logging</li>
<li>Support systems where multiple NICs or address families are in use</li>
</ul>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md632"></a>
⚠️ Error Handling</h3>
<ul>
<li>Throws <span class="tt"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></span> if the socket is not open, not yet bound, or if address resolution fails.</li>
<li>All errors include system-specific error codes and human-readable descriptions.</li>
</ul>
<hr  />
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sockFd</td><td>The socket descriptor (<span class="tt"><a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></span> on Windows, <span class="tt">int</span> on POSIX).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A string containing the numeric IPv4 or IPv6 address the socket is bound to.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></td><td>If:<ul>
<li>The socket is invalid or unbound</li>
<li><span class="tt">getsockname()</span> fails (e.g., bad descriptor)</li>
<li><span class="tt">getnameinfo()</span> fails (e.g., unsupported address format)</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function does not return the remote peer address — use <span class="tt">getpeername()</span> for that. </dd>
<dd>
This function does not include the port — only the IP address portion is returned.</dd></dl>
<dl class="section see"><dt>See also</dt><dd>getLocalSocketAddress(), getpeername(), <a class="el" href="#gab7cbd90f4b6d2e5f506de1b7fd5c6331" title="Resolves a hostname and port into a list of usable socket address structures.">resolveAddress()</a>, getMTU() </dd></dl>

</div>
</div>
<a id="gab7cbd90f4b6d2e5f506de1b7fd5c6331" name="gab7cbd90f4b6d2e5f506de1b7fd5c6331"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7cbd90f4b6d2e5f506de1b7fd5c6331">&#9670;&#160;</a></span>resolveAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646">AddrinfoPtr</a> jsocketpp::internal::resolveAddress </td>
          <td>(</td>
          <td class="paramtype">const std::string_view</td>          <td class="paramname"><span class="paramname"><em>host</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a></td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int</td>          <td class="paramname"><span class="paramname"><em>family</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int</td>          <td class="paramname"><span class="paramname"><em>socktype</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int</td>          <td class="paramname"><span class="paramname"><em>protocol</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int</td>          <td class="paramname"><span class="paramname"><em>flags</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resolves a hostname and port into a list of usable socket address structures. </p>
<p>This internal helper wraps the standard <span class="tt">::getaddrinfo()</span> system call to resolve a hostname and port into a linked list of <span class="tt">addrinfo</span> structures, which are used to create, bind, or connect sockets. It provides explicit control over resolution parameters, supports both client and server use cases, and ensures consistent error handling and memory cleanup across platforms.</p>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md614"></a>
Overview</h3>
<p>Unlike direct <span class="tt">getaddrinfo()</span> usage, this helper:</p><ul>
<li>Accepts all key resolution parameters (<span class="tt">family</span>, <span class="tt">socktype</span>, <span class="tt">protocol</span>, <span class="tt">flags</span>)</li>
<li>Returns a RAII-managed <span class="tt"><a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646" title="Smart pointer that manages addrinfo* resources using AddrinfoDeleter.">AddrinfoPtr</a></span> (automatically frees memory via <span class="tt">freeaddrinfo()</span>)</li>
<li>Throws a <span class="tt"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></span> with detailed context if resolution fails</li>
<li>Supports dual-stack fallback, wildcard binding, strict numeric resolution, and more</li>
</ul>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md616"></a>
Hints Structure Behavior</h3>
<p>This function populates the <span class="tt">hints</span> structure for <span class="tt">getaddrinfo()</span> with the following fields:</p>
<ul>
<li><b>ai_family</b>: Address family to return:<ul>
<li><span class="tt">AF_INET</span> — IPv4 only</li>
<li><span class="tt">AF_INET6</span> — IPv6 only</li>
<li><span class="tt">AF_UNSPEC</span> — Return both (default for dual-stack logic)</li>
</ul>
</li>
<li><b>ai_socktype</b>: Type of socket:<ul>
<li><span class="tt">SOCK_STREAM</span> — TCP</li>
<li><span class="tt">SOCK_DGRAM</span> — UDP</li>
<li><span class="tt">SOCK_RAW</span> — Raw IP (less common)</li>
</ul>
</li>
<li><b>ai_protocol</b>: Transport-layer protocol:<ul>
<li><span class="tt">IPPROTO_TCP</span> — for TCP sockets</li>
<li><span class="tt">IPPROTO_UDP</span> — for UDP sockets</li>
<li><span class="tt">0</span> — auto-detect based on <span class="tt">socktype</span></li>
</ul>
</li>
<li><b>ai_flags</b>: Bitmask of resolution modifiers. Includes:<ul>
<li><span class="tt">AI_PASSIVE</span> — Use wildcard address (0.0.0.0 / ::) if <span class="tt">host</span> is empty (for server binding)</li>
<li><span class="tt">AI_NUMERICHOST</span> — Require <span class="tt">host</span> to be a numeric IP; skip DNS</li>
<li><span class="tt">AI_NUMERICSERV</span> — Require <span class="tt">port</span> to be numeric; skip service name lookup</li>
<li><span class="tt">AI_CANONNAME</span> — Populate <span class="tt">ai_canonname</span> with canonical FQDN</li>
<li><span class="tt">AI_ADDRCONFIG</span> — Only return families configured on the local machine</li>
<li><span class="tt">AI_V4MAPPED</span> — Allow IPv4-mapped IPv6 addresses if <span class="tt">AF_INET6</span> is requested</li>
</ul>
</li>
</ul>
<p>Flags may be combined using bitwise OR (e.g., <span class="tt">AI_PASSIVE | AI_ADDRCONFIG</span>).</p>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md618"></a>
Parameters</h3>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Hostname, domain, or IP address to resolve.<ul>
<li>Use empty string if <span class="tt">AI_PASSIVE</span> is set to bind to all interfaces.</li>
<li>Must be numeric if <span class="tt">AI_NUMERICHOST</span> is specified.</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td><a class="el" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7" title="Type alias representing a TCP or UDP port number (1–65535).">Port</a> number to resolve, passed as an integer. Must be in the range <span class="tt">[0, 65535]</span>. Internally converted to a string before calling <span class="tt">getaddrinfo()</span>.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">family</td><td>Address family to restrict the result:<ul>
<li><span class="tt">AF_INET</span> for IPv4</li>
<li><span class="tt">AF_INET6</span> for IPv6</li>
<li><span class="tt">AF_UNSPEC</span> for both (default in most client cases)</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">socktype</td><td>Desired socket type (e.g., <span class="tt">SOCK_STREAM</span>, <span class="tt">SOCK_DGRAM</span>)</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol</td><td>Desired protocol (e.g., <span class="tt">IPPROTO_TCP</span>, <span class="tt">IPPROTO_UDP</span>, or <span class="tt">0</span>)</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Bitmask of <span class="tt">AI_*</span> flags. See the list above for all supported options.</td></tr>
  </table>
  </dd>
</dl>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md620"></a>
Return Value</h3>
<dl class="section return"><dt>Returns</dt><dd>A smart pointer of type <span class="tt"><a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646" title="Smart pointer that manages addrinfo* resources using AddrinfoDeleter.">AddrinfoPtr</a></span> holding a linked list of <span class="tt">addrinfo</span> structures. The returned list can be iterated to attempt socket creation or connection. Memory is released automatically via <span class="tt">freeaddrinfo()</span> when the pointer is destroyed.</dd></dl>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md622"></a>
Throws</h3>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></td><td>if <span class="tt">getaddrinfo()</span> fails.<ul>
<li>On Windows: error code from <span class="tt"><a class="el" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError()</a></span>, with message from <span class="tt">gai_strerror()</span></li>
<li>On POSIX: return code from <span class="tt">getaddrinfo()</span>, also with <span class="tt">gai_strerror()</span> message</li>
<li>The error message will include whether the failure occurred on the host or service name</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md624"></a>
Example Usage</h3>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacejsocketpp_1_1internal.html">jsocketpp::internal</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Resolve a remote TCP address (client-side)</span></div>
<div class="line"><span class="keyword">auto</span> addrList = <a class="code hl_function" href="#gab7cbd90f4b6d2e5f506de1b7fd5c6331">resolveAddress</a>(<span class="stringliteral">&quot;example.com&quot;</span>, 443, AF_UNSPEC, SOCK_STREAM, IPPROTO_TCP);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Iterate candidates and attempt connection</span></div>
<div class="line"><span class="keywordflow">for</span> (addrinfo* p = addrList.get(); p != <span class="keyword">nullptr</span>; p = p-&gt;ai_next)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> sockfd = ::socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol);</div>
<div class="line">    <span class="keywordflow">if</span> (sockfd != <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a> &amp;&amp; ::connect(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == 0)</div>
<div class="line">        <span class="keywordflow">break</span>; <span class="comment">// success</span></div>
<div class="line">    <span class="comment">// try next if socket or connect failed</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__internal_html_gab7cbd90f4b6d2e5f506de1b7fd5c6331"><div class="ttname"><a href="#gab7cbd90f4b6d2e5f506de1b7fd5c6331">jsocketpp::internal::resolveAddress</a></div><div class="ttdeci">AddrinfoPtr resolveAddress(const std::string_view host, const Port port, const int family, const int socktype, const int protocol, const int flags=0)</div><div class="ttdoc">Resolves a hostname and port into a list of usable socket address structures.</div><div class="ttdef"><b>Definition</b> common.hpp:946</div></div>
<div class="ttc" id="anamespacejsocketpp_1_1internal_html"><div class="ttname"><a href="namespacejsocketpp_1_1internal.html">jsocketpp::internal</a></div><div class="ttdoc">Implementation-only utilities and platform abstractions for jsocketpp.</div><div class="ttdef"><b>Definition</b> BufferView.hpp:52</div></div>
</div><!-- fragment --><hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md626"></a>
Notes</h3>
<ul>
<li>This function is intended for internal use by <span class="tt"><a class="el" href="classjsocketpp_1_1Socket.html" title="TCP client connection abstraction (Java-like interface).">Socket</a></span>, <span class="tt"><a class="el" href="classjsocketpp_1_1ServerSocket.html" title="TCP server socket abstraction for cross-platform C++ networking.">ServerSocket</a></span>, and <span class="tt"><a class="el" href="classjsocketpp_1_1DatagramSocket.html" title="Cross-platform UDP socket class with Java-style interface.">DatagramSocket</a></span>.</li>
<li>It supports both binding (server-side) and connecting (client-side) resolution logic.</li>
<li>Always use <span class="tt">AF_UNSPEC</span> and let <span class="tt">getaddrinfo()</span> return both IPv4 and IPv6 for best cross-platform support.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd>getaddrinfo(), freeaddrinfo(), <a class="el" href="#ga62d9b0682386f85cca0aadbdfbb76646" title="Smart pointer that manages addrinfo* resources using AddrinfoDeleter.">AddrinfoPtr</a>, <a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a> </dd></dl>

</div>
</div>
<a id="ga606aec57de9374b5b0fc69f37504fedd" name="ga606aec57de9374b5b0fc69f37504fedd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga606aec57de9374b5b0fc69f37504fedd">&#9670;&#160;</a></span>ScopedBlockingMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jsocketpp::internal::ScopedBlockingMode::ScopedBlockingMode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>sock</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>temporaryNonBlocking</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a <span class="tt"><a class="el" href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html" title="RAII helper for temporarily overriding a socket&#39;s blocking mode.">ScopedBlockingMode</a></span> that temporarily overrides the socket's blocking mode. </p>
<p>This constructor queries the current blocking state of the specified socket and sets it to the desired temporary mode (<span class="tt">blocking</span> or <span class="tt">non-blocking</span>). Upon destruction, the original mode is restored.</p>
<p>This is typically used to safely override a socket's mode during a scoped operation (e.g. non-blocking <span class="tt">connect()</span>), without permanently modifying the socket's configuration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>The native socket descriptor (platform-specific type: <span class="tt"><a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></span> on Windows, <span class="tt">int</span> on POSIX). </td></tr>
    <tr><td class="paramname">temporaryNonBlocking</td><td>If <span class="tt">true</span>, the socket will be set to non-blocking mode during the scope. If <span class="tt">false</span>, it will be temporarily set to blocking mode.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>if querying or setting the socket mode fails.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The constructor reads the current mode and only applies a change if necessary. </dd>
<dd>
If <span class="tt">setNonBlocking()</span> is called on the same socket while the object is alive, the final restored state may be incorrect.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga413d5e88aaee47a98645a9760884bec0" title="Restore the socket&#39;s original blocking mode on destruction.">~ScopedBlockingMode()</a> </dd>
<dd>
setNonBlocking() </dd></dl>

</div>
</div>
<a id="ga8826c90e1bb9e0023b75940ff4cd72f8" name="ga8826c90e1bb9e0023b75940ff4cd72f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8826c90e1bb9e0023b75940ff4cd72f8">&#9670;&#160;</a></span>sendExact()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jsocketpp::internal::sendExact </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an entire datagram to a connected peer using <span class="tt">send()</span>. </p>
<p>This internal utility transmits exactly <code class="param">size</code> bytes from the given <code class="param">data</code> buffer over the specified socket <code class="param">fd</code>, using the system <span class="tt">send()</span> call. It is intended for use with connected UDP or TCP sockets where the destination address is already established via connect().</p>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md640"></a>
⚙️ Behavior</h3>
<ul>
<li>Applies <span class="tt">MSG_NOSIGNAL</span> on POSIX systems to prevent <span class="tt">SIGPIPE</span> if the peer has closed the connection.</li>
<li>Casts the buffer size appropriately for Windows (<span class="tt">int</span>) and POSIX (<span class="tt">size_t</span>) APIs.</li>
<li>On success, guarantees that <b>all</b> <code class="param">size</code> bytes are sent in a single system call.</li>
<li>Throws an exception if:<ul>
<li>The socket is invalid (<span class="tt"><a class="el" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a></span>)</li>
<li><span class="tt">send()</span> fails for any reason</li>
<li>The number of bytes actually sent differs from <code class="param">size</code> (partial send)</li>
</ul>
</li>
</ul>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md642"></a>
🧪 Example</h3>
<div class="fragment"><div class="line">std::string message = <span class="stringliteral">&quot;Hello, world!&quot;</span>;</div>
<div class="line"><a class="code hl_function" href="#ga8826c90e1bb9e0023b75940ff4cd72f8">internal::sendExact</a>(socketFd, message.data(), message.size());</div>
<div class="ttc" id="agroup__internal_html_ga8826c90e1bb9e0023b75940ff4cd72f8"><div class="ttname"><a href="#ga8826c90e1bb9e0023b75940ff4cd72f8">jsocketpp::internal::sendExact</a></div><div class="ttdeci">void sendExact(SOCKET fd, const void *data, std::size_t size)</div><div class="ttdoc">Sends an entire datagram to a connected peer using send().</div><div class="ttdef"><b>Definition</b> common.cpp:477</div></div>
</div><!-- fragment --><hr  />
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>The connected socket file descriptor to send data on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to the raw buffer containing data to transmit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Number of bytes to send from <code class="param">data</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></td><td>If the socket is invalid, if <span class="tt">send()</span> returns an error, or if a partial datagram is sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function does not perform retries or fragmentation. For UDP, datagrams larger than the network MTU may be dropped. </dd>
<dd>
Intended for internal use — use higher-level <span class="tt">write()</span> APIs instead in application code.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga67bcc094472935bce938ff821b7ce8d8" title="Sends an entire datagram to a specific destination using sendto().">sendExactTo()</a> For sending to an explicit address without connecting first. </dd>
<dd>
connect() To establish a connected peer before using this function. </dd></dl>

</div>
</div>
<a id="ga67bcc094472935bce938ff821b7ce8d8" name="ga67bcc094472935bce938ff821b7ce8d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67bcc094472935bce938ff821b7ce8d8">&#9670;&#160;</a></span>sendExactTo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void jsocketpp::internal::sendExactTo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const sockaddr *</td>          <td class="paramname"><span class="paramname"><em>addr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t</td>          <td class="paramname"><span class="paramname"><em>addrLen</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>afterSuccess&#160;</em></span>)(void *ctx), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>ctx</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an entire datagram to a specific destination using <span class="tt">sendto()</span>. </p>
<p>This internal utility transmits exactly <code class="param">size</code> bytes from the given <code class="param">data</code> buffer over the specified socket <code class="param">fd</code>, using the system <span class="tt">sendto()</span> call to send to an explicit destination address. It is intended for unconnected UDP sockets, where the destination may vary per call.</p>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md645"></a>
⚙️ Behavior</h3>
<ul>
<li>Applies <span class="tt">MSG_NOSIGNAL</span> on POSIX systems to prevent <span class="tt">SIGPIPE</span> if the destination is unreachable or the peer has closed the socket.</li>
<li>Casts the buffer size and address length appropriately for Windows (<span class="tt">int</span>) and POSIX (<span class="tt">size_t</span>, <span class="tt">socklen_t</span>) APIs.</li>
<li>On success, guarantees that <b>all</b> <code class="param">size</code> bytes are sent in a single system call.</li>
<li>Throws an exception if:<ul>
<li>The socket is invalid (<span class="tt"><a class="el" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a></span>)</li>
<li><span class="tt">sendto()</span> fails for any reason</li>
<li>The number of bytes actually sent differs from <code class="param">size</code> (partial send)</li>
</ul>
</li>
</ul>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md647"></a>
🧪 Example</h3>
<div class="fragment"><div class="line">sockaddr_storage destAddr{};</div>
<div class="line"><span class="comment">// populate destAddr with desired IPv4/IPv6 destination...</span></div>
<div class="line"><a class="code hl_function" href="#ga67bcc094472935bce938ff821b7ce8d8">internal::sendExactTo</a>(socketFd, message.data(), message.size(),</div>
<div class="line">                      <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>sockaddr*<span class="keyword">&gt;</span>(&amp;destAddr),</div>
<div class="line">                      <span class="keyword">sizeof</span>(sockaddr_in));</div>
<div class="ttc" id="agroup__internal_html_ga67bcc094472935bce938ff821b7ce8d8"><div class="ttname"><a href="#ga67bcc094472935bce938ff821b7ce8d8">jsocketpp::internal::sendExactTo</a></div><div class="ttdeci">void sendExactTo(SOCKET fd, const void *data, std::size_t size, const sockaddr *addr, socklen_t addrLen, void(*afterSuccess)(void *ctx), void *ctx)</div><div class="ttdoc">Sends an entire datagram to a specific destination using sendto().</div><div class="ttdef"><b>Definition</b> common.cpp:505</div></div>
</div><!-- fragment --><hr  />
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>The socket file descriptor to send data on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to the raw buffer containing data to transmit. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Number of bytes to send from <code class="param">data</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Pointer to the destination address structure (IPv4 or IPv6). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addrLen</td><td>Length of the address structure in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">afterSuccess</td><td>Optional callback invoked after a successful send (may be nullptr). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>Opaque pointer passed to <code class="param">afterSuccess</code> (e.g., <span class="tt">this</span>).</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></td><td>If the socket is invalid, if <span class="tt">sendto()</span> returns an error, or if a partial datagram is sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This function does not perform retries or fragmentation. For UDP, datagrams larger than the network MTU may be dropped. </dd>
<dd>
Intended for internal use — use higher-level <span class="tt">writeTo()</span> or <span class="tt">write(<a class="el" href="classjsocketpp_1_1DatagramPacket.html" title="Represents a UDP datagram packet, encapsulating both payload and addressing information.">DatagramPacket</a>&amp;)</span> APIs instead in application code.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga8826c90e1bb9e0023b75940ff4cd72f8" title="Sends an entire datagram to a connected peer using send().">sendExact()</a> For sending to a connected peer without specifying an address. </dd>
<dd>
writeTo() For type-safe per-call destination sends. </dd></dl>

</div>
</div>
<a id="ga7701a273337a71485ba1583df464b178" name="ga7701a273337a71485ba1583df464b178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7701a273337a71485ba1583df464b178">&#9670;&#160;</a></span>toIOVec() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; iovec &gt; jsocketpp::internal::toIOVec </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> *</td>          <td class="paramname"><span class="paramname"><em>buffers</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t</td>          <td class="paramname"><span class="paramname"><em>count</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a raw array of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into an iovec array for POSIX <span class="tt">readv</span>/<span class="tt">writev</span>. </p>
<p>This function converts a contiguous C-style array of <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span> entries into a <span class="tt">std::vector&lt;iovec&gt;</span>, which can be passed directly to POSIX I/O functions like <span class="tt">readv()</span> and <span class="tt">writev()</span>. Each <span class="tt">iovec</span> will reflect the same memory range described by the corresponding <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffers</td><td>Pointer to a contiguous array of <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span> elements. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>The number of elements in the input array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <span class="tt">std::vector&lt;iovec&gt;</span> referencing the same memory regions.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function performs shallow conversion—no memory is copied. </dd>
<dd>
Only available on non-Windows platforms (i.e., when <span class="tt">_WIN32</span> is not defined).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> </dd>
<dd>
iovec </dd>
<dd>
readv() </dd>
<dd>
writev() </dd></dl>

</div>
</div>
<a id="gacdd48d04c87ec69aff97c5d29dbfe1a1" name="gacdd48d04c87ec69aff97c5d29dbfe1a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacdd48d04c87ec69aff97c5d29dbfe1a1">&#9670;&#160;</a></span>toIOVec() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; iovec &gt; jsocketpp::internal::toIOVec </td>
          <td>(</td>
          <td class="paramtype">const std::span&lt; const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>buffers</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a span of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into an iovec array for POSIX vectorized I/O. </p>
<p>This overload transforms a <span class="tt">std::span&lt;const <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a>&gt;</span> into a <span class="tt">std::vector&lt;iovec&gt;</span>, which is suitable for use with POSIX APIs such as <span class="tt">readv()</span> and <span class="tt">writev()</span>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffers</td><td>A span of <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span> elements. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <span class="tt">std::vector&lt;iovec&gt;</span> referencing the same memory described by the span.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function performs shallow conversion—no memory is copied. </dd>
<dd>
Only available on non-Windows platforms (i.e., when <span class="tt">_WIN32</span> is not defined).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> </dd>
<dd>
iovec </dd>
<dd>
<a class="el" href="#ga7701a273337a71485ba1583df464b178" title="Convert a raw array of BufferView elements into an iovec array for POSIX readv/writev.">toIOVec(const BufferView*, std::size_t)</a> </dd>
<dd>
readv() </dd>
<dd>
writev() </dd></dl>

</div>
</div>
<a id="gae140ce724d1cfc733f3c2dbccf0cf60b" name="gae140ce724d1cfc733f3c2dbccf0cf60b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae140ce724d1cfc733f3c2dbccf0cf60b">&#9670;&#160;</a></span>toWSABUF() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; WSABUF &gt; jsocketpp::internal::toWSABUF </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> *</td>          <td class="paramname"><span class="paramname"><em>buffers</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::size_t</td>          <td class="paramname"><span class="paramname"><em>count</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a raw array of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into a WSABUF array for use with Windows socket APIs. </p>
<p>This utility function transforms a contiguous C-style array of <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span> structures into a <span class="tt">std::vector&lt;WSABUF&gt;</span>, suitable for use with Windows socket functions such as <span class="tt">WSASend()</span> and <span class="tt">WSARecv()</span>. Each <span class="tt">WSABUF</span> struct will point to the same memory region described by its corresponding <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffers</td><td>Pointer to a contiguous array of <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span> structures. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>The number of elements in the <span class="tt">buffers</span> array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <span class="tt">std::vector&lt;WSABUF&gt;</span> with one entry per buffer, preserving memory addresses and sizes.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function performs shallow conversion—no memory is copied. </dd>
<dd>
This function is only available on Windows (<span class="tt">_WIN32</span> defined).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> </dd>
<dd>
WSABUF </dd>
<dd>
WSASend() </dd>
<dd>
WSARecv() </dd></dl>

</div>
</div>
<a id="ga53db0a38699800e21866a0ded1b433ba" name="ga53db0a38699800e21866a0ded1b433ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53db0a38699800e21866a0ded1b433ba">&#9670;&#160;</a></span>toWSABUF() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; WSABUF &gt; jsocketpp::internal::toWSABUF </td>
          <td>(</td>
          <td class="paramtype">const std::span&lt; const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>buffers</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert a span of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into a WSABUF array (Windows). </p>
<p>This overload provides a convenient interface for converting a <span class="tt">std::span&lt;const <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a>&gt;</span> into a <span class="tt">std::vector&lt;WSABUF&gt;</span> for use with Windows socket APIs such as <span class="tt">WSASend()</span> and <span class="tt">WSARecv()</span>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffers</td><td>A <span class="tt">std::span</span> containing one or more <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span> elements. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <span class="tt">std::vector&lt;WSABUF&gt;</span> that references the same memory described by each <span class="tt"><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a></span>.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function performs shallow conversion—no memory is copied. </dd>
<dd>
This function is only available on Windows (<span class="tt">_WIN32</span> defined).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> </dd>
<dd>
WSABUF </dd>
<dd>
<a class="el" href="#gae140ce724d1cfc733f3c2dbccf0cf60b" title="Convert a raw array of BufferView elements into a WSABUF array for use with Windows socket APIs.">toWSABUF(const BufferView*, std::size_t)</a> </dd></dl>

</div>
</div>
<a id="ga311f6b46f1941a20ab7e389787fc3bea" name="ga311f6b46f1941a20ab7e389787fc3bea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga311f6b46f1941a20ab7e389787fc3bea">&#9670;&#160;</a></span>tryCloseNoexcept()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jsocketpp::internal::tryCloseNoexcept </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempts to close a socket descriptor without throwing exceptions. </p>
<p>This helper performs a best-effort close of the given socket descriptor. It is specifically intended for use in destructors and cleanup routines where exception safety is critical and socket closure failures must not propagate.</p>
<p>If the descriptor is already invalid (<span class="tt"><a class="el" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a></span>), the function returns immediately with <span class="tt">true</span>.</p>
<p>On a valid descriptor, the underlying platform‐specific <span class="tt"><a class="el" href="namespacejsocketpp.html#a12fd46ba498b19d6102220bc100ef931">CloseSocket()</a></span> is called. If it succeeds, the function returns <span class="tt">true</span>. If it fails, the error is silently ignored (per project close policy) and <span class="tt">false</span> is returned. Optional logging or diagnostics may be added at the marked location in the implementation if desired.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>The platform‐specific socket descriptor to close. If set to <span class="tt"><a class="el" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a></span>, no action is taken. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><span class="tt">true</span> if the socket was already invalid or successfully closed; <span class="tt">false</span> if closing failed (error is ignored).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function never throws. For public <span class="tt">close()</span> methods where errors must be reported, use a throwing variant such as <span class="tt"><a class="el" href="#gab3b8ac088a7936657681c6de9a4400e1" title="Closes a socket descriptor and throws on failure.">closeOrThrow()</a></span> instead.</dd></dl>
<div class="fragment"><div class="line"><span class="comment">// Example: safely closing in a destructor</span></div>
<div class="line">~SocketWrapper() noexcept {</div>
<div class="line">    <a class="code hl_function" href="#ga311f6b46f1941a20ab7e389787fc3bea">tryCloseNoexcept</a>(_sockFd);</div>
<div class="line">    _sockFd = <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__internal_html_ga311f6b46f1941a20ab7e389787fc3bea"><div class="ttname"><a href="#ga311f6b46f1941a20ab7e389787fc3bea">jsocketpp::internal::tryCloseNoexcept</a></div><div class="ttdeci">bool tryCloseNoexcept(const SOCKET fd) noexcept</div><div class="ttdoc">Attempts to close a socket descriptor without throwing exceptions.</div><div class="ttdef"><b>Definition</b> common.hpp:1198</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga413d5e88aaee47a98645a9760884bec0" name="ga413d5e88aaee47a98645a9760884bec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga413d5e88aaee47a98645a9760884bec0">&#9670;&#160;</a></span>~ScopedBlockingMode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">jsocketpp::internal::ScopedBlockingMode::~ScopedBlockingMode </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restore the socket's original blocking mode on destruction. </p>
<p>This destructor attempts to revert the socket descriptor to the blocking mode it had at the time of this object's construction. This ensures that any temporary change to the blocking state (via the constructor) is automatically undone, preserving consistent socket behavior after the scope ends.</p>
<p>This restoration is performed even if an exception was thrown inside the guarded scope, making this class suitable for safe use in exception-prone paths such as <span class="tt">connect()</span> with timeout logic.</p>
<dl class="section note"><dt>Note</dt><dd>Errors during restoration are silently ignored. This is intentional to maintain noexcept destructor semantics and prevent exceptions from escaping destructors.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not call <span class="tt">setNonBlocking()</span> on the same socket while a <span class="tt"><a class="el" href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html" title="RAII helper for temporarily overriding a socket&#39;s blocking mode.">ScopedBlockingMode</a></span> is active, as this will interfere with the mode restoration logic.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ga606aec57de9374b5b0fc69f37504fedd" title="Construct a ScopedBlockingMode that temporarily overrides the socket&#39;s blocking mode.">ScopedBlockingMode()</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
