<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jsocketpp: Sockets: Theory, Types, and Platform APIs</title>
<link rel="icon" href="logo55px.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo55px.png"/></td>
  <td id="projectalign">
   <div id="projectname">jsocketpp<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A cross-platform C++20 socket library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__sockets__theory.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Sockets: Theory, Types, and Platform APIs <div class="ingroups"><a class="el" href="group__docs.html">User Guides</a></div></div></div>
</div><!--header-->
<div class="contents">
<p><a href="https://creativecommons.org/publicdomain/zero/1.0/"><img src="https://licensebuttons.net/p/zero/1.0/88x31.png" alt="CC0" class="inline"/></a></p>
<p><em>Disclaimer: ChatGPT generated document</em>.</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md402"></a>
Introduction</h1>
<p>Sockets are fundamental building blocks for network communication in modern computing. They provide a standardized interface for processes to exchange data over networks, whether locally (inter-process communication) or across the globe (Internet communication). This document provides a comprehensive overview of socket theory, types, internal mechanisms, and platform-specific APIs.</p>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md404"></a>
1. What is a Socket?</h1>
<p>A <b>socket</b> is an abstraction representing one endpoint of a two-way communication link between two programs running on a network. Sockets allow applications to send and receive data, regardless of the underlying network technology.</p>
<ul>
<li><b>Analogy:</b> Think of a socket as a telephone jack: it provides a standard way to connect and communicate, regardless of the phone or the network.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md406"></a>
2. Types of Sockets (In-Depth)</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md407"></a>
2.1. Stream Sockets (TCP)</h2>
<ul>
<li><b>Type:</b> SOCK_STREAM</li>
<li><b>Protocol:</b> TCP (Transmission Control Protocol)</li>
<li><b>How it works:</b><ul>
<li>Establishes a connection using a three-way handshake (SYN, SYN-ACK, ACK).</li>
<li>Data is sent as a continuous stream of bytes; the protocol ensures all data arrives in order and without duplication.</li>
<li>TCP handles retransmission, congestion control, and flow control.</li>
<li>The OS kernel maintains a buffer for each socket; the application reads/writes to this buffer, and the kernel manages network transmission.</li>
<li>Connection is full-duplex (data can flow both ways simultaneously).</li>
</ul>
</li>
<li><b>Use cases:</b> Web servers, file transfers, email, SSH.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md408"></a>
2.2. Datagram Sockets (UDP)</h2>
<ul>
<li><b>Type:</b> SOCK_DGRAM</li>
<li><b>Protocol:</b> UDP (User Datagram Protocol)</li>
<li><b>How it works:</b><ul>
<li>No connection is established; each message (datagram) is sent independently.</li>
<li>No guarantee of delivery, order, or duplication protection.</li>
<li>Each <span class="tt">sendto()</span> call transmits a single datagram; each <span class="tt">recvfrom()</span> call receives one datagram.</li>
<li>Lower overhead and latency compared to TCP, but the application must handle lost or out-of-order packets if needed.</li>
<li>The OS kernel maintains a buffer for incoming datagrams; if the buffer is full, new datagrams are dropped.</li>
</ul>
</li>
<li><b>Use cases:</b> Real-time applications (VoIP, games), DNS, streaming.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md409"></a>
2.3. Raw Sockets</h2>
<ul>
<li><b>Type:</b> SOCK_RAW</li>
<li><b>Protocol:</b> Custom or direct access to IP</li>
<li><b>How it works:</b><ul>
<li>Allows direct construction and parsing of network packets, bypassing most of the OS protocol stack.</li>
<li>Used for implementing custom protocols, network diagnostics, or security tools.</li>
<li>Requires elevated privileges (root/admin) on most systems.</li>
<li>The application is responsible for building packet headers and handling protocol details.</li>
</ul>
</li>
<li><b>Use cases:</b> Ping, traceroute, protocol analyzers, custom networking tools.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md410"></a>
2.4. Unix Domain Sockets (Local IPC)</h2>
<ul>
<li><b>Type:</b> AF_UNIX or AF_LOCAL</li>
<li><b>Protocol:</b> Local (not networked)</li>
<li><b>How it works:</b><ul>
<li>Used for communication between processes on the same host.</li>
<li>Can be stream (SOCK_STREAM) or datagram (SOCK_DGRAM).</li>
<li>Data never leaves the host; the kernel transfers data directly between processes, often via memory copies.</li>
<li>Addressed by filesystem path (e.g., <span class="tt">/tmp/mysocket</span>).</li>
<li>Faster and more secure than TCP/UDP for local IPC.</li>
</ul>
</li>
<li><b>Use cases:</b> Local services, daemons, desktop applications, X11, Docker.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md412"></a>
2.5. Comparison Table: Socket Types</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Protocol  </th><th class="markdownTableHeadNone">Connection  </th><th class="markdownTableHeadNone">Ordered  </th><th class="markdownTableHeadNone">Reliable  </th><th class="markdownTableHeadNone">Message Boundaries  </th><th class="markdownTableHeadNone">Use Case  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Stream  </td><td class="markdownTableBodyNone">TCP  </td><td class="markdownTableBodyNone">Yes  </td><td class="markdownTableBodyNone">Yes  </td><td class="markdownTableBodyNone">Yes  </td><td class="markdownTableBodyNone">No  </td><td class="markdownTableBodyNone">Web, file transfer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Datagram  </td><td class="markdownTableBodyNone">UDP  </td><td class="markdownTableBodyNone">No  </td><td class="markdownTableBodyNone">No  </td><td class="markdownTableBodyNone">No  </td><td class="markdownTableBodyNone">Yes  </td><td class="markdownTableBodyNone">Games, VoIP, DNS  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Raw  </td><td class="markdownTableBodyNone">Custom  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">Diagnostics, protocols  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unix Domain  </td><td class="markdownTableBodyNone">Local  </td><td class="markdownTableBodyNone">Yes/No  </td><td class="markdownTableBodyNone">Yes/No  </td><td class="markdownTableBodyNone">Yes/No  </td><td class="markdownTableBodyNone">Yes/No  </td><td class="markdownTableBodyNone">Local IPC  </td></tr>
</table>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md414"></a>
2.6. Under the Hood: How Socket Types Work</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md415"></a>
Stream Sockets (TCP)</h2>
<ul>
<li>The kernel maintains a state machine for each connection (e.g., LISTEN, SYN_SENT, ESTABLISHED, FIN_WAIT).</li>
<li>Data is split into segments, each with sequence numbers and checksums.</li>
<li>Retransmission and acknowledgment are handled automatically.</li>
<li>Flow control (window size) and congestion control (e.g., slow start) are built in.</li>
<li>Closing a connection involves a four-way handshake (FIN/ACK exchange).</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md416"></a>
Datagram Sockets (UDP)</h2>
<ul>
<li>Each datagram is sent as a single packet; the kernel does not guarantee delivery or order.</li>
<li>No connection state is maintained; the socket is stateless.</li>
<li>Applications may implement their own reliability mechanisms if needed.</li>
<li>Broadcast and multicast are supported (send to multiple recipients).</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md417"></a>
Raw Sockets</h2>
<ul>
<li>The application is responsible for constructing the entire packet, including headers.</li>
<li>The kernel may provide some checks (e.g., IP header checksum), but most protocol logic is up to the application.</li>
<li>Useful for low-level network programming and diagnostics.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md418"></a>
Unix Domain Sockets</h2>
<ul>
<li>The kernel uses internal data structures (not network stack) to transfer data between processes.</li>
<li>Supports passing file descriptors and credentials between processes (ancillary data).</li>
<li>Can be used for both stream and datagram communication.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md420"></a>
2.7. Security and Performance Considerations</h1>
<ul>
<li><b>TCP:</b> Reliable and secure (with TLS), but higher overhead and latency.</li>
<li><b>UDP:</b> Fast and lightweight, but no built-in security or reliability.</li>
<li><b>Raw:</b> Powerful but dangerous; can be used for attacks or diagnostics.</li>
<li><b>Unix Domain:</b> Very fast and secure for local IPC; not routable over networks.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md422"></a>
3. Socket Address Families</h1>
<ul>
<li><b>AF_INET:</b> IPv4 Internet protocols</li>
<li><b>AF_INET6:</b> IPv6 Internet protocols</li>
<li><b>AF_UNIX / AF_LOCAL:</b> Unix domain (local) sockets</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md424"></a>
4. How Sockets Work: The Lifecycle</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md425"></a>
4.1. Server Side</h2>
<ol type="1">
<li><b>Create:</b> <span class="tt">socket()</span></li>
<li><b>Bind:</b> <span class="tt">bind()</span> to a local address/port</li>
<li><b>Listen:</b> <span class="tt">listen()</span> (for stream sockets)</li>
<li><b>Accept:</b> <span class="tt">accept()</span> incoming connections</li>
<li><b>Communicate:</b> <span class="tt">send()</span>, <span class="tt">recv()</span> (or <span class="tt">read()</span>, <span class="tt">write()</span>)</li>
<li><b>Close:</b> <span class="tt">close()</span> (POSIX) or <span class="tt">closesocket()</span> (Windows)</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md426"></a>
4.2. Client Side</h2>
<ol type="1">
<li><b>Create:</b> <span class="tt">socket()</span></li>
<li><b>Connect:</b> <span class="tt">connect()</span> to server address/port</li>
<li><b>Communicate:</b> <span class="tt">send()</span>, <span class="tt">recv()</span></li>
<li><b>Close:</b> <span class="tt">close()</span> / <span class="tt">closesocket()</span></li>
</ol>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md428"></a>
5. Under the Hood: How Sockets Operate</h1>
<ul>
<li><b>File Descriptor:</b> On POSIX, a socket is a file descriptor; on Windows, it's a SOCKET handle.</li>
<li><b>Buffers:</b> Each socket has send/receive buffers managed by the OS.</li>
<li><b>Blocking vs Non-blocking:</b><ul>
<li>Blocking: Calls wait until operation completes.</li>
<li>Non-blocking: Calls return immediately; use polling or event notification.</li>
</ul>
</li>
<li><b>Timeouts:</b> Sockets can be configured to time out on operations.</li>
<li><b>Select/Poll/Epoll:</b> Mechanisms to monitor multiple sockets for readiness.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md430"></a>
6. Platform-Specific APIs</h1>
<h2 class="doxsection"><a class="anchor" id="autotoc_md431"></a>
6.1. POSIX (Linux, macOS, Unix)</h2>
<ul>
<li><b>Header:</b> <span class="tt">&lt;sys/socket.h&gt;</span>, <span class="tt">&lt;netinet/in.h&gt;</span>, <span class="tt">&lt;arpa/inet.h&gt;</span>, <span class="tt">&lt;unistd.h&gt;</span></li>
<li><b>Functions:</b> <span class="tt">socket()</span>, <span class="tt">bind()</span>, <span class="tt">listen()</span>, <span class="tt">accept()</span>, <span class="tt">connect()</span>, <span class="tt">send()</span>, <span class="tt">recv()</span>, <span class="tt">close()</span></li>
<li><b>Unix Domain Sockets:</b> Use <span class="tt">AF_UNIX</span> address family; pathnames as addresses.</li>
<li><b>Non-blocking:</b> <span class="tt">fcntl()</span> to set <span class="tt">O_NONBLOCK</span>.</li>
<li><b>Timeouts:</b> <span class="tt">setsockopt()</span> with <span class="tt">SO_RCVTIMEO</span>/<span class="tt">SO_SNDTIMEO</span>.</li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md432"></a>
6.2. Windows (Winsock)</h2>
<ul>
<li><b>Header:</b> <span class="tt">&lt;winsock2.h&gt;</span>, <span class="tt">&lt;ws2tcpip.h&gt;</span></li>
<li><b>Initialization:</b> <span class="tt">WSAStartup()</span> before using sockets; <span class="tt">WSACleanup()</span> after.</li>
<li><b>Functions:</b> <span class="tt">socket()</span>, <span class="tt">bind()</span>, <span class="tt">listen()</span>, <span class="tt">accept()</span>, <span class="tt">connect()</span>, <span class="tt">send()</span>, <span class="tt">recv()</span>, <span class="tt">closesocket()</span></li>
<li><b>Non-blocking:</b> <span class="tt">ioctlsocket()</span></li>
<li><b>Timeouts:</b> <span class="tt">setsockopt()</span></li>
<li><b>Differences:</b><ul>
<li>File descriptors are not integers (use SOCKET type)</li>
<li>Error codes differ (use <span class="tt">WSAGetLastError()</span>)</li>
<li>No native Unix domain sockets (Windows 10+ supports AF_UNIX)</li>
</ul>
</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md434"></a>
7. Advanced Topics</h1>
<ul>
<li><b>Socket Options:</b> Control behavior with <span class="tt">setsockopt()</span>/<span class="tt">getsockopt()</span> (e.g., reuse address, buffer sizes).</li>
<li><b>Multicast/Broadcast:</b> UDP sockets can send to multiple recipients.</li>
<li><b>SSL/TLS:</b> Secure sockets layer for encrypted communication (e.g., OpenSSL, SChannel).</li>
<li><b>Asynchronous I/O:</b> Overlapped I/O (Windows), <span class="tt">epoll</span> (Linux), <span class="tt">kqueue</span> (BSD), <span class="tt">select</span>/<span class="tt">poll</span> (portable).</li>
<li><b>Zero-Copy:</b> Advanced APIs for high-performance networking.</li>
</ul>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md436"></a>
8. Summary Table</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type  </th><th class="markdownTableHeadNone">Protocol  </th><th class="markdownTableHeadNone">Connection  </th><th class="markdownTableHeadNone">Ordered  </th><th class="markdownTableHeadNone">Reliable  </th><th class="markdownTableHeadNone">Use Case  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Stream  </td><td class="markdownTableBodyNone">TCP  </td><td class="markdownTableBodyNone">Yes  </td><td class="markdownTableBodyNone">Yes  </td><td class="markdownTableBodyNone">Yes  </td><td class="markdownTableBodyNone">Web, file transfer  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Datagram  </td><td class="markdownTableBodyNone">UDP  </td><td class="markdownTableBodyNone">No  </td><td class="markdownTableBodyNone">No  </td><td class="markdownTableBodyNone">No  </td><td class="markdownTableBodyNone">Games, VoIP, DNS  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Raw  </td><td class="markdownTableBodyNone">Custom  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">N/A  </td><td class="markdownTableBodyNone">Diagnostics, protocols  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Unix Domain  </td><td class="markdownTableBodyNone">Local  </td><td class="markdownTableBodyNone">Yes/No  </td><td class="markdownTableBodyNone">Yes/No  </td><td class="markdownTableBodyNone">Yes/No  </td><td class="markdownTableBodyNone">Local IPC  </td></tr>
</table>
<hr  />
<h1 class="doxsection"><a class="anchor" id="autotoc_md438"></a>
9. References</h1>
<ul>
<li><a href="https://beej.us/guide/bgnet/">Beej's Guide to Network Programming</a></li>
<li>[UNIX Network Programming, W. Richard Stevens]</li>
<li><a href="https://docs.microsoft.com/en-us/windows/win32/winsock/">Microsoft Winsock Documentation</a></li>
<li><a href="https://man7.org/linux/man-pages/man7/socket.7.html">man 7 socket</a></li>
</ul>
<hr  />
<p><em>This document is part of the jsocketpp project. For usage examples and API documentation, see the main README and source code.</em> </p>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
