<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jsocketpp: jsocketpp::internal Namespace Reference</title>
<link rel="icon" href="logo55px.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo55px.png"/></td>
  <td id="projectalign">
   <div id="projectname">jsocketpp<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A cross-platform C++20 socket library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('namespacejsocketpp_1_1internal.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">jsocketpp::internal Namespace Reference<div class="ingroups"><a class="el" href="group__jsocketpp.html">jsocketpp: C++20 cross-platform socket library</a> &raquo; <a class="el" href="group__internal.html">Internal Helpers</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Implementation-only utilities and platform abstractions for jsocketpp.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:AddrinfoDeleter" id="r_AddrinfoDeleter"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html">AddrinfoDeleter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom deleter for <span class="tt">addrinfo*</span> pointers to support RAII-style cleanup.  <a href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html#details">More...</a><br /></td></tr>
<tr class="memitem:ScopedBlockingMode" id="r_ScopedBlockingMode"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html">ScopedBlockingMode</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">RAII helper for temporarily overriding a socket's blocking mode.  <a href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga62d9b0682386f85cca0aadbdfbb76646" id="r_ga62d9b0682386f85cca0aadbdfbb76646"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga62d9b0682386f85cca0aadbdfbb76646">AddrinfoPtr</a> = std::unique_ptr&lt;addrinfo, <a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html">AddrinfoDeleter</a>&gt;</td></tr>
<tr class="memdesc:ga62d9b0682386f85cca0aadbdfbb76646"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smart pointer that manages <span class="tt">addrinfo*</span> resources using <span class="tt"><a class="el" href="structjsocketpp_1_1internal_1_1AddrinfoDeleter.html" title="Custom deleter for addrinfo* pointers to support RAII-style cleanup.">AddrinfoDeleter</a></span>.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae140ce724d1cfc733f3c2dbccf0cf60b" id="r_gae140ce724d1cfc733f3c2dbccf0cf60b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; WSABUF &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gae140ce724d1cfc733f3c2dbccf0cf60b">toWSABUF</a> (const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> *buffers, const std::size_t count)</td></tr>
<tr class="memdesc:gae140ce724d1cfc733f3c2dbccf0cf60b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a raw array of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into a WSABUF array for use with Windows socket APIs.  <br /></td></tr>
<tr class="memitem:ga53db0a38699800e21866a0ded1b433ba" id="r_ga53db0a38699800e21866a0ded1b433ba"><td class="memItemLeft" align="right" valign="top">std::vector&lt; WSABUF &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga53db0a38699800e21866a0ded1b433ba">toWSABUF</a> (const std::span&lt; const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> &gt; buffers)</td></tr>
<tr class="memdesc:ga53db0a38699800e21866a0ded1b433ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a span of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into a WSABUF array (Windows).  <br /></td></tr>
<tr class="memitem:ga7701a273337a71485ba1583df464b178" id="r_ga7701a273337a71485ba1583df464b178"><td class="memItemLeft" align="right" valign="top">std::vector&lt; iovec &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga7701a273337a71485ba1583df464b178">toIOVec</a> (const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> *buffers, const std::size_t count)</td></tr>
<tr class="memdesc:ga7701a273337a71485ba1583df464b178"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a raw array of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into an iovec array for POSIX <span class="tt">readv</span>/<span class="tt">writev</span>.  <br /></td></tr>
<tr class="memitem:gacdd48d04c87ec69aff97c5d29dbfe1a1" id="r_gacdd48d04c87ec69aff97c5d29dbfe1a1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; iovec &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gacdd48d04c87ec69aff97c5d29dbfe1a1">toIOVec</a> (const std::span&lt; const <a class="el" href="structjsocketpp_1_1BufferView.html">BufferView</a> &gt; buffers)</td></tr>
<tr class="memdesc:gacdd48d04c87ec69aff97c5d29dbfe1a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a span of <a class="el" href="structjsocketpp_1_1BufferView.html" title="Represents a raw writable memory region for scatter/gather I/O.">BufferView</a> elements into an iovec array for POSIX vectorized I/O.  <br /></td></tr>
<tr class="memitem:gab7cbd90f4b6d2e5f506de1b7fd5c6331" id="r_gab7cbd90f4b6d2e5f506de1b7fd5c6331"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__internal.html#ga62d9b0682386f85cca0aadbdfbb76646">AddrinfoPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gab7cbd90f4b6d2e5f506de1b7fd5c6331">resolveAddress</a> (const std::string_view host, const <a class="el" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, const int family, const int socktype, const int protocol, const int flags=0)</td></tr>
<tr class="memdesc:gab7cbd90f4b6d2e5f506de1b7fd5c6331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves a hostname and port into a list of usable socket address structures.  <br /></td></tr>
<tr class="memitem:ga19ca69ef83631dcf9e59205de179fbde" id="r_ga19ca69ef83631dcf9e59205de179fbde"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga19ca69ef83631dcf9e59205de179fbde">getBoundLocalIp</a> (<a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> sockFd)</td></tr>
<tr class="memdesc:ga19ca69ef83631dcf9e59205de179fbde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the local IP address to which the socket is currently bound.  <br /></td></tr>
<tr class="memitem:a9ec0f69551a2510b87db8ea21042ea42" id="r_a9ec0f69551a2510b87db8ea21042ea42"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9ec0f69551a2510b87db8ea21042ea42">ipAddressesEqual</a> (const std::string &amp;ip1, const std::string &amp;ip2)</td></tr>
<tr class="memdesc:a9ec0f69551a2510b87db8ea21042ea42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares two IP addresses for logical equality, accounting for IPv4-mapped IPv6 forms.  <br /></td></tr>
<tr class="memitem:ga8826c90e1bb9e0023b75940ff4cd72f8" id="r_ga8826c90e1bb9e0023b75940ff4cd72f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga8826c90e1bb9e0023b75940ff4cd72f8">sendExact</a> (<a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd, const void *data, std::size_t size)</td></tr>
<tr class="memdesc:ga8826c90e1bb9e0023b75940ff4cd72f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an entire datagram to a connected peer using <span class="tt">send()</span>.  <br /></td></tr>
<tr class="memitem:ga67bcc094472935bce938ff821b7ce8d8" id="r_ga67bcc094472935bce938ff821b7ce8d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga67bcc094472935bce938ff821b7ce8d8">sendExactTo</a> (<a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd, const void *data, std::size_t size, const sockaddr *addr, socklen_t addrLen, void(*afterSuccess)(void *ctx), void *ctx)</td></tr>
<tr class="memdesc:ga67bcc094472935bce938ff821b7ce8d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an entire datagram to a specific destination using <span class="tt">sendto()</span>.  <br /></td></tr>
<tr class="memitem:ga311f6b46f1941a20ab7e389787fc3bea" id="r_ga311f6b46f1941a20ab7e389787fc3bea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#ga311f6b46f1941a20ab7e389787fc3bea">tryCloseNoexcept</a> (const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd) noexcept</td></tr>
<tr class="memdesc:ga311f6b46f1941a20ab7e389787fc3bea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to close a socket descriptor without throwing exceptions.  <br /></td></tr>
<tr class="memitem:gab3b8ac088a7936657681c6de9a4400e1" id="r_gab3b8ac088a7936657681c6de9a4400e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__internal.html#gab3b8ac088a7936657681c6de9a4400e1">closeOrThrow</a> (const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd)</td></tr>
<tr class="memdesc:gab3b8ac088a7936657681c6de9a4400e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a socket descriptor and throws on failure.  <br /></td></tr>
<tr class="memitem:a592175a5a77f541b400879a5a4ca8978" id="r_a592175a5a77f541b400879a5a4ca8978"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a592175a5a77f541b400879a5a4ca8978">nextDatagramSize</a> (<a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd) noexcept</td></tr>
<tr class="memdesc:a592175a5a77f541b400879a5a4ca8978"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the exact size of the next UDP datagram, if the platform can provide it.  <br /></td></tr>
<tr class="memitem:a844d271662c4d03d58f7033b68394c7c" id="r_a844d271662c4d03d58f7033b68394c7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacejsocketpp.html#af86a15acff146a3ea52fb1c09a598575">ssize_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a844d271662c4d03d58f7033b68394c7c">recvInto</a> (const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a> fd, std::span&lt; std::byte &gt; dst, const int flags, sockaddr_storage *src, socklen_t *srcLen)</td></tr>
<tr class="memdesc:a844d271662c4d03d58f7033b68394c7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive into a caller-provided span, routing to <code>recv()</code> or <code>recvfrom()</code> as needed.  <br /></td></tr>
<tr class="memitem:a8a49e143a6246874f572bde7254e09b6" id="r_a8a49e143a6246874f572bde7254e09b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a49e143a6246874f572bde7254e09b6">throwLastSockError</a> (const std::source_location &amp;loc=std::source_location::current())</td></tr>
<tr class="memdesc:a8a49e143a6246874f572bde7254e09b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Throw a <a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a> for the last socket error, with optional source-location context.  <br /></td></tr>
<tr class="memitem:gac7021e2ae20ca2e2effd13f3279a4739" id="r_gac7021e2ae20ca2e2effd13f3279a4739"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__core.html#gac7021e2ae20ca2e2effd13f3279a4739">resolveNumericHostPort</a> (const sockaddr *sa, const socklen_t len, std::string &amp;host, <a class="el" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> &amp;port)</td></tr>
<tr class="memdesc:gac7021e2ae20ca2e2effd13f3279a4739"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolve numeric host and port from a socket address.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation-only utilities and platform abstractions for jsocketpp. </p>
<p>This namespace contains internal helper classes, platform-specific adapters, and low-level abstractions used by the jsocketpp library. These components are not part of the public API and may change at any time without notice.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md728"></a>
Contents</h3>
<ul>
<li>RAII wrappers (e.g., <span class="tt"><a class="el" href="classjsocketpp_1_1internal_1_1ScopedBlockingMode.html" title="RAII helper for temporarily overriding a socket&#39;s blocking mode.">ScopedBlockingMode</a></span>)</li>
<li>Platform-specific buffer conversion tools (e.g., <span class="tt"><a class="el" href="group__internal.html#ga7701a273337a71485ba1583df464b178" title="Convert a raw array of BufferView elements into an iovec array for POSIX readv/writev.">toIOVec()</a></span>, <span class="tt"><a class="el" href="group__internal.html#gae140ce724d1cfc733f3c2dbccf0cf60b" title="Convert a raw array of BufferView elements into a WSABUF array for use with Windows socket APIs.">toWSABUF()</a></span>)</li>
<li>Utility functions for socket state, error codes, and descriptor flags</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="autotoc_md729"></a>
Usage</h3>
<p>Developers using jsocketpp should not depend on symbols in this namespace unless they are contributing to the library itself or extending its internals.</p>
<dl class="section warning"><dt>Warning</dt><dd>Not part of the public API. Subject to change or removal in future versions. </dd></dl>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a9ec0f69551a2510b87db8ea21042ea42" name="a9ec0f69551a2510b87db8ea21042ea42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ec0f69551a2510b87db8ea21042ea42">&#9670;&#160;</a></span>ipAddressesEqual()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool jsocketpp::internal::ipAddressesEqual </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>ip1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>ip2</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compares two IP addresses for logical equality, accounting for IPv4-mapped IPv6 forms. </p>
<p>This function compares two IP addresses represented as strings (e.g., <span class="tt">"192.168.1.1"</span> or <span class="tt">"::ffff:192.168.1.1"</span>) and returns true if they refer to the same underlying address, regardless of representation format.</p>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md635"></a>
Why This Matters</h3>
<p>IPv4 addresses can be represented in IPv6 as <em>IPv4-mapped</em> addresses (e.g., <span class="tt">"::ffff:192.168.1.1"</span>), which are equivalent to their native IPv4 forms but will <b>not compare equal as strings</b>.</p>
<p>This helper resolves both input strings using <span class="tt">inet_pton()</span> and normalizes any IPv4 addresses into the IPv6-mapped space for byte-wise comparison.</p>
<hr  />
<h3 class="doxsection"><a class="anchor" id="autotoc_md637"></a>
Supported Inputs</h3>
<ul>
<li>IPv4 addresses (e.g., <span class="tt">"10.0.0.1"</span>)</li>
<li>IPv6 addresses (e.g., <span class="tt">"2001:db8::1"</span>)</li>
<li>IPv4-mapped IPv6 addresses (e.g., <span class="tt">"::ffff:10.0.0.1"</span>)</li>
</ul>
<hr  />
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ip1</td><td>First IP address as a numeric string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip2</td><td>Second IP address as a numeric string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><span class="tt">true</span> if the addresses are equivalent (including cross-family matches), <span class="tt">false</span> otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function performs no DNS resolution. Only numeric addresses are supported. </dd>
<dd>
Both inputs must be valid IP addresses. Invalid strings return <span class="tt">false</span>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__internal.html#ga19ca69ef83631dcf9e59205de179fbde" title="Retrieves the local IP address to which the socket is currently bound.">getBoundLocalIp()</a>, getMTU(), inet_pton() </dd></dl>

</div>
</div>
<a id="a592175a5a77f541b400879a5a4ca8978" name="a592175a5a77f541b400879a5a4ca8978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a592175a5a77f541b400879a5a4ca8978">&#9670;&#160;</a></span>nextDatagramSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::size_t jsocketpp::internal::nextDatagramSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel noexcept">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Query the exact size of the next UDP datagram, if the platform can provide it. </p>
<p>On many platforms, <code>FIONREAD</code> returns the size of the next pending datagram in bytes. On POSIX systems where <code>FIONREAD</code> is not reliable, we fall back to a zero-length <code>recvfrom()</code> with <code>MSG_PEEK|MSG_TRUNC</code>, which returns the exact datagram size without consuming it. If neither path yields a size, returns 0 and the caller must choose a fallback (e.g., internal buffer size or a default).</p>
<p>This function is stateless and does not modify socket state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td><a class="el" href="classjsocketpp_1_1Socket.html" title="TCP client connection abstraction (Java-like interface).">Socket</a> descriptor/handle. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Size in bytes of the next UDP datagram, or 0 if unknown.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keyword">const</span> std::size_t n = <a class="code hl_function" href="#a592175a5a77f541b400879a5a4ca8978">jsocketpp::internal::nextDatagramSize</a>(sockFd);</div>
<div class="line"><span class="keywordflow">if</span> (n == 0) {</div>
<div class="line">    <span class="comment">// fall back to buffer/default</span></div>
<div class="line">}</div>
<div class="ttc" id="anamespacejsocketpp_1_1internal_html_a592175a5a77f541b400879a5a4ca8978"><div class="ttname"><a href="#a592175a5a77f541b400879a5a4ca8978">jsocketpp::internal::nextDatagramSize</a></div><div class="ttdeci">std::size_t nextDatagramSize(SOCKET fd) noexcept</div><div class="ttdoc">Query the exact size of the next UDP datagram, if the platform can provide it.</div><div class="ttdef"><b>Definition</b> common.hpp:1280</div></div>
</div><!-- fragment --></dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<a id="a844d271662c4d03d58f7033b68394c7c" name="a844d271662c4d03d58f7033b68394c7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a844d271662c4d03d58f7033b68394c7c">&#9670;&#160;</a></span>recvInto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacejsocketpp.html#af86a15acff146a3ea52fb1c09a598575">ssize_t</a> jsocketpp::internal::recvInto </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacejsocketpp.html#ac484f9eb8a74658aa491da1d1bc15eda">SOCKET</a></td>          <td class="paramname"><span class="paramname"><em>fd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::span&lt; std::byte &gt;</td>          <td class="paramname"><span class="paramname"><em>dst</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int</td>          <td class="paramname"><span class="paramname"><em>flags</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sockaddr_storage *</td>          <td class="paramname"><span class="paramname"><em>src</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">socklen_t *</td>          <td class="paramname"><span class="paramname"><em>srcLen</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive into a caller-provided span, routing to <code>recv()</code> or <code>recvfrom()</code> as needed. </p>
<p>If <code class="param">src</code> and <code class="param">srcLen</code> are non-null, this calls <code>recvfrom()</code> and fills the sender address; otherwise, it calls <code>recv()</code>. The function performs the platform-specific cast for the length parameter on Windows.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td><a class="el" href="classjsocketpp_1_1Socket.html" title="TCP client connection abstraction (Java-like interface).">Socket</a> descriptor/handle. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">dst</td><td>Destination buffer span. The function attempts to fill up to <code>dst.size()</code> bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Receive flags (e.g., 0, <code>MSG_PEEK</code>). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">src</td><td>Optional sender address storage for unconnected sockets; may be null. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">srcLen</td><td>Length in/out of <code class="param">src</code>; may be null if <code class="param">src</code> is null.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;=0</td><td>The number of bytes received (may be 0 for zero-length UDP datagrams). </td></tr>
    <tr><td class="paramname">SOCKET_ERROR</td><td>On error; call <a class="el" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError()</a> for details.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function does not throw; it mirrors the system call semantics. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<a id="a8a49e143a6246874f572bde7254e09b6" name="a8a49e143a6246874f572bde7254e09b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a49e143a6246874f572bde7254e09b6">&#9670;&#160;</a></span>throwLastSockError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void jsocketpp::internal::throwLastSockError </td>
          <td>(</td>
          <td class="paramtype">const std::source_location &amp;</td>          <td class="paramname"><span class="paramname"><em>loc</em></span><span class="paramdefsep"> = </span><span class="paramdefval">std::source_location::current()</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Throw a <a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a> for the last socket error, with optional source-location context. </p>
<p>Captures the thread-local last socket error via <span class="tt"><a class="el" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError()</a></span> and throws using the project’s canonical two-argument pattern:</p>
<div class="fragment"><div class="line"><span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(err, <a class="code hl_function" href="namespacejsocketpp.html#a1d0357025eb782be52907801696556ca">SocketErrorMessage</a>(err));</div>
<div class="ttc" id="aclassjsocketpp_1_1SocketException_html"><div class="ttname"><a href="classjsocketpp_1_1SocketException.html">jsocketpp::SocketException</a></div><div class="ttdoc">Represents socket-related errors in the jsocketpp library.</div><div class="ttdef"><b>Definition</b> SocketException.hpp:63</div></div>
<div class="ttc" id="anamespacejsocketpp_html_a1d0357025eb782be52907801696556ca"><div class="ttname"><a href="namespacejsocketpp.html#a1d0357025eb782be52907801696556ca">jsocketpp::SocketErrorMessage</a></div><div class="ttdeci">std::string SocketErrorMessage(int error, bool gaiStrerror=false)</div><div class="ttdoc">Convert a socket-related error code to a human-readable message.</div><div class="ttdef"><b>Definition</b> common.cpp:5</div></div>
</div><!-- fragment --><p>When internal error-context is enabled (see build-time switch <span class="tt">JSOCKETPP_INCLUDE_ERROR_CONTEXT</span>), the human-readable message is augmented with call-site information derived from <span class="tt">std::source_location</span> (i.e., <span class="tt"><a href="file:line">file:line</a> function</span>). This function is marked <span class="tt">[[noreturn]]</span> and always throws.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">loc</td><td>Call-site source information. Defaults to <span class="tt">std::source_location::current()</span>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a></td><td>Always thrown. The first argument is the integer error code returned by <span class="tt"><a class="el" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError()</a></span>. The second argument is the human-readable message produced by <span class="tt">SocketErrorMessage(err)</span>, optionally suffixed with the source location when enabled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Requires C++20 (<span class="tt">&lt;source_location&gt;</span>). </dd>
<dd>
Thread-safe: reads a thread-local error code (<span class="tt"><a class="el" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError()</a></span> should return the error for the calling thread).</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="comment">// Typical usage in an error branch:</span></div>
<div class="line"><span class="keywordflow">if</span> (n == <a class="code hl_variable" href="namespacejsocketpp.html#adc2dd9860dec2a3c3189e756288d5ba2">SOCKET_ERROR</a>) {</div>
<div class="line">    <a class="code hl_function" href="#a8a49e143a6246874f572bde7254e09b6">jsocketpp::internal::throwLastSockError</a>(); <span class="comment">// source location captured automatically</span></div>
<div class="line">}</div>
<div class="ttc" id="anamespacejsocketpp_1_1internal_html_a8a49e143a6246874f572bde7254e09b6"><div class="ttname"><a href="#a8a49e143a6246874f572bde7254e09b6">jsocketpp::internal::throwLastSockError</a></div><div class="ttdeci">void throwLastSockError(const std::source_location &amp;loc=std::source_location::current())</div><div class="ttdoc">Throw a SocketException for the last socket error, with optional source-location context.</div><div class="ttdef"><b>Definition</b> common.hpp:1378</div></div>
<div class="ttc" id="anamespacejsocketpp_html_adc2dd9860dec2a3c3189e756288d5ba2"><div class="ttname"><a href="namespacejsocketpp.html#adc2dd9860dec2a3c3189e756288d5ba2">jsocketpp::SOCKET_ERROR</a></div><div class="ttdeci">constexpr SOCKET SOCKET_ERROR</div><div class="ttdef"><b>Definition</b> common.hpp:265</div></div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError()</a>, SocketErrorMessage(int), <a class="el" href="classjsocketpp_1_1SocketException.html" title="Represents socket-related errors in the jsocketpp library.">SocketException</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespacejsocketpp.html">jsocketpp</a></li><li class="navelem"><a href="namespacejsocketpp_1_1internal.html">internal</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
