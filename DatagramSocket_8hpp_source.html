<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>jsocketpp: include/jsocketpp/DatagramSocket.hpp Source File</title>
<link rel="icon" href="logo55px.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo55px.png"/></td>
  <td id="projectalign">
   <div id="projectname">jsocketpp<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A cross-platform C++20 socket library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('DatagramSocket_8hpp_source.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">DatagramSocket.hpp</div></div>
</div><!--header-->
<div class="contents">
<a href="DatagramSocket_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#pragma once</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="BufferView_8hpp.html">BufferView.hpp</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="common_8hpp.html">common.hpp</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="DatagramPacket_8hpp.html">DatagramPacket.hpp</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="buffer__traits_8hpp.html">detail/buffer_traits.hpp</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="SocketOptions_8hpp.html">SocketOptions.hpp</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;bit&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;span&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacejsocketpp.html">jsocketpp</a></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>{</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span></div>
<div class="foldopen" id="foldopen00064" data-start="{" data-end="};">
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="group__udp.html#ga2124eae8cec6709a67be265f14da3bdd">   64</a></span><span class="keyword">enum class</span> <a class="code hl_enumeration" href="group__udp.html#ga2124eae8cec6709a67be265f14da3bdd">DatagramReceiveMode</a> : std::uint8_t</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>{</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">   78</a></span>    <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">NoPreflight</a> = 0,</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda0882ede215c2d76da1b71837ab80e9bd">   97</a></span>    <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda0882ede215c2d76da1b71837ab80e9bd">PreflightSize</a> = 1,</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bddac9a017cf1d4a5f3aff960a3f7e8bffd5">  113</a></span>    <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bddac9a017cf1d4a5f3aff960a3f7e8bffd5">PreflightMax</a> = 2</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>};</div>
</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span></div>
<div class="foldopen" id="foldopen00135" data-start="{" data-end="};">
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html">  135</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>{</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html#aa343a807611fa5b42e9663c4890d4cca">  143</a></span>    <a class="code hl_enumeration" href="group__udp.html#ga2124eae8cec6709a67be265f14da3bdd">DatagramReceiveMode</a> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#aa343a807611fa5b42e9663c4890d4cca">mode</a> = <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">DatagramReceiveMode::NoPreflight</a>;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html#a4253951c03481252f5c1e8928dcb1e9c">  152</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a4253951c03481252f5c1e8928dcb1e9c">allowGrow</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html#a133704136dd9f7b68ca2b954e705c8b2">  161</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a133704136dd9f7b68ca2b954e705c8b2">allowShrink</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html#ae165365764844b3d87e0b1767bca3121">  172</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#ae165365764844b3d87e0b1767bca3121">recvFlags</a> = 0;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html#acc981c9de41d7deb5bf3a14a006bb430">  181</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#acc981c9de41d7deb5bf3a14a006bb430">updateLastRemote</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html#a1e0a5d17aeaa7205658058cfd218f8eb">  190</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a1e0a5d17aeaa7205658058cfd218f8eb">resolveNumeric</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadOptions.html#a135ca2ae6fc586542956653b239f106b">  220</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a135ca2ae6fc586542956653b239f106b">errorOnTruncate</a>{<span class="keyword">true</span>};</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>};</div>
</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span></div>
<div class="foldopen" id="foldopen00248" data-start="{" data-end="};">
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadResult.html">  248</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>{</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadResult.html#a0028f6f4fdf7a1b16332196d135b049a">  259</a></span>    std::size_t <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a0028f6f4fdf7a1b16332196d135b049a">bytes</a> = 0;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadResult.html#a10f694b065db3a3ab96a68445bee6dea">  271</a></span>    std::size_t <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a10f694b065db3a3ab96a68445bee6dea">datagramSize</a> = 0;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadResult.html#a830a7a1e1451dd93f23f44ddb063c4f3">  282</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a830a7a1e1451dd93f23f44ddb063c4f3">truncated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadResult.html#a3df9efe5356dd91cc9085c9ea12c6d6a">  294</a></span>    sockaddr_storage <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a3df9efe5356dd91cc9085c9ea12c6d6a">src</a>{};</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1DatagramReadResult.html#a10940ceb847102cee0ecd0310454918e">  305</a></span>    socklen_t <a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a10940ceb847102cee0ecd0310454918e">srcLen</a> = 0;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>};</div>
</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span></div>
<div class="foldopen" id="foldopen00326" data-start="{" data-end="};">
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1ReadExactOptions.html">  326</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structjsocketpp_1_1ReadExactOptions.html">ReadExactOptions</a></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>{</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1ReadExactOptions.html#a1b206449f5e0443cc97bb6ee3a6e8fdd">  339</a></span>    <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a> <a class="code hl_variable" href="structjsocketpp_1_1ReadExactOptions.html#a1b206449f5e0443cc97bb6ee3a6e8fdd">base</a>{};</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1ReadExactOptions.html#a0814487705ccc55adc3a25ae47fe9084">  351</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1ReadExactOptions.html#a0814487705ccc55adc3a25ae47fe9084">requireExact</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1ReadExactOptions.html#a1b3dca16ac543ff80a42b9468fd11759">  363</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1ReadExactOptions.html#a1b3dca16ac543ff80a42b9468fd11759">padIfSmaller</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1ReadExactOptions.html#a825f4af595e6ab4dd4e8fd95b8a92a52">  374</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1ReadExactOptions.html#a825f4af595e6ab4dd4e8fd95b8a92a52">errorOnTruncate</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno"><a class="line" href="structjsocketpp_1_1ReadExactOptions.html#ade6b57f1416832fc093804eb907ce3cf">  387</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structjsocketpp_1_1ReadExactOptions.html#ade6b57f1416832fc093804eb907ce3cf">autoResizeDynamic</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>};</div>
</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span></div>
<div class="foldopen" id="foldopen00412" data-start="{" data-end="};">
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno"><a class="line" href="group__udp.html#ga8272a360bdf6e0377f31ac8ce251a837">  412</a></span><span class="keyword">enum class</span> <a class="code hl_enumeration" href="group__udp.html#ga8272a360bdf6e0377f31ac8ce251a837">Direction</a> : std::uint8_t</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>{</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno"><a class="line" href="group__udp.html#gga8272a360bdf6e0377f31ac8ce251a837a7a1a5f3e79fdc91edf2f5ead9d66abb4">  414</a></span>    <a class="code hl_enumvalue" href="namespacejsocketpp.html#a0d2868e06cd95730d5088336f8c3c174a7a1a5f3e79fdc91edf2f5ead9d66abb4">Read</a>,     </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno"><a class="line" href="group__udp.html#gga8272a360bdf6e0377f31ac8ce251a837a1129c0e4d43f2d121652a7302712cff6">  415</a></span>    <a class="code hl_enumvalue" href="namespacejsocketpp.html#a0d2868e06cd95730d5088336f8c3c174a1129c0e4d43f2d121652a7302712cff6">Write</a>,    </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno"><a class="line" href="group__udp.html#gga8272a360bdf6e0377f31ac8ce251a837a70a2a84088d405a2e3f1e3accaa16723">  416</a></span>    <a class="code hl_enumvalue" href="group__udp.html#gga8272a360bdf6e0377f31ac8ce251a837a70a2a84088d405a2e3f1e3accaa16723">ReadWrite</a> </div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>};</div>
</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span></div>
<div class="foldopen" id="foldopen00483" data-start="{" data-end="};">
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html">  483</a></span><span class="keyword">class </span><a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a> : <span class="keyword">public</span> <a class="code hl_function" href="group__socketopts.html#ga9e263722ea800db82c34769d8f49be3a">SocketOptions</a></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>{</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>  <span class="keyword">public</span>:</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    <span class="keyword">explicit</span> <a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a>(<a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> localPort = 0, std::string_view localAddress = <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>                            std::optional&lt;std::size_t&gt; recvBufferSize = std::nullopt,</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>                            std::optional&lt;std::size_t&gt; sendBufferSize = std::nullopt,</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>                            std::optional&lt;std::size_t&gt; internalBufferSize = std::nullopt, <span class="keywordtype">bool</span> reuseAddress = <span class="keyword">true</span>,</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>                            <span class="keywordtype">int</span> soRecvTimeoutMillis = -1, <span class="keywordtype">int</span> soSendTimeoutMillis = -1, <span class="keywordtype">bool</span> nonBlocking = <span class="keyword">false</span>,</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>                            <span class="keywordtype">bool</span> dualStack = <span class="keyword">true</span>, <span class="keywordtype">bool</span> autoBind = <span class="keyword">true</span>, <span class="keywordtype">bool</span> autoConnect = <span class="keyword">false</span>,</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>                            std::string_view remoteAddress = <span class="stringliteral">&quot;&quot;</span>, <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> remotePort = 0, <span class="keywordtype">int</span> connectTimeoutMillis = -1);</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span></div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <a class="code hl_function" href="group__udp.html#gaf2be0b146f197d55cc55a5ba8b619166">~DatagramSocket</a>() <span class="keyword">noexcept</span> <span class="keyword">override</span>;</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno"><a class="line" href="group__udp.html#ga3d08597b24d9c7a3fe43dd291ee85148">  607</a></span>    <a class="code hl_function" href="group__udp.html#ga3d08597b24d9c7a3fe43dd291ee85148">DatagramSocket</a>(<span class="keyword">const</span> <a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno"><a class="line" href="group__udp.html#gab67aad3e2d477982f19d17ab80607417">  634</a></span>    <a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a>&amp; <a class="code hl_function" href="group__udp.html#gab67aad3e2d477982f19d17ab80607417">operator=</a>(<span class="keyword">const</span> <a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span></div>
<div class="foldopen" id="foldopen00665" data-start="{" data-end="}">
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno"><a class="line" href="group__udp.html#gab613123c8bf1aca6aec451b1140e2f82">  665</a></span>    <a class="code hl_function" href="group__udp.html#gab613123c8bf1aca6aec451b1140e2f82">DatagramSocket</a>(<a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a>&amp;&amp; rhs) noexcept</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>        : <a class="code hl_function" href="group__socketopts.html#ga9e263722ea800db82c34769d8f49be3a">SocketOptions</a>(rhs.getSocketFd()), <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632">_remoteAddr</a>(rhs._remoteAddr), <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8">_remoteAddrLen</a>(rhs._remoteAddrLen),</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>          <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac9e89ef197694e0464a7c8e076bd6e04">_haveRemoteAddr</a>(rhs._haveRemoteAddr.load(std::memory_order_relaxed)), <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a87523b567e1963c683584ed19c1d6f84">_localAddr</a>(rhs._localAddr),</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>          <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a471ce3677773b7fb9fb7766e247bc76f">_localAddrLen</a>(rhs._localAddrLen), <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a97c828576d9ee0290be3feb35a1bc81c">_haveLocalAddr</a>(rhs._haveLocalAddr.load(std::memory_order_relaxed)),</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>          <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a03328f6602738b63c4a6c8a720ec1204">_internalBuffer</a>(std::move(rhs._internalBuffer)), <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac4995ba9286d5dc4ad521a80a43c634a">_port</a>(rhs._port), <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a8c77f16fcae1c86b679a0567de055b7d">_isBound</a>(rhs._isBound),</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>          <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0">_isConnected</a>(rhs._isConnected)</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    {</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>        rhs.cleanup();</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    }</div>
</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span></div>
<div class="foldopen" id="foldopen00713" data-start="{" data-end="}">
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno"><a class="line" href="group__udp.html#ga38397874bcb62f889cb6fefa20b45ba6">  713</a></span>    <a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a>&amp; <a class="code hl_function" href="group__udp.html#ga38397874bcb62f889cb6fefa20b45ba6">operator=</a>(<a class="code hl_function" href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">DatagramSocket</a>&amp;&amp; rhs) <span class="keyword">noexcept</span></div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    {</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>        <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;rhs)</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>        {</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>            <span class="comment">// Clean up current socket</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>            <span class="keywordflow">try</span></div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>            {</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>                <a class="code hl_function" href="group__udp.html#ga9d0a9582b3a2a72bf62f182dbc33c352">close</a>(); <span class="comment">// Clean up existing resources</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>            }</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>            <span class="keywordflow">catch</span> (...)</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>            {</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>                <span class="comment">// CloseSocket error is ignored.</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>                <span class="comment">// TODO: Consider adding an internal flag, nested exception, or user-configurable error handler</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                <span class="comment">//       to report errors in future versions.</span></div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>            }</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>            <span class="comment">// Transfer ownership</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>            <a class="code hl_function" href="group__socketopts.html#ga97706ddf21aab33a18db00bd0b8eb65d">setSocketFd</a>(rhs.getSocketFd());</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632">_remoteAddr</a> = rhs._remoteAddr;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8">_remoteAddrLen</a> = rhs._remoteAddrLen;</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac9e89ef197694e0464a7c8e076bd6e04">_haveRemoteAddr</a>.store(rhs._haveRemoteAddr.load(std::memory_order_relaxed));</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a87523b567e1963c683584ed19c1d6f84">_localAddr</a> = rhs._localAddr;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a471ce3677773b7fb9fb7766e247bc76f">_localAddrLen</a> = rhs._localAddrLen;</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a97c828576d9ee0290be3feb35a1bc81c">_haveLocalAddr</a>.store(rhs._haveLocalAddr.load(std::memory_order_relaxed));</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a03328f6602738b63c4a6c8a720ec1204">_internalBuffer</a> = std::move(rhs._internalBuffer);</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac4995ba9286d5dc4ad521a80a43c634a">_port</a> = rhs._port;</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a8c77f16fcae1c86b679a0567de055b7d">_isBound</a> = rhs._isBound;</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>            <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0">_isConnected</a> = rhs._isConnected;</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span> </div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>            <span class="comment">// Reset source</span></div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>            rhs.cleanup();</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        }</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    }</div>
</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span></div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga550b67d7ad08c5cb068bb2b66d2c2c49">bind</a>();</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span></div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga550b67d7ad08c5cb068bb2b66d2c2c49">bind</a>(<a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> localPort);</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga550b67d7ad08c5cb068bb2b66d2c2c49">bind</a>(std::string_view localAddress, <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> localPort);</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno"><a class="line" href="group__udp.html#gadd6a72af69e4e8e1e8701c60a7e728f1">  880</a></span>    [[nodiscard]] <span class="keywordtype">bool</span> <a class="code hl_function" href="group__udp.html#gadd6a72af69e4e8e1e8701c60a7e728f1">isBound</a>() const noexcept { <span class="keywordflow">return</span> <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a8c77f16fcae1c86b679a0567de055b7d">_isBound</a>; }</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga915c790c7cfde485e680ddec2edb2e74">connect</a>(std::string_view host, <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, <span class="keywordtype">int</span> timeoutMillis);</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span></div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga02b08c333a2f109a3b19ec7b3c0cecf9">disconnect</a>();</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span></div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"><a class="line" href="group__udp.html#gac3b7c4a5fc5a21372c4a9cadb3e85efb"> 1016</a></span>    [[nodiscard]] <span class="keywordtype">bool</span> <a class="code hl_function" href="group__udp.html#gac3b7c4a5fc5a21372c4a9cadb3e85efb">isConnected</a>() const noexcept { <span class="keywordflow">return</span> <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0">_isConnected</a>; }</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span></div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#gab6486855380c97e18428a670f48f3efa">getLocalIp</a>(<span class="keywordtype">bool</span> convertIPv4Mapped);</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span></div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    [[nodiscard]] <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> <a class="code hl_function" href="group__udp.html#ga8b036d60faeaf712b6b477dc166061b8">getLocalPort</a>();</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span></div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#ga2b19edc594f75938a6028094744ec107">getLocalSocketAddress</a>(<span class="keywordtype">bool</span> convertIPv4Mapped);</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span></div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#ga3afd5b0d48ee9f92759c6f2d4ea9d8f0">getRemoteIp</a>(<span class="keywordtype">bool</span> convertIPv4Mapped) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>    [[nodiscard]] <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> <a class="code hl_function" href="group__udp.html#ga6d1dbfd5b854e120b352a27b541e5841">getRemotePort</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#gaa31790315a4bb8d20cd924157107a166">getRemoteSocketAddress</a>(<span class="keywordtype">bool</span> convertIPv4Mapped) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga96bc239f42265d5c408c8f15046f24c8">write</a>(std::string_view message) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span></div>
<div class="foldopen" id="foldopen01383" data-start="{" data-end="}">
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"><a class="line" href="group__udp.html#ga3d9722c04df6d147773249d94df09135"> 1383</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga3d9722c04df6d147773249d94df09135">write</a>(<span class="keyword">const</span> T&amp; value)<span class="keyword"> const</span></div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>        <span class="keyword">static_assert</span>(std::is_trivially_copyable_v&lt;T&gt;, <span class="stringliteral">&quot;DatagramSocket::write&lt;T&gt;() requires trivially copyable type&quot;</span>);</div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>        <span class="keyword">static_assert</span>(std::is_standard_layout_v&lt;T&gt;, <span class="stringliteral">&quot;DatagramSocket::write&lt;T&gt;() requires standard layout type&quot;</span>);</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span> </div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::write&lt;T&gt;(): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span> </div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0">_isConnected</a>)</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::write&lt;T&gt;(): socket is not connected. Use writeTo() instead.&quot;</span>);</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span> </div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>        <a class="code hl_function" href="group__udp.html#ga71ea4f3e14d566fe91a188f4cc4a5f64">enforceSendCapConnected</a>(<span class="keyword">sizeof</span>(T));</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span> </div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>        <span class="keyword">const</span> <span class="keyword">auto</span> buffer = std::bit_cast&lt;std::array&lt;std::byte, <span class="keyword">sizeof</span>(T)&gt;&gt;(value);</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>        <a class="code hl_function" href="group__internal.html#ga8826c90e1bb9e0023b75940ff4cd72f8">internal::sendExact</a>(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>(), buffer.data(), buffer.size());</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    }</div>
</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span></div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga96bc239f42265d5c408c8f15046f24c8">write</a>(std::span&lt;const std::byte&gt; data) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span></div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gabb163d329ca77150019c3e430f415209">writeAll</a>(std::string_view message) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span></div>
<div class="foldopen" id="foldopen01535" data-start="{" data-end="}">
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"><a class="line" href="group__udp.html#gaa848031032de9438dd560a8a9eba38d6"> 1535</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gaa848031032de9438dd560a8a9eba38d6">writePrefixed</a>(<span class="keyword">const</span> std::string_view payload)<span class="keyword"> const</span></div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>        <a class="code hl_function" href="group__udp.html#ga463c1511ac0622b623fa2937314e1239">sendPrefixedConnected&lt;T&gt;</a>(<a class="code hl_function" href="group__udp.html#ga20eb26c65ff8d9c880494e028509e0a8">asBytes</a>(payload));</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>    }</div>
</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span></div>
<div class="foldopen" id="foldopen01565" data-start="{" data-end="}">
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"><a class="line" href="group__udp.html#gaffb1e99dbfcac72f8936e43d2d35467e"> 1565</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gaffb1e99dbfcac72f8936e43d2d35467e">writePrefixed</a>(<span class="keyword">const</span> std::span&lt;const std::byte&gt; payload)<span class="keyword"> const</span></div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>        <a class="code hl_function" href="group__udp.html#ga463c1511ac0622b623fa2937314e1239">sendPrefixedConnected&lt;T&gt;</a>(payload);</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>    }</div>
</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span></div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen01601" data-start="{" data-end="}">
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"><a class="line" href="group__udp.html#gaf2398346dc295a530a70cc0f11bc5928"> 1601</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gaf2398346dc295a530a70cc0f11bc5928">writePrefixedTo</a>(<span class="keyword">const</span> std::string_view host, <span class="keyword">const</span> <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, <span class="keyword">const</span> std::string_view payload)<span class="keyword"> const</span></div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>        <a class="code hl_function" href="group__udp.html#ga5c4761b07760b1eadf84b9fbed700c98">sendPrefixedUnconnected&lt;T&gt;</a>(host, port, <a class="code hl_function" href="group__udp.html#ga20eb26c65ff8d9c880494e028509e0a8">asBytes</a>(payload));</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>    }</div>
</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span></div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen01633" data-start="{" data-end="}">
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"><a class="line" href="group__udp.html#ga568d0cb2e5888b3dca1f949e171c98ec"> 1633</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga568d0cb2e5888b3dca1f949e171c98ec">writePrefixedTo</a>(<span class="keyword">const</span> std::string_view host, <span class="keyword">const</span> <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, <span class="keyword">const</span> std::span&lt;const std::byte&gt; payload)<span class="keyword"> const</span></div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>        <a class="code hl_function" href="group__udp.html#ga5c4761b07760b1eadf84b9fbed700c98">sendPrefixedUnconnected&lt;T&gt;</a>(host, port, payload);</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>    }</div>
</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span></div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga6fff302b8483605f25254bf0a1f00baf">writev</a>(std::span&lt;const std::string_view&gt; buffers) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span></div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gac69845676b984d0876f7ad9311571846">writevAll</a>(std::span&lt;const std::string_view&gt; buffers) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span></div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga5fd49284f279d17c851a356caafdd216">writeFrom</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* data, std::size_t len) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span></div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga4a22b644010f53c741a8ea733e4abf0f">writeWithTimeout</a>(std::string_view data, <span class="keywordtype">int</span> timeoutMillis) <span class="keyword">const</span>;</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span></div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga96bc239f42265d5c408c8f15046f24c8">write</a>(<span class="keyword">const</span> <a class="code hl_class" href="classjsocketpp_1_1DatagramPacket.html">DatagramPacket</a>&amp; packet);</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span></div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gafed0d7b0bbe66da82d795d013ed2b29d">writeTo</a>(std::string_view host, <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, std::string_view message);</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span></div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gafed0d7b0bbe66da82d795d013ed2b29d">writeTo</a>(std::string_view host, <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, std::span&lt;const std::byte&gt; data);</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span></div>
<div class="foldopen" id="foldopen02169" data-start="{" data-end="}">
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"><a class="line" href="group__udp.html#gac74d3b4a3f6c64919382f8d3a9805eb8"> 2169</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gac74d3b4a3f6c64919382f8d3a9805eb8">writeTo</a>(<span class="keyword">const</span> std::string_view host, <span class="keyword">const</span> <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, <span class="keyword">const</span> T&amp; value)<span class="keyword"> const</span></div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>        <span class="keyword">static_assert</span>(std::is_trivially_copyable_v&lt;T&gt;, <span class="stringliteral">&quot;DatagramSocket::writeTo&lt;T&gt;() requires trivially copyable type&quot;</span>);</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>        <span class="keyword">static_assert</span>(std::is_standard_layout_v&lt;T&gt;, <span class="stringliteral">&quot;DatagramSocket::writeTo&lt;T&gt;() requires standard layout type&quot;</span>);</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span> </div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::writeTo&lt;T&gt;(): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span> </div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>        <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (<span class="keyword">sizeof</span>(T) == 0)</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span> </div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>        <span class="keyword">const</span> <span class="keyword">auto</span> buf = std::bit_cast&lt;std::array&lt;std::byte, <span class="keyword">sizeof</span>(T)&gt;&gt;(value);</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>        <a class="code hl_function" href="group__udp.html#gab12e38ad202aa788d89980864d3e83bc">sendUnconnectedTo</a>(host, port, buf.data(), buf.size());</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>    }</div>
</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span></div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>    <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> <a class="code hl_function" href="group__udp.html#gaa7f9cce85a502e58b8d86db95a8e0721">read</a>(<a class="code hl_class" href="classjsocketpp_1_1DatagramPacket.html">DatagramPacket</a>&amp; packet, <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts) <span class="keyword">const</span>;</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span></div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>    [[nodiscard]] <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> <a class="code hl_function" href="group__udp.html#gada22ab72b367e5123600bb3276422940">readInto</a>(<span class="keywordtype">void</span>* buffer, std::size_t len,</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>                                              <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span></div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>    [[nodiscard]] DatagramReadResult <a class="code hl_function" href="group__udp.html#gada22ab72b367e5123600bb3276422940">readInto</a>(std::span&lt;char&gt; out, <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span></div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, std::enable_if_t&lt;detail::is_dynamic_buffer_v&lt;T&gt;, <span class="keywordtype">int</span>&gt; = 0&gt;</div>
<div class="foldopen" id="foldopen02426" data-start="{" data-end="}">
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"><a class="line" href="group__udp.html#ga9f9e08f58d50d29e0f3fa9ccf83c1c97"> 2426</a></span>    [[nodiscard]] T <a class="code hl_function" href="group__udp.html#ga9f9e08f58d50d29e0f3fa9ccf83c1c97">read</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts = {},</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>                         std::size_t minCapacity = <a class="code hl_variable" href="group__core.html#ga2fb9d73742801c62e90aeb505c618c43">DefaultDatagramReceiveSize</a>) <span class="keyword">const</span></div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>    {</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>        <span class="keyword">using </span>Ptr = <span class="keyword">decltype</span>(std::declval&lt;T&amp;&gt;().data());</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>        <span class="keyword">using </span>Elem = std::remove_pointer_t&lt;Ptr&gt;;</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>        <span class="keyword">static_assert</span>(std::is_same_v&lt;Elem, char&gt; || std::is_same_v&lt;Elem, unsigned char&gt; ||</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>                          std::is_same_v&lt;Elem, std::byte&gt;,</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>                      <span class="stringliteral">&quot;T must be a contiguous byte-like container of char, unsigned char, or std::byte&quot;</span>);</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span> </div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>        <span class="keywordflow">if</span> (minCapacity == 0)</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>            minCapacity = 1; <span class="comment">// allow clean reception of zero-length datagrams</span></div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span> </div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>        std::size_t capacity = (std::min) (minCapacity, <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>);</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span> </div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>        <span class="comment">// Prefer an exact allocation when we can learn the size (either explicitly requested,</span></div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>        <span class="comment">// or because strict no-truncation is desired).</span></div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>        std::size_t probed = 0;</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> wantPreflight = (opts.mode != <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">DatagramReceiveMode::NoPreflight</a>) || opts.errorOnTruncate;</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span> </div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>        <span class="keywordflow">if</span> (wantPreflight)</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>        {</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>            <span class="keywordflow">try</span></div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>            {</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>                <span class="keywordflow">if</span> (<span class="keyword">const</span> std::size_t exact = <a class="code hl_function" href="namespacejsocketpp_1_1internal.html#a592175a5a77f541b400879a5a4ca8978">internal::nextDatagramSize</a>(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>()); exact &gt; 0)</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>                {</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>                    probed = (std::min) (exact, <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>);</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>                    capacity = (std::max) (capacity, probed); <span class="comment">// grow to fit the datagram exactly</span></div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>                }</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>            }</div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>            <span class="keywordflow">catch</span> (<span class="keyword">const</span> SocketException&amp;)</div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>            {</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>                <span class="comment">// graceful degradation: keep current capacity</span></div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>            }</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>        }</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span> </div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span>        T out;</div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>        out.resize(capacity);</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span> </div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>        DatagramReadOptions local = opts;</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>        <span class="keywordflow">if</span> (probed &gt; 0)</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>            local.mode = <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">DatagramReceiveMode::NoPreflight</a>; <span class="comment">// avoid redundant preflight on the actual recv</span></div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span> </div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>        <span class="comment">// Use the policy-aware backbone; it will enforce errorOnTruncate as documented.</span></div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> res = <a class="code hl_function" href="group__udp.html#gada22ab72b367e5123600bb3276422940">readInto</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(out.data()), out.size(), local); res.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a0028f6f4fdf7a1b16332196d135b049a">bytes</a> &lt; out.size())</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>            out.resize(res.bytes); <span class="comment">// shrink to actual bytes received (no null terminator implied)</span></div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span> </div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>        <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>    }</div>
</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span></div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, std::enable_if_t&lt;detail::is_fixed_buffer_v&lt;T&gt;, <span class="keywordtype">int</span>&gt; = 0&gt;</div>
<div class="foldopen" id="foldopen02524" data-start="{" data-end="}">
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"><a class="line" href="group__udp.html#ga24a48ca4f6711d89e0a89531b3b31807"> 2524</a></span>    [[nodiscard]] T <a class="code hl_function" href="group__udp.html#ga24a48ca4f6711d89e0a89531b3b31807">read</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts = {}) <span class="keyword">const</span></div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>    {</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>        <span class="keyword">using </span>Ptr = <span class="keyword">decltype</span>(std::declval&lt;T&amp;&gt;().data());</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>        <span class="keyword">using </span>Elem = std::remove_pointer_t&lt;Ptr&gt;;</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>        <span class="keyword">static_assert</span>(std::is_same_v&lt;Elem, char&gt; || std::is_same_v&lt;Elem, unsigned char&gt; ||</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>                          std::is_same_v&lt;Elem, std::byte&gt;,</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>                      <span class="stringliteral">&quot;T must be a contiguous byte-like container of char, unsigned char, or std::byte&quot;</span>);</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>        <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(Elem) == 1, <span class="stringliteral">&quot;T element type must be 1 byte wide&quot;</span>);</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span> </div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>        T out{}; <span class="comment">// value-init so any unused tail is predictable (typically zero)</span></div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span>        <span class="keywordflow">if</span> (out.size() == 0)</div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>            <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span> </div>
<div class="line"><a id="l02537" name="l02537"></a><span class="lineno"> 2537</span>        <span class="comment">// Zero-allocation, policy-aware read</span></div>
<div class="line"><a id="l02538" name="l02538"></a><span class="lineno"> 2538</span>        (void) <a class="code hl_function" href="group__udp.html#gada22ab72b367e5123600bb3276422940">readInto</a>(std::span&lt;char&gt;(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(out.data()), out.size()), opts);</div>
<div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>        <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>    }</div>
</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span></div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen02615" data-start="{" data-end="}">
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"><a class="line" href="group__udp.html#ga7fbd62107244e308dc0436f11fae7dad"> 2615</a></span>    [[nodiscard]] <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> <a class="code hl_function" href="group__udp.html#ga7fbd62107244e308dc0436f11fae7dad">readFrom</a>(T&amp; buffer, std::string* senderAddr, <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a>* senderPort,</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>                                              <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts)<span class="keyword"> const</span></div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readFrom(): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span> </div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>        <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> result{};</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span> </div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>        <span class="comment">// Determine current capacity and whether we can grow.</span></div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span>        <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> isDynamic = <a class="code hl_variable" href="namespacejsocketpp_1_1detail.html#aa46a9243f021ef54b04645f354feea30">detail::is_dynamic_buffer_v&lt;T&gt;</a>;</div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>        <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> isFixed = <a class="code hl_variable" href="namespacejsocketpp_1_1detail.html#a18306b136e94e5aaf18c6dd6d5f06f33">detail::is_fixed_buffer_v&lt;T&gt;</a>;</div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>        <span class="keyword">static_assert</span>(isDynamic || isFixed, <span class="stringliteral">&quot;T must be a supported dynamic or fixed-size contiguous byte container&quot;</span>);</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span> </div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>        <span class="keyword">auto</span> currSize = <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(buffer.size());</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span> </div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>        <span class="comment">// For dynamic containers, ensure at least 1 byte to properly consume zero-length datagrams.</span></div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>        <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (isDynamic)</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>        {</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>            <span class="keywordflow">if</span> (currSize == 0)</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>                currSize = (std::min) (<a class="code hl_variable" href="group__core.html#ga2fb9d73742801c62e90aeb505c618c43">DefaultDatagramReceiveSize</a>, <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>);</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>        }</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span> </div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>        <span class="comment">// Optional preflight: if we can learn the size, either grow (dynamic) or enforce policy (fixed).</span></div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>        std::size_t probed = 0;</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> wantPreflight = (opts.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#aa343a807611fa5b42e9663c4890d4cca">mode</a> != <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">DatagramReceiveMode::NoPreflight</a>) || opts.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a135ca2ae6fc586542956653b239f106b">errorOnTruncate</a>;</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span> </div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>        <span class="keywordflow">if</span> (wantPreflight)</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>        {</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>            <span class="keywordflow">try</span></div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>            {</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>                <span class="keyword">const</span> std::size_t exact = <a class="code hl_function" href="namespacejsocketpp_1_1internal.html#a592175a5a77f541b400879a5a4ca8978">internal::nextDatagramSize</a>(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>());</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>                <span class="keywordflow">if</span> (exact &gt; 0)</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>                {</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>                    probed = (std::min) (exact, <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>);</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span> </div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>                    <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (isDynamic)</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>                    {</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>                        <span class="keywordflow">if</span> (probed &gt; currSize)</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>                            currSize = probed; <span class="comment">// grow to fit the datagram exactly</span></div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>                    }</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>                    { <span class="comment">// fixed</span></div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>                        <span class="keywordflow">if</span> (opts.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a135ca2ae6fc586542956653b239f106b">errorOnTruncate</a> &amp;&amp; probed &gt; currSize)</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>                        {</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>                            <span class="comment">// Early, non-destructive failure: datagram remains queued.</span></div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>                            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readFrom(): fixed buffer too small for incoming &quot;</span></div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>                                                  <span class="stringliteral">&quot;datagram (preflight).&quot;</span>);</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>                        }</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span>                    }</div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>                }</div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>            }</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span>            <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>&amp;)</div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>            {</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>                <span class="comment">// graceful degradation; fall back to single-recv path</span></div>
<div class="line"><a id="l02669" name="l02669"></a><span class="lineno"> 2669</span>                probed = 0;</div>
<div class="line"><a id="l02670" name="l02670"></a><span class="lineno"> 2670</span>            }</div>
<div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>        }</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span> </div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>        <span class="comment">// Clamp to safety cap.</span></div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>        currSize = (std::min) (currSize, <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>);</div>
<div class="line"><a id="l02675" name="l02675"></a><span class="lineno"> 2675</span> </div>
<div class="line"><a id="l02676" name="l02676"></a><span class="lineno"> 2676</span>        <span class="comment">// Resize dynamic container as needed.</span></div>
<div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>        <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (isDynamic)</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>            buffer.resize(currSize);</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span> </div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>        <span class="comment">// Perform exactly one receive using the low-level backbone to obtain sender info.</span></div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>        sockaddr_storage src{};</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span>        <span class="keyword">auto</span> srcLen = <span class="keyword">static_cast&lt;</span>socklen_t<span class="keyword">&gt;</span>(<span class="keyword">sizeof</span>(src));</div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>        std::size_t datagramSize = 0;</div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span>        <span class="keywordtype">bool</span> truncated = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span> </div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>        <span class="keyword">const</span> <a class="code hl_enumeration" href="group__udp.html#ga2124eae8cec6709a67be265f14da3bdd">DatagramReceiveMode</a> effectiveMode = (probed &gt; 0 ? <a class="code hl_enumvalue" href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">DatagramReceiveMode::NoPreflight</a> : opts.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#aa343a807611fa5b42e9663c4890d4cca">mode</a>);</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span> </div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>        <span class="keyword">const</span> std::size_t n = <a class="code hl_function" href="group__udp.html#ga30912969f0808f064aaeee9a79025f41">readIntoBuffer</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(buffer.data()), currSize, effectiveMode,</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>                                             opts.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#ae165365764844b3d87e0b1767bca3121">recvFlags</a>, &amp;src, &amp;srcLen, &amp;datagramSize, &amp;truncated);</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span> </div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>        <span class="comment">// Enforce strict no-truncation after the read if we couldn&#39;t fail early.</span></div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>        <span class="keywordflow">if</span> (opts.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a135ca2ae6fc586542956653b239f106b">errorOnTruncate</a> &amp;&amp; (truncated || (datagramSize &gt; 0 &amp;&amp; datagramSize &gt; currSize)))</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>        {</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readFrom(): datagram truncated into destination buffer.&quot;</span>);</div>
<div class="line"><a id="l02695" name="l02695"></a><span class="lineno"> 2695</span>        }</div>
<div class="line"><a id="l02696" name="l02696"></a><span class="lineno"> 2696</span> </div>
<div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>        <span class="comment">// Shrink dynamic container to the actual bytes received.</span></div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>        <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (isDynamic)</div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>        {</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>            <span class="keywordflow">if</span> (n &lt; buffer.size())</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>                buffer.resize(n);</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>        }</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span> </div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>        <span class="comment">// Fill the result structure.</span></div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>        result.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a0028f6f4fdf7a1b16332196d135b049a">bytes</a> = n;</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>        result.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a10f694b065db3a3ab96a68445bee6dea">datagramSize</a> = (datagramSize &gt; 0 ? datagramSize : n);</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>        result.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a830a7a1e1451dd93f23f44ddb063c4f3">truncated</a> = truncated;</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span>        result.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a3df9efe5356dd91cc9085c9ea12c6d6a">src</a> = src;</div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>        result.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a10940ceb847102cee0ecd0310454918e">srcLen</a> = srcLen;</div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span> </div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>        <span class="comment">// Optional: update last-remote if requested by options.</span></div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>        <span class="keywordflow">if</span> (opts.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#acc981c9de41d7deb5bf3a14a006bb430">updateLastRemote</a>)</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>            <a class="code hl_function" href="classjsocketpp_1_1DatagramSocket.html#a9496226b4741c2ef3916b6dfad00442a">rememberRemote</a>(src, srcLen);</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span> </div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>        <span class="comment">// Resolve numeric sender info if requested.</span></div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>        <span class="keywordflow">if</span> ((senderAddr || senderPort) &amp;&amp; srcLen &gt; 0)</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>        {</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>            std::string addrStr;</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span>            <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> portNum{};</div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>            <a class="code hl_function" href="group__core.html#gac7021e2ae20ca2e2effd13f3279a4739">internal::resolveNumericHostPort</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>sockaddr*<span class="keyword">&gt;</span>(&amp;src), srcLen, addrStr, portNum);</div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>            <span class="keywordflow">if</span> (senderAddr)</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>                *senderAddr = std::move(addrStr);</div>
<div class="line"><a id="l02723" name="l02723"></a><span class="lineno"> 2723</span>            <span class="keywordflow">if</span> (senderPort)</div>
<div class="line"><a id="l02724" name="l02724"></a><span class="lineno"> 2724</span>                *senderPort = portNum;</div>
<div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>        }</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span> </div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>    }</div>
</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span></div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>    [[nodiscard]] <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> <a class="code hl_function" href="group__udp.html#gab34fd67ebc17563f286dde70ba456cf9">readExact</a>(<span class="keywordtype">void</span>* buffer, std::size_t exactLen,</div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>                                               <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1ReadExactOptions.html">ReadExactOptions</a>&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span></div>
<div class="line"><a id="l02785" name="l02785"></a><span class="lineno"> 2785</span>    [[nodiscard]] DatagramReadResult <a class="code hl_function" href="group__udp.html#gab34fd67ebc17563f286dde70ba456cf9">readExact</a>(std::span&lt;char&gt; out, <span class="keyword">const</span> ReadExactOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l02786" name="l02786"></a><span class="lineno"> 2786</span></div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen02861" data-start="{" data-end="}">
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"><a class="line" href="group__udp.html#gaf2d8f0e01d69beb2ae22383abf706e2c"> 2861</a></span>    [[nodiscard]] <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> <a class="code hl_function" href="group__udp.html#gaf2d8f0e01d69beb2ae22383abf706e2c">readExact</a>(T&amp; buffer, <span class="keyword">const</span> std::size_t exactLen,</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>                                               <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1ReadExactOptions.html">ReadExactOptions</a>&amp; opts = {}) <span class="keyword">const</span></div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>    {</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readExact(T&amp;,size_t): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l02866" name="l02866"></a><span class="lineno"> 2866</span>        <span class="keywordflow">if</span> (exactLen == 0)</div>
<div class="line"><a id="l02867" name="l02867"></a><span class="lineno"> 2867</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readExact(T&amp;,size_t): exactLen must be &gt; 0.&quot;</span>);</div>
<div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span> </div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>        <span class="comment">// Validate container element type and contiguity at compile time</span></div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>        <span class="keyword">using </span>Ptr = <span class="keyword">decltype</span>(std::declval&lt;T&amp;&gt;().data());</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>        <span class="keyword">using </span>Elem = std::remove_pointer_t&lt;Ptr&gt;;</div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>        <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(Elem) == 1, <span class="stringliteral">&quot;T element type must be 1 byte wide&quot;</span>);</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>        <span class="keyword">static_assert</span>(std::is_same_v&lt;Elem, char&gt; || std::is_same_v&lt;Elem, unsigned char&gt; ||</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>                          std::is_same_v&lt;Elem, std::byte&gt;,</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>                      <span class="stringliteral">&quot;T must be a contiguous byte-like container of char, unsigned char, or std::byte&quot;</span>);</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span> </div>
<div class="line"><a id="l02877" name="l02877"></a><span class="lineno"> 2877</span>        <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> res{};</div>
<div class="line"><a id="l02878" name="l02878"></a><span class="lineno"> 2878</span> </div>
<div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>        <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (<a class="code hl_variable" href="namespacejsocketpp_1_1detail.html#aa46a9243f021ef54b04645f354feea30">detail::is_dynamic_buffer_v&lt;T&gt;</a>)</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>        {</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>            <span class="comment">// Ensure capacity matches policy</span></div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>            <span class="keywordflow">if</span> (opts.autoResizeDynamic)</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>            {</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span>                <span class="keywordflow">if</span> (exactLen &gt; <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>)</div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>                    <span class="keywordflow">throw</span> SocketException(</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>                        <span class="stringliteral">&quot;DatagramSocket::readExact(T&amp;,size_t): exactLen exceeds MaxDatagramPayloadSafe.&quot;</span>);</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>                buffer.resize(exactLen); <span class="comment">// value-initializes any new bytes</span></div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>            }</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>            {</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>                <span class="keywordflow">if</span> (buffer.size() &lt; exactLen)</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>                    <span class="keywordflow">throw</span> SocketException(</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>                        <span class="stringliteral">&quot;DatagramSocket::readExact(T&amp;,size_t): buffer too small and autoResizeDynamic=false.&quot;</span>);</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>            }</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span> </div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>            <span class="comment">// Perform policy-aware exact read into the first exactLen bytes</span></div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>            res = <a class="code hl_function" href="group__udp.html#gab34fd67ebc17563f286dde70ba456cf9">readExact</a>(std::span(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(buffer.data()), exactLen), opts);</div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span> </div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>            <span class="comment">// Normalize container size to the logical exact length (keeps API guarantees)</span></div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>            <span class="keywordflow">if</span> (buffer.size() != exactLen)</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>                buffer.resize(exactLen); <span class="comment">// any extension is value-initialized (zeros)</span></div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>        }</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> <span class="keyword">constexpr</span> (<a class="code hl_variable" href="namespacejsocketpp_1_1detail.html#a18306b136e94e5aaf18c6dd6d5f06f33">detail::is_fixed_buffer_v&lt;T&gt;</a>)</div>
<div class="line"><a id="l02904" name="l02904"></a><span class="lineno"> 2904</span>        {</div>
<div class="line"><a id="l02905" name="l02905"></a><span class="lineno"> 2905</span>            <span class="keywordflow">if</span> (buffer.size() &lt; exactLen)</div>
<div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>                <span class="keywordflow">throw</span> SocketException(<span class="stringliteral">&quot;DatagramSocket::readExact(T&amp;,size_t): fixed buffer smaller than exactLen.&quot;</span>);</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span> </div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>            <span class="comment">// Exact read directly into the fixed-size storage (only the first exactLen bytes are touched)</span></div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span>            res = <a class="code hl_function" href="group__udp.html#gab34fd67ebc17563f286dde70ba456cf9">readExact</a>(std::span(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(buffer.data()), exactLen), opts);</div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>            <span class="comment">// Size is fixed; if padding was requested, the span path already zero-filled the tail.</span></div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>        }</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>        {</div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>            <span class="keyword">static_assert</span>(<a class="code hl_variable" href="namespacejsocketpp_1_1detail.html#aa46a9243f021ef54b04645f354feea30">detail::is_dynamic_buffer_v&lt;T&gt;</a> || <a class="code hl_variable" href="namespacejsocketpp_1_1detail.html#a18306b136e94e5aaf18c6dd6d5f06f33">detail::is_fixed_buffer_v&lt;T&gt;</a>,</div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>                          <span class="stringliteral">&quot;T must be a supported dynamic or fixed-size contiguous byte container&quot;</span>);</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>        }</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span> </div>
<div class="line"><a id="l02918" name="l02918"></a><span class="lineno"> 2918</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l02919" name="l02919"></a><span class="lineno"> 2919</span>    }</div>
</div>
<div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span></div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>    std::size_t <a class="code hl_function" href="group__udp.html#gad5548c6a422e710410315dd6fb92788d">readAtMost</a>(std::span&lt;char&gt; out, <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l02974" name="l02974"></a><span class="lineno"> 2974</span></div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#gad5548c6a422e710410315dd6fb92788d">readAtMost</a>(std::size_t n) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span></div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#ga85c18071cceb1c0c679b7a444cfa9f65">readAvailable</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span></div>
<div class="line"><a id="l03136" name="l03136"></a><span class="lineno"> 3136</span>    std::size_t <a class="code hl_function" href="group__udp.html#ga85c18071cceb1c0c679b7a444cfa9f65">readAvailable</a>(std::span&lt;char&gt; out, <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span></div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>    std::size_t <a class="code hl_function" href="group__udp.html#gae739db534b15bd856c9d83ac020a7796">readIntoExact</a>(<span class="keywordtype">void</span>* buffer, std::size_t len) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span></div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#ga4d5295306a17e8fdf4a6e00556e043b5">readAtMostWithTimeout</a>(std::size_t n, <span class="keywordtype">int</span> timeoutMillis) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span></div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>    <span class="keyword">template</span> &lt;</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>        <span class="keyword">typename</span> T,</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span>        std::enable_if_t&lt;std::is_integral_v&lt;T&gt; &amp;&amp; std::is_unsigned_v&lt;T&gt; &amp;&amp; std::is_trivially_copyable_v&lt;T&gt;, <span class="keywordtype">int</span>&gt; = 0&gt;</div>
<div class="foldopen" id="foldopen03274" data-start="{" data-end="}">
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"><a class="line" href="group__udp.html#gabac0f0e22e72fa908fa49e44302c2a12"> 3274</a></span>    [[nodiscard]] std::string <a class="code hl_function" href="group__udp.html#gabac0f0e22e72fa908fa49e44302c2a12">readPrefixed</a>(std::size_t maxPayloadLen = <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>,</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>                                           <span class="keyword">const</span> std::endian prefixEndian = std::endian::big)<span class="keyword"> const</span></div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readPrefixed&lt;T&gt;(): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span> </div>
<div class="line"><a id="l03280" name="l03280"></a><span class="lineno"> 3280</span>        <span class="comment">// Clamp guard values</span></div>
<div class="line"><a id="l03281" name="l03281"></a><span class="lineno"> 3281</span>        <span class="keywordflow">if</span> (maxPayloadLen == 0)</div>
<div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>        {</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>            <span class="comment">// Only valid if the incoming prefix is exactly zero; we’ll validate after the read.</span></div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>            <span class="comment">// Keep as 0 here; we still read the datagram and then enforce.</span></div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>        }</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>        <span class="keyword">constexpr</span> std::size_t safeMax = <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>;</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>        <span class="keywordflow">if</span> (maxPayloadLen &gt; safeMax)</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>            maxPayloadLen = safeMax;</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span> </div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>        <span class="comment">// Prefer allocating exactly the datagram size when we can probe.</span></div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>        std::size_t probed = 0;</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>        <span class="keywordflow">try</span></div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>        {</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>            <span class="keywordflow">if</span> (<span class="keyword">const</span> std::size_t sz = <a class="code hl_function" href="namespacejsocketpp_1_1internal.html#a592175a5a77f541b400879a5a4ca8978">internal::nextDatagramSize</a>(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>()); sz &gt; 0)</div>
<div class="line"><a id="l03295" name="l03295"></a><span class="lineno"> 3295</span>                probed = (std::min) (sz, safeMax);</div>
<div class="line"><a id="l03296" name="l03296"></a><span class="lineno"> 3296</span>        }</div>
<div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>        <span class="keywordflow">catch</span> (<span class="keyword">const</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>&amp;)</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>        {</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>            <span class="comment">// Fallback to safe maximum below.</span></div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>            probed = 0;</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>        }</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span> </div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>        <span class="keyword">const</span> std::size_t cap = (probed &gt; 0) ? probed : safeMax;</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>        <span class="keywordflow">if</span> (cap &lt; <span class="keyword">sizeof</span>(T))</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>        {</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>            <span class="comment">// We’ll still read and then fail with a precise error if needed.</span></div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>        }</div>
<div class="line"><a id="l03308" name="l03308"></a><span class="lineno"> 3308</span> </div>
<div class="line"><a id="l03309" name="l03309"></a><span class="lineno"> 3309</span>        std::string frame(cap, <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span> </div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>        <span class="comment">// Read the entire datagram (no truncation); a single recv is used internally.</span></div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>        <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a> ro{};</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>        ro.<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadOptions.html#a135ca2ae6fc586542956653b239f106b">errorOnTruncate</a> = <span class="keyword">true</span>; <span class="comment">// enforce full-datagram semantics</span></div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>        <span class="keyword">const</span> std::size_t n = <a class="code hl_function" href="group__udp.html#ga85c18071cceb1c0c679b7a444cfa9f65">readAvailable</a>(std::span&lt;char&gt;(frame.data(), frame.size()), ro);</div>
<div class="line"><a id="l03315" name="l03315"></a><span class="lineno"> 3315</span>        frame.resize(n);</div>
<div class="line"><a id="l03316" name="l03316"></a><span class="lineno"> 3316</span> </div>
<div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>        <span class="comment">// Validate minimal size (must contain the prefix)</span></div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>        <span class="keywordflow">if</span> (frame.size() &lt; <span class="keyword">sizeof</span>(T))</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readPrefixed&lt;T&gt;(): datagram smaller than length prefix.&quot;</span>);</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span> </div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>        <span class="comment">// Decode prefix in requested endian</span></div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>        <span class="keyword">const</span> <span class="keyword">auto</span>* p = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(frame.data());</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>        std::uint64_t decl = 0;</div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span> </div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>        <span class="keywordflow">if</span> (prefixEndian == std::endian::big)</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>        {</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>            <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; <span class="keyword">sizeof</span>(T); ++i)</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>                decl = (decl &lt;&lt; 8) | <span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>(p[i]);</div>
<div class="line"><a id="l03329" name="l03329"></a><span class="lineno"> 3329</span>        }</div>
<div class="line"><a id="l03330" name="l03330"></a><span class="lineno"> 3330</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>        { <span class="comment">// little-endian</span></div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>            <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; <span class="keyword">sizeof</span>(T); ++i)</div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>                decl |= (<span class="keyword">static_cast&lt;</span>std::uint64_t<span class="keyword">&gt;</span>(p[i]) &lt;&lt; (8 * i));</div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>        }</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span> </div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>        <span class="keyword">const</span> std::size_t declared = decl;</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span> </div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span>        <span class="comment">// Enforce declared size == actual payload length</span></div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>        <span class="keywordflow">if</span> (<span class="keyword">const</span> std::size_t actual = frame.size() - <span class="keyword">sizeof</span>(T); declared != actual)</div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readPrefixed&lt;T&gt;(): prefix/payload size mismatch.&quot;</span>);</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span> </div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>        <span class="comment">// Enforce application-level max payload guard</span></div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>        <span class="keywordflow">if</span> (declared &gt; maxPayloadLen)</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::readPrefixed&lt;T&gt;(): payload exceeds maxPayloadLen.&quot;</span>);</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span> </div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>        <span class="comment">// Return payload slice</span></div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>        <span class="keywordflow">return</span> {frame.data() + <span class="keyword">sizeof</span>(T), frame.data() + <span class="keyword">sizeof</span>(T) + declared};</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>    }</div>
</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span></div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga243b470108bb0e02602780ee6c2ed8a7">discard</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span></div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gaaa04156c3da5af5cf724d46764a04c84">discardExact</a>(std::size_t n, <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span></div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>    [[nodiscard]] DatagramReadResult <a class="code hl_function" href="group__udp.html#gae1222e5ce7f8c5e48f8fd997f4b57b42">readv</a>(std::span&lt;BufferView&gt; buffers, <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span></div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>    [[nodiscard]] DatagramReadResult <a class="code hl_function" href="group__udp.html#ga59d70a7a49451b0581757861d7fecf46">readvAll</a>(std::span&lt;BufferView&gt; buffers,</div>
<div class="line"><a id="l03511" name="l03511"></a><span class="lineno"> 3511</span>                                              <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03512" name="l03512"></a><span class="lineno"> 3512</span></div>
<div class="foldopen" id="foldopen03522" data-start="{" data-end="}">
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"><a class="line" href="group__udp.html#ga06d5ac95a81132f8914473d59d333500"> 3522</a></span>    std::size_t <a class="code hl_function" href="group__udp.html#ga06d5ac95a81132f8914473d59d333500">readvAllBytes</a>(std::span&lt;BufferView&gt; buffers, <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts = {}) <span class="keyword">const</span></div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>    {</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__udp.html#ga59d70a7a49451b0581757861d7fecf46">readvAll</a>(buffers, opts).<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a0028f6f4fdf7a1b16332196d135b049a">bytes</a>;</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>    }</div>
</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span></div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>    [[nodiscard]] DatagramReadResult <a class="code hl_function" href="group__udp.html#ga2e86bfec6de8b35caba5fc00a83489a4">readvAtMostWithTimeout</a>(std::span&lt;BufferView&gt; buffers, <span class="keywordtype">int</span> timeoutMillis,</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>                                                            <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03565" name="l03565"></a><span class="lineno"> 3565</span></div>
<div class="foldopen" id="foldopen03571" data-start="{" data-end="}">
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"><a class="line" href="group__udp.html#gabddf96e6ee7f156a0fa09a054551744f"> 3571</a></span>    std::size_t <a class="code hl_function" href="group__udp.html#gabddf96e6ee7f156a0fa09a054551744f">readvAtMostWithTimeout</a>(std::span&lt;BufferView&gt; buffers, <span class="keywordtype">int</span> timeoutMillis)<span class="keyword"> const</span></div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__udp.html#ga2e86bfec6de8b35caba5fc00a83489a4">readvAtMostWithTimeout</a>(buffers, timeoutMillis, <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>{}).bytes;</div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>    }</div>
</div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span></div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span>    [[nodiscard]] <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadResult.html">DatagramReadResult</a> <a class="code hl_function" href="group__udp.html#ga94a10f136669c41e25fa2be205bd90af">readvAllWithTotalTimeout</a>(std::span&lt;BufferView&gt; buffers, <span class="keywordtype">int</span> totalTimeoutMillis,</div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>                                                              <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span></div>
<div class="foldopen" id="foldopen03639" data-start="{" data-end="}">
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"><a class="line" href="group__udp.html#ga037a8dcf56048b94e398842993021f0a"> 3639</a></span>    std::size_t <a class="code hl_function" href="group__udp.html#ga037a8dcf56048b94e398842993021f0a">readvAllWithTotalTimeoutBytes</a>(std::span&lt;BufferView&gt; buffers, <span class="keywordtype">int</span> totalTimeoutMillis,</div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>                                              <span class="keyword">const</span> <a class="code hl_struct" href="structjsocketpp_1_1DatagramReadOptions.html">DatagramReadOptions</a>&amp; opts = {}) <span class="keyword">const</span></div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>    {</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="group__udp.html#ga94a10f136669c41e25fa2be205bd90af">readvAllWithTotalTimeout</a>(buffers, totalTimeoutMillis, opts).<a class="code hl_variable" href="structjsocketpp_1_1DatagramReadResult.html#a0028f6f4fdf7a1b16332196d135b049a">bytes</a>;</div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>    }</div>
</div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span></div>
<div class="line"><a id="l03692" name="l03692"></a><span class="lineno"> 3692</span>    [[nodiscard]] DatagramReadResult <a class="code hl_function" href="group__udp.html#gadfec1ac007add5eddeabee9c19a621cf">peek</a>(DatagramPacket&amp; packet, <span class="keywordtype">bool</span> allowResize = <span class="keyword">true</span>,</div>
<div class="line"><a id="l03693" name="l03693"></a><span class="lineno"> 3693</span>                                          <span class="keyword">const</span> DatagramReadOptions&amp; opts = {}) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03694" name="l03694"></a><span class="lineno"> 3694</span></div>
<div class="line"><a id="l03724" name="l03724"></a><span class="lineno"> 3724</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="group__udp.html#ga9befab6dbf6e8fc0dd9ee0e9645ea099">hasPendingData</a>(<span class="keywordtype">int</span> timeoutMillis) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03725" name="l03725"></a><span class="lineno"> 3725</span></div>
<div class="line"><a id="l03780" name="l03780"></a><span class="lineno"> 3780</span>    [[nodiscard]] std::optional&lt;int&gt; <a class="code hl_function" href="group__udp.html#gabd73eb7df3c7871b1637ad03cc06b64c">getMTU</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l03781" name="l03781"></a><span class="lineno"> 3781</span></div>
<div class="line"><a id="l03817" name="l03817"></a><span class="lineno"> 3817</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga53fd92734f14407ce6c78d8df246c319">waitReady</a>(<a class="code hl_enumeration" href="group__udp.html#ga8272a360bdf6e0377f31ac8ce251a837">Direction</a> dir, <span class="keywordtype">int</span> timeoutMillis) <span class="keyword">const</span>;</div>
<div class="line"><a id="l03818" name="l03818"></a><span class="lineno"> 3818</span></div>
<div class="line"><a id="l03864" name="l03864"></a><span class="lineno"> 3864</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga1b017c1366655d32a2ec5d19deef9d37">setInternalBufferSize</a>(std::size_t newLen);</div>
<div class="line"><a id="l03865" name="l03865"></a><span class="lineno"> 3865</span></div>
<div class="line"><a id="l03916" name="l03916"></a><span class="lineno"> 3916</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga9d0a9582b3a2a72bf62f182dbc33c352">close</a>();</div>
<div class="line"><a id="l03917" name="l03917"></a><span class="lineno"> 3917</span></div>
<div class="line"><a id="l03955" name="l03955"></a><span class="lineno"><a class="line" href="group__udp.html#gab33da807656e2ab920707d60605844f5"> 3955</a></span>    [[nodiscard]] <span class="keywordtype">bool</span> <a class="code hl_function" href="group__udp.html#gab33da807656e2ab920707d60605844f5">isValid</a>() const noexcept { <span class="keywordflow">return</span> <a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() != <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>; }</div>
<div class="line"><a id="l03956" name="l03956"></a><span class="lineno"> 3956</span></div>
<div class="line"><a id="l03988" name="l03988"></a><span class="lineno"><a class="line" href="group__udp.html#gae91f746fb4cffa0eb8460c816a476d65"> 3988</a></span>    [[nodiscard]] <span class="keywordtype">bool</span> <a class="code hl_function" href="group__udp.html#gae91f746fb4cffa0eb8460c816a476d65">isClosed</a>() const noexcept { <span class="keywordflow">return</span> <a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>; }</div>
<div class="line"><a id="l03989" name="l03989"></a><span class="lineno"> 3989</span></div>
<div class="foldopen" id="foldopen04043" data-start="{" data-end="}">
<div class="line"><a id="l04043" name="l04043"></a><span class="lineno"><a class="line" href="group__udp.html#gac19051ec24961addb059f01f1e7f28c7"> 4043</a></span>    [[nodiscard]] std::optional&lt;std::pair&lt;sockaddr_storage, socklen_t&gt;&gt; <a class="code hl_function" href="group__udp.html#gac19051ec24961addb059f01f1e7f28c7">getLastPeerSockAddr</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l04044" name="l04044"></a><span class="lineno"> 4044</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l04045" name="l04045"></a><span class="lineno"> 4045</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac9e89ef197694e0464a7c8e076bd6e04">_haveRemoteAddr</a>)</div>
<div class="line"><a id="l04046" name="l04046"></a><span class="lineno"> 4046</span>        {</div>
<div class="line"><a id="l04047" name="l04047"></a><span class="lineno"> 4047</span>            <span class="comment">// No communication has occurred; no peer info available</span></div>
<div class="line"><a id="l04048" name="l04048"></a><span class="lineno"> 4048</span>            <span class="keywordflow">return</span> std::nullopt;</div>
<div class="line"><a id="l04049" name="l04049"></a><span class="lineno"> 4049</span>        }</div>
<div class="line"><a id="l04050" name="l04050"></a><span class="lineno"> 4050</span> </div>
<div class="line"><a id="l04051" name="l04051"></a><span class="lineno"> 4051</span>        <span class="keywordflow">return</span> std::make_pair(<a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632">_remoteAddr</a>, <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8">_remoteAddrLen</a>);</div>
<div class="line"><a id="l04052" name="l04052"></a><span class="lineno"> 4052</span>    }</div>
</div>
<div class="line"><a id="l04053" name="l04053"></a><span class="lineno"> 4053</span> </div>
<div class="line"><a id="l04054" name="l04054"></a><span class="lineno"> 4054</span>  <span class="keyword">protected</span>:</div>
<div class="line"><a id="l04110" name="l04110"></a><span class="lineno"> 4110</span>    std::size_t <a class="code hl_function" href="group__udp.html#ga30912969f0808f064aaeee9a79025f41">readIntoBuffer</a>(<span class="keywordtype">char</span>* buf, std::size_t len, <a class="code hl_enumeration" href="group__udp.html#ga2124eae8cec6709a67be265f14da3bdd">DatagramReceiveMode</a> mode, <span class="keywordtype">int</span> recvFlags,</div>
<div class="line"><a id="l04111" name="l04111"></a><span class="lineno"> 4111</span>                               sockaddr_storage* outSrc, socklen_t* outSrcLen, std::size_t* outDatagramSz,</div>
<div class="line"><a id="l04112" name="l04112"></a><span class="lineno"> 4112</span>                               <span class="keywordtype">bool</span>* outTruncated) <span class="keyword">const</span>;</div>
<div class="line"><a id="l04113" name="l04113"></a><span class="lineno"> 4113</span></div>
<div class="line"><a id="l04146" name="l04146"></a><span class="lineno"> 4146</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gaa0727094596347aa858629f6e5c7febf">cleanup</a>();</div>
<div class="line"><a id="l04147" name="l04147"></a><span class="lineno"> 4147</span></div>
<div class="line"><a id="l04189" name="l04189"></a><span class="lineno"> 4189</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga1973415ece2f77f191b250b9e9690733">cleanupAndThrow</a>(<span class="keywordtype">int</span> errorCode);</div>
<div class="line"><a id="l04190" name="l04190"></a><span class="lineno"> 4190</span></div>
<div class="line"><a id="l04237" name="l04237"></a><span class="lineno"> 4237</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga6608c56d08ccdb2807bd47cc862af24a">cleanupAndRethrow</a>();</div>
<div class="line"><a id="l04238" name="l04238"></a><span class="lineno"> 4238</span></div>
<div class="foldopen" id="foldopen04270" data-start="{" data-end="}">
<div class="line"><a id="l04270" name="l04270"></a><span class="lineno"><a class="line" href="group__udp.html#ga1ff1dc3fb9ed36e31bc62941edf1d44c"> 4270</a></span>    std::size_t <a class="code hl_function" href="group__udp.html#ga1ff1dc3fb9ed36e31bc62941edf1d44c">chooseReceiveSize</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l04271" name="l04271"></a><span class="lineno"> 4271</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l04272" name="l04272"></a><span class="lineno"> 4272</span>        <span class="keywordflow">if</span> (<span class="keyword">const</span> std::size_t exact = <a class="code hl_function" href="namespacejsocketpp_1_1internal.html#a592175a5a77f541b400879a5a4ca8978">internal::nextDatagramSize</a>(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>()); exact &gt; 0)</div>
<div class="line"><a id="l04273" name="l04273"></a><span class="lineno"> 4273</span>            <span class="keywordflow">return</span> (exact &gt; <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>) ? <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a> : exact;</div>
<div class="line"><a id="l04274" name="l04274"></a><span class="lineno"> 4274</span> </div>
<div class="line"><a id="l04275" name="l04275"></a><span class="lineno"> 4275</span>        <span class="keyword">const</span> std::size_t fallback = <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a03328f6602738b63c4a6c8a720ec1204">_internalBuffer</a>.empty() ? <a class="code hl_variable" href="group__core.html#ga2fb9d73742801c62e90aeb505c618c43">DefaultDatagramReceiveSize</a> : <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a03328f6602738b63c4a6c8a720ec1204">_internalBuffer</a>.size();</div>
<div class="line"><a id="l04276" name="l04276"></a><span class="lineno"> 4276</span> </div>
<div class="line"><a id="l04277" name="l04277"></a><span class="lineno"> 4277</span>        <span class="keywordflow">return</span> (fallback &gt; <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>) ? <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a> : fallback;</div>
<div class="line"><a id="l04278" name="l04278"></a><span class="lineno"> 4278</span>    }</div>
</div>
<div class="line"><a id="l04279" name="l04279"></a><span class="lineno"> 4279</span></div>
<div class="foldopen" id="foldopen04294" data-start="{" data-end="}">
<div class="line"><a id="l04294" name="l04294"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#a9496226b4741c2ef3916b6dfad00442a"> 4294</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classjsocketpp_1_1DatagramSocket.html#a9496226b4741c2ef3916b6dfad00442a">rememberRemote</a>(<span class="keyword">const</span> sockaddr_storage&amp; src, <span class="keyword">const</span> socklen_t len) <span class="keyword">const</span> <span class="keyword">noexcept</span></div>
<div class="line"><a id="l04295" name="l04295"></a><span class="lineno"> 4295</span>    {</div>
<div class="line"><a id="l04296" name="l04296"></a><span class="lineno"> 4296</span>        <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632">_remoteAddr</a> = src;</div>
<div class="line"><a id="l04297" name="l04297"></a><span class="lineno"> 4297</span>        <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8">_remoteAddrLen</a> = len;</div>
<div class="line"><a id="l04298" name="l04298"></a><span class="lineno"> 4298</span>        <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac9e89ef197694e0464a7c8e076bd6e04">_haveRemoteAddr</a>.store(<span class="keyword">true</span>, std::memory_order_relaxed);</div>
<div class="line"><a id="l04299" name="l04299"></a><span class="lineno"> 4299</span>    }</div>
</div>
<div class="line"><a id="l04300" name="l04300"></a><span class="lineno"> 4300</span></div>
<div class="foldopen" id="foldopen04343" data-start="{" data-end="}">
<div class="line"><a id="l04343" name="l04343"></a><span class="lineno"><a class="line" href="group__udp.html#ga3f8607eac97767c09210d8836fdd860f"> 4343</a></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga3f8607eac97767c09210d8836fdd860f">throwSizeMismatch</a>(<span class="keyword">const</span> std::size_t expected, <span class="keyword">const</span> std::size_t actual, <span class="keyword">const</span> <span class="keywordtype">bool</span> isProbedKnown)</div>
<div class="line"><a id="l04344" name="l04344"></a><span class="lineno"> 4344</span>    {</div>
<div class="line"><a id="l04345" name="l04345"></a><span class="lineno"> 4345</span>        <span class="comment">// Two-arg pattern with wrapped message for consistency across the project</span></div>
<div class="line"><a id="l04346" name="l04346"></a><span class="lineno"> 4346</span>        <span class="keyword">constexpr</span> <span class="keywordtype">int</span> err = 0; <span class="comment">// logical (not a system error)</span></div>
<div class="line"><a id="l04347" name="l04347"></a><span class="lineno"> 4347</span>        <span class="keyword">const</span> std::string msg =</div>
<div class="line"><a id="l04348" name="l04348"></a><span class="lineno"> 4348</span>            <span class="stringliteral">&quot;UDP datagram size mismatch: expected &quot;</span> + std::to_string(expected) +</div>
<div class="line"><a id="l04349" name="l04349"></a><span class="lineno"> 4349</span>            (isProbedKnown ? (<span class="stringliteral">&quot;, probed &quot;</span> + std::to_string(actual)) : (<span class="stringliteral">&quot;, received &quot;</span> + std::to_string(actual)));</div>
<div class="line"><a id="l04350" name="l04350"></a><span class="lineno"> 4350</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(err, msg);</div>
<div class="line"><a id="l04351" name="l04351"></a><span class="lineno"> 4351</span>    }</div>
</div>
<div class="line"><a id="l04352" name="l04352"></a><span class="lineno"> 4352</span></div>
<div class="foldopen" id="foldopen04407" data-start="{" data-end="}">
<div class="line"><a id="l04407" name="l04407"></a><span class="lineno"><a class="line" href="group__udp.html#ga71ea4f3e14d566fe91a188f4cc4a5f64"> 4407</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga71ea4f3e14d566fe91a188f4cc4a5f64">enforceSendCapConnected</a>(<span class="keyword">const</span> std::size_t payloadSize)<span class="keyword"> const</span></div>
<div class="line"><a id="l04408" name="l04408"></a><span class="lineno"> 4408</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l04409" name="l04409"></a><span class="lineno"> 4409</span>        <span class="comment">// Zero-length datagrams are valid (often used as keep-alives); nothing to enforce.</span></div>
<div class="line"><a id="l04410" name="l04410"></a><span class="lineno"> 4410</span>        <span class="keywordflow">if</span> (payloadSize == 0)</div>
<div class="line"><a id="l04411" name="l04411"></a><span class="lineno"> 4411</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04412" name="l04412"></a><span class="lineno"> 4412</span> </div>
<div class="line"><a id="l04413" name="l04413"></a><span class="lineno"> 4413</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l04414" name="l04414"></a><span class="lineno"> 4414</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(0, <span class="stringliteral">&quot;DatagramSocket::enforceSendCapConnected(): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l04415" name="l04415"></a><span class="lineno"> 4415</span> </div>
<div class="line"><a id="l04416" name="l04416"></a><span class="lineno"> 4416</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0">_isConnected</a>)</div>
<div class="line"><a id="l04417" name="l04417"></a><span class="lineno"> 4417</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(0, <span class="stringliteral">&quot;DatagramSocket::enforceSendCapConnected(): socket is not connected.&quot;</span>);</div>
<div class="line"><a id="l04418" name="l04418"></a><span class="lineno"> 4418</span> </div>
<div class="line"><a id="l04419" name="l04419"></a><span class="lineno"> 4419</span>        <span class="comment">// Determine remote family: prefer cached last-peer, else query getpeername().</span></div>
<div class="line"><a id="l04420" name="l04420"></a><span class="lineno"> 4420</span>        <span class="keywordtype">int</span> family = AF_UNSPEC;</div>
<div class="line"><a id="l04421" name="l04421"></a><span class="lineno"> 4421</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8">_remoteAddrLen</a> &gt; 0)</div>
<div class="line"><a id="l04422" name="l04422"></a><span class="lineno"> 4422</span>        {</div>
<div class="line"><a id="l04423" name="l04423"></a><span class="lineno"> 4423</span>            family = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>sockaddr*<span class="keyword">&gt;</span>(&amp;<a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632">_remoteAddr</a>)-&gt;sa_family;</div>
<div class="line"><a id="l04424" name="l04424"></a><span class="lineno"> 4424</span>        }</div>
<div class="line"><a id="l04425" name="l04425"></a><span class="lineno"> 4425</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l04426" name="l04426"></a><span class="lineno"> 4426</span>        {</div>
<div class="line"><a id="l04427" name="l04427"></a><span class="lineno"> 4427</span>            sockaddr_storage peer{};</div>
<div class="line"><a id="l04428" name="l04428"></a><span class="lineno"> 4428</span>            <span class="keyword">auto</span> len = <span class="keyword">static_cast&lt;</span>socklen_t<span class="keyword">&gt;</span>(<span class="keyword">sizeof</span>(peer));</div>
<div class="line"><a id="l04429" name="l04429"></a><span class="lineno"> 4429</span>            <span class="keywordflow">if</span> (::getpeername(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>(), <span class="keyword">reinterpret_cast&lt;</span>sockaddr*<span class="keyword">&gt;</span>(&amp;peer), &amp;len) == <a class="code hl_variable" href="namespacejsocketpp.html#adc2dd9860dec2a3c3189e756288d5ba2">SOCKET_ERROR</a>)</div>
<div class="line"><a id="l04430" name="l04430"></a><span class="lineno"> 4430</span>            {</div>
<div class="line"><a id="l04431" name="l04431"></a><span class="lineno"> 4431</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> err = <a class="code hl_function" href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">GetSocketError</a>();</div>
<div class="line"><a id="l04432" name="l04432"></a><span class="lineno"> 4432</span>                <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(err, <a class="code hl_function" href="namespacejsocketpp.html#a1d0357025eb782be52907801696556ca">SocketErrorMessage</a>(err));</div>
<div class="line"><a id="l04433" name="l04433"></a><span class="lineno"> 4433</span>            }</div>
<div class="line"><a id="l04434" name="l04434"></a><span class="lineno"> 4434</span>            family = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>sockaddr*<span class="keyword">&gt;</span>(&amp;peer)-&gt;sa_family;</div>
<div class="line"><a id="l04435" name="l04435"></a><span class="lineno"> 4435</span>        }</div>
<div class="line"><a id="l04436" name="l04436"></a><span class="lineno"> 4436</span> </div>
<div class="line"><a id="l04437" name="l04437"></a><span class="lineno"> 4437</span>        <span class="comment">// Always allow the conservative, cross-stack &quot;safe&quot; ceiling.</span></div>
<div class="line"><a id="l04438" name="l04438"></a><span class="lineno"> 4438</span>        <span class="keywordflow">if</span> (payloadSize &lt;= <a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>)</div>
<div class="line"><a id="l04439" name="l04439"></a><span class="lineno"> 4439</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04440" name="l04440"></a><span class="lineno"> 4440</span> </div>
<div class="line"><a id="l04441" name="l04441"></a><span class="lineno"> 4441</span>        <span class="comment">// If the connected peer is IPv6, allow the IPv6 theoretical headroom.</span></div>
<div class="line"><a id="l04442" name="l04442"></a><span class="lineno"> 4442</span>        <span class="keywordflow">if</span> (family == AF_INET6 &amp;&amp; payloadSize &lt;= <a class="code hl_variable" href="group__core.html#ga041bcd9d09d1d8e134c7b8af72523d66">MaxUdpPayloadIPv6</a>)</div>
<div class="line"><a id="l04443" name="l04443"></a><span class="lineno"> 4443</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04444" name="l04444"></a><span class="lineno"> 4444</span> </div>
<div class="line"><a id="l04445" name="l04445"></a><span class="lineno"> 4445</span>        <span class="comment">// Compose a precise, helpful error message and throw a logical (non-OS) error.</span></div>
<div class="line"><a id="l04446" name="l04446"></a><span class="lineno"> 4446</span>        std::string msg = <span class="stringliteral">&quot;UDP datagram payload (&quot;</span> + std::to_string(payloadSize) + <span class="stringliteral">&quot; bytes) &quot;</span>;</div>
<div class="line"><a id="l04447" name="l04447"></a><span class="lineno"> 4447</span> </div>
<div class="line"><a id="l04448" name="l04448"></a><span class="lineno"> 4448</span>        <span class="keywordflow">if</span> (payloadSize &gt; <a class="code hl_variable" href="group__core.html#ga041bcd9d09d1d8e134c7b8af72523d66">MaxUdpPayloadIPv6</a>)</div>
<div class="line"><a id="l04449" name="l04449"></a><span class="lineno"> 4449</span>        {</div>
<div class="line"><a id="l04450" name="l04450"></a><span class="lineno"> 4450</span>            msg += <span class="stringliteral">&quot;exceeds IPv6 theoretical maximum (&quot;</span> + std::to_string(<a class="code hl_variable" href="group__core.html#ga041bcd9d09d1d8e134c7b8af72523d66">MaxUdpPayloadIPv6</a>) + <span class="stringliteral">&quot;). &quot;</span>;</div>
<div class="line"><a id="l04451" name="l04451"></a><span class="lineno"> 4451</span>        }</div>
<div class="line"><a id="l04452" name="l04452"></a><span class="lineno"> 4452</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (family == AF_INET)</div>
<div class="line"><a id="l04453" name="l04453"></a><span class="lineno"> 4453</span>        {</div>
<div class="line"><a id="l04454" name="l04454"></a><span class="lineno"> 4454</span>            msg += <span class="stringliteral">&quot;exceeds IPv4 maximum (&quot;</span> + std::to_string(<a class="code hl_variable" href="group__core.html#ga63ed4637719268844616341e0f8908cb">MaxUdpPayloadIPv4</a>) + <span class="stringliteral">&quot;). &quot;</span>;</div>
<div class="line"><a id="l04455" name="l04455"></a><span class="lineno"> 4455</span>        }</div>
<div class="line"><a id="l04456" name="l04456"></a><span class="lineno"> 4456</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l04457" name="l04457"></a><span class="lineno"> 4457</span>        {</div>
<div class="line"><a id="l04458" name="l04458"></a><span class="lineno"> 4458</span>            <span class="comment">// AF_UNSPEC or other: fell through the safe ceiling and not eligible for IPv6 headroom.</span></div>
<div class="line"><a id="l04459" name="l04459"></a><span class="lineno"> 4459</span>            msg += <span class="stringliteral">&quot;exceeds MaxDatagramPayloadSafe (&quot;</span> + std::to_string(<a class="code hl_variable" href="group__core.html#ga25eb16703a608853bca500682345bb89">MaxDatagramPayloadSafe</a>) + <span class="stringliteral">&quot;). &quot;</span>;</div>
<div class="line"><a id="l04460" name="l04460"></a><span class="lineno"> 4460</span>        }</div>
<div class="line"><a id="l04461" name="l04461"></a><span class="lineno"> 4461</span> </div>
<div class="line"><a id="l04462" name="l04462"></a><span class="lineno"> 4462</span>        msg += <span class="stringliteral">&quot;Split the payload across multiple datagrams or switch to a stream protocol.&quot;</span>;</div>
<div class="line"><a id="l04463" name="l04463"></a><span class="lineno"> 4463</span> </div>
<div class="line"><a id="l04464" name="l04464"></a><span class="lineno"> 4464</span>        <span class="comment">// Two-arg form for consistency with other logical throws in the project.</span></div>
<div class="line"><a id="l04465" name="l04465"></a><span class="lineno"> 4465</span>        <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(0, msg);</div>
<div class="line"><a id="l04466" name="l04466"></a><span class="lineno"> 4466</span>    }</div>
</div>
<div class="line"><a id="l04467" name="l04467"></a><span class="lineno"> 4467</span></div>
<div class="line"><a id="l04503" name="l04503"></a><span class="lineno"> 4503</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#gab12e38ad202aa788d89980864d3e83bc">sendUnconnectedTo</a>(std::string_view host, <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, std::size_t len);</div>
<div class="line"><a id="l04504" name="l04504"></a><span class="lineno"> 4504</span></div>
<div class="foldopen" id="foldopen04544" data-start="{" data-end="}">
<div class="line"><a id="l04544" name="l04544"></a><span class="lineno"><a class="line" href="group__udp.html#ga20eb26c65ff8d9c880494e028509e0a8"> 4544</a></span>    <span class="keyword">static</span> std::span&lt;const std::byte&gt; <a class="code hl_function" href="group__udp.html#ga20eb26c65ff8d9c880494e028509e0a8">asBytes</a>(<span class="keyword">const</span> std::string_view sv) <span class="keyword">noexcept</span></div>
<div class="line"><a id="l04545" name="l04545"></a><span class="lineno"> 4545</span>    {</div>
<div class="line"><a id="l04546" name="l04546"></a><span class="lineno"> 4546</span>        <span class="keywordflow">return</span> {<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>std::byte*<span class="keyword">&gt;</span>(sv.data()), sv.size()};</div>
<div class="line"><a id="l04547" name="l04547"></a><span class="lineno"> 4547</span>    }</div>
</div>
<div class="line"><a id="l04548" name="l04548"></a><span class="lineno"> 4548</span></div>
<div class="foldopen" id="foldopen04592" data-start="{" data-end="}">
<div class="line"><a id="l04592" name="l04592"></a><span class="lineno"><a class="line" href="group__udp.html#ga6de9a0542180215e2f2520148c71f1b4"> 4592</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">static</span> std::array&lt;std::byte, <span class="keyword">sizeof</span>(T)&gt; <a class="code hl_function" href="group__udp.html#ga6de9a0542180215e2f2520148c71f1b4">encodeLengthPrefixBE</a>(std::size_t n)</div>
<div class="line"><a id="l04593" name="l04593"></a><span class="lineno"> 4593</span>    {</div>
<div class="line"><a id="l04594" name="l04594"></a><span class="lineno"> 4594</span>        <span class="keyword">static_assert</span>(std::is_integral_v&lt;T&gt; &amp;&amp; std::is_unsigned_v&lt;T&gt;,</div>
<div class="line"><a id="l04595" name="l04595"></a><span class="lineno"> 4595</span>                      <span class="stringliteral">&quot;T must be an unsigned integral type for the length prefix.&quot;</span>);</div>
<div class="line"><a id="l04596" name="l04596"></a><span class="lineno"> 4596</span>        <span class="keywordflow">if</span> (n &gt; <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>((std::numeric_limits&lt;T&gt;::max)()))</div>
<div class="line"><a id="l04597" name="l04597"></a><span class="lineno"> 4597</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;writePrefixed&lt;T&gt;(): payload too large for prefix type T.&quot;</span>);</div>
<div class="line"><a id="l04598" name="l04598"></a><span class="lineno"> 4598</span>        std::array&lt;std::byte, <span class="keyword">sizeof</span>(T)&gt; out{};</div>
<div class="line"><a id="l04599" name="l04599"></a><span class="lineno"> 4599</span>        T v = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(n);</div>
<div class="line"><a id="l04600" name="l04600"></a><span class="lineno"> 4600</span>        <span class="keywordflow">for</span> (std::size_t i = 0; i &lt; <span class="keyword">sizeof</span>(T); ++i)</div>
<div class="line"><a id="l04601" name="l04601"></a><span class="lineno"> 4601</span>        {</div>
<div class="line"><a id="l04602" name="l04602"></a><span class="lineno"> 4602</span>            out[<span class="keyword">sizeof</span>(T) - 1 - i] = <span class="keyword">static_cast&lt;</span>std::byte<span class="keyword">&gt;</span>(v &amp; <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(0xFF));</div>
<div class="line"><a id="l04603" name="l04603"></a><span class="lineno"> 4603</span>            v = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(v &gt;&gt; 8);</div>
<div class="line"><a id="l04604" name="l04604"></a><span class="lineno"> 4604</span>        }</div>
<div class="line"><a id="l04605" name="l04605"></a><span class="lineno"> 4605</span>        <span class="keywordflow">return</span> out;</div>
<div class="line"><a id="l04606" name="l04606"></a><span class="lineno"> 4606</span>    }</div>
</div>
<div class="line"><a id="l04607" name="l04607"></a><span class="lineno"> 4607</span></div>
<div class="foldopen" id="foldopen04668" data-start="{" data-end="}">
<div class="line"><a id="l04668" name="l04668"></a><span class="lineno"><a class="line" href="group__udp.html#ga463c1511ac0622b623fa2937314e1239"> 4668</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga463c1511ac0622b623fa2937314e1239">sendPrefixedConnected</a>(<span class="keyword">const</span> std::span&lt;const std::byte&gt; payload)<span class="keyword"> const</span></div>
<div class="line"><a id="l04669" name="l04669"></a><span class="lineno"> 4669</span><span class="keyword">    </span>{</div>
<div class="line"><a id="l04670" name="l04670"></a><span class="lineno"> 4670</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l04671" name="l04671"></a><span class="lineno"> 4671</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::sendPrefixedConnected&lt;T&gt;(): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l04672" name="l04672"></a><span class="lineno"> 4672</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="group__udp.html#gac3b7c4a5fc5a21372c4a9cadb3e85efb">isConnected</a>())</div>
<div class="line"><a id="l04673" name="l04673"></a><span class="lineno"> 4673</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(</div>
<div class="line"><a id="l04674" name="l04674"></a><span class="lineno"> 4674</span>                <span class="stringliteral">&quot;DatagramSocket::sendPrefixedConnected&lt;T&gt;(): socket is not connected. Use write*To().&quot;</span>);</div>
<div class="line"><a id="l04675" name="l04675"></a><span class="lineno"> 4675</span> </div>
<div class="line"><a id="l04676" name="l04676"></a><span class="lineno"> 4676</span>        <span class="keyword">const</span> std::size_t n = payload.size();</div>
<div class="line"><a id="l04677" name="l04677"></a><span class="lineno"> 4677</span>        <span class="keyword">const</span> <span class="keyword">auto</span> prefix = <a class="code hl_function" href="group__udp.html#ga6de9a0542180215e2f2520148c71f1b4">encodeLengthPrefixBE&lt;T&gt;</a>(n);</div>
<div class="line"><a id="l04678" name="l04678"></a><span class="lineno"> 4678</span>        <span class="keyword">const</span> std::size_t total = <span class="keyword">sizeof</span>(T) + n;</div>
<div class="line"><a id="l04679" name="l04679"></a><span class="lineno"> 4679</span> </div>
<div class="line"><a id="l04680" name="l04680"></a><span class="lineno"> 4680</span>        <a class="code hl_function" href="group__udp.html#ga71ea4f3e14d566fe91a188f4cc4a5f64">enforceSendCapConnected</a>(total);</div>
<div class="line"><a id="l04681" name="l04681"></a><span class="lineno"> 4681</span> </div>
<div class="line"><a id="l04682" name="l04682"></a><span class="lineno"> 4682</span>        <span class="comment">// Coalesce [prefix | payload] into one datagram and send once.</span></div>
<div class="line"><a id="l04683" name="l04683"></a><span class="lineno"> 4683</span>        std::vector&lt;std::byte&gt; datagram(total);</div>
<div class="line"><a id="l04684" name="l04684"></a><span class="lineno"> 4684</span>        std::memcpy(datagram.data(), prefix.data(), <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a id="l04685" name="l04685"></a><span class="lineno"> 4685</span>        <span class="keywordflow">if</span> (n != 0)</div>
<div class="line"><a id="l04686" name="l04686"></a><span class="lineno"> 4686</span>        {</div>
<div class="line"><a id="l04687" name="l04687"></a><span class="lineno"> 4687</span>            std::memcpy(datagram.data() + <span class="keyword">sizeof</span>(T), payload.data(), n);</div>
<div class="line"><a id="l04688" name="l04688"></a><span class="lineno"> 4688</span>        }</div>
<div class="line"><a id="l04689" name="l04689"></a><span class="lineno"> 4689</span>        <a class="code hl_function" href="group__internal.html#ga8826c90e1bb9e0023b75940ff4cd72f8">internal::sendExact</a>(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>(), datagram.data(), datagram.size());</div>
<div class="line"><a id="l04690" name="l04690"></a><span class="lineno"> 4690</span>    }</div>
</div>
<div class="line"><a id="l04691" name="l04691"></a><span class="lineno"> 4691</span></div>
<div class="line"><a id="l04751" name="l04751"></a><span class="lineno"> 4751</span>    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="foldopen" id="foldopen04752" data-start="{" data-end="}">
<div class="line"><a id="l04752" name="l04752"></a><span class="lineno"><a class="line" href="group__udp.html#ga5c4761b07760b1eadf84b9fbed700c98"> 4752</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga5c4761b07760b1eadf84b9fbed700c98">sendPrefixedUnconnected</a>(<span class="keyword">const</span> std::string_view host, <span class="keyword">const</span> <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> port, <span class="keyword">const</span> std::span&lt;const std::byte&gt; payload)</div>
<div class="line"><a id="l04753" name="l04753"></a><span class="lineno"> 4753</span>    {</div>
<div class="line"><a id="l04754" name="l04754"></a><span class="lineno"> 4754</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>() == <a class="code hl_variable" href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">INVALID_SOCKET</a>)</div>
<div class="line"><a id="l04755" name="l04755"></a><span class="lineno"> 4755</span>            <span class="keywordflow">throw</span> <a class="code hl_class" href="classjsocketpp_1_1SocketException.html">SocketException</a>(<span class="stringliteral">&quot;DatagramSocket::sendPrefixedUnconnected&lt;T&gt;(): socket is not open.&quot;</span>);</div>
<div class="line"><a id="l04756" name="l04756"></a><span class="lineno"> 4756</span> </div>
<div class="line"><a id="l04757" name="l04757"></a><span class="lineno"> 4757</span>        <span class="keyword">const</span> std::size_t n = payload.size();</div>
<div class="line"><a id="l04758" name="l04758"></a><span class="lineno"> 4758</span>        <span class="keyword">const</span> <span class="keyword">auto</span> prefix = <a class="code hl_function" href="group__udp.html#ga6de9a0542180215e2f2520148c71f1b4">encodeLengthPrefixBE&lt;T&gt;</a>(n);</div>
<div class="line"><a id="l04759" name="l04759"></a><span class="lineno"> 4759</span>        <span class="keyword">const</span> std::size_t total = <span class="keyword">sizeof</span>(T) + n;</div>
<div class="line"><a id="l04760" name="l04760"></a><span class="lineno"> 4760</span> </div>
<div class="line"><a id="l04761" name="l04761"></a><span class="lineno"> 4761</span>        <span class="comment">// Build once; family skipping &amp; send are handled inside sendUnconnectedTo().</span></div>
<div class="line"><a id="l04762" name="l04762"></a><span class="lineno"> 4762</span>        std::vector&lt;std::byte&gt; datagram(total);</div>
<div class="line"><a id="l04763" name="l04763"></a><span class="lineno"> 4763</span>        std::memcpy(datagram.data(), prefix.data(), <span class="keyword">sizeof</span>(T));</div>
<div class="line"><a id="l04764" name="l04764"></a><span class="lineno"> 4764</span>        <span class="keywordflow">if</span> (n != 0)</div>
<div class="line"><a id="l04765" name="l04765"></a><span class="lineno"> 4765</span>        {</div>
<div class="line"><a id="l04766" name="l04766"></a><span class="lineno"> 4766</span>            std::memcpy(datagram.data() + <span class="keyword">sizeof</span>(T), payload.data(), n);</div>
<div class="line"><a id="l04767" name="l04767"></a><span class="lineno"> 4767</span>        }</div>
<div class="line"><a id="l04768" name="l04768"></a><span class="lineno"> 4768</span>        <a class="code hl_function" href="group__udp.html#gab12e38ad202aa788d89980864d3e83bc">sendUnconnectedTo</a>(host, port, datagram.data(), datagram.size());</div>
<div class="line"><a id="l04769" name="l04769"></a><span class="lineno"> 4769</span>    }</div>
</div>
<div class="line"><a id="l04770" name="l04770"></a><span class="lineno"> 4770</span></div>
<div class="foldopen" id="foldopen04789" data-start="{" data-end="}">
<div class="line"><a id="l04789" name="l04789"></a><span class="lineno"><a class="line" href="group__udp.html#ga465ec84374a81fa09cf486e054863673"> 4789</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="group__udp.html#ga465ec84374a81fa09cf486e054863673">cacheLocalEndpoint</a>() noexcept</div>
<div class="line"><a id="l04790" name="l04790"></a><span class="lineno"> 4790</span>    {</div>
<div class="line"><a id="l04791" name="l04791"></a><span class="lineno"> 4791</span>        sockaddr_storage ss{};</div>
<div class="line"><a id="l04792" name="l04792"></a><span class="lineno"> 4792</span>        <span class="keyword">auto</span> len = <span class="keyword">static_cast&lt;</span>socklen_t<span class="keyword">&gt;</span>(<span class="keyword">sizeof</span>(ss));</div>
<div class="line"><a id="l04793" name="l04793"></a><span class="lineno"> 4793</span><span class="preprocessor">#if defined(_WIN32)</span></div>
<div class="line"><a id="l04794" name="l04794"></a><span class="lineno"> 4794</span>        <span class="keywordflow">if</span> (::getsockname(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>(), <span class="keyword">reinterpret_cast&lt;</span>sockaddr*<span class="keyword">&gt;</span>(&amp;ss), &amp;len) == <a class="code hl_variable" href="namespacejsocketpp.html#adc2dd9860dec2a3c3189e756288d5ba2">SOCKET_ERROR</a>)</div>
<div class="line"><a id="l04795" name="l04795"></a><span class="lineno"> 4795</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04796" name="l04796"></a><span class="lineno"> 4796</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l04797" name="l04797"></a><span class="lineno"> 4797</span>        <span class="keywordflow">if</span> (::getsockname(<a class="code hl_function" href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">getSocketFd</a>(), <span class="keyword">reinterpret_cast&lt;</span>sockaddr*<span class="keyword">&gt;</span>(&amp;ss), &amp;len) == -1)</div>
<div class="line"><a id="l04798" name="l04798"></a><span class="lineno"> 4798</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l04799" name="l04799"></a><span class="lineno"> 4799</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l04800" name="l04800"></a><span class="lineno"> 4800</span>        <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a87523b567e1963c683584ed19c1d6f84">_localAddr</a> = ss;</div>
<div class="line"><a id="l04801" name="l04801"></a><span class="lineno"> 4801</span>        <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a471ce3677773b7fb9fb7766e247bc76f">_localAddrLen</a> = len;</div>
<div class="line"><a id="l04802" name="l04802"></a><span class="lineno"> 4802</span>        <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a97c828576d9ee0290be3feb35a1bc81c">_haveLocalAddr</a>.store(<span class="keyword">true</span>, std::memory_order_relaxed); <span class="comment">// or set your existing flag</span></div>
<div class="line"><a id="l04803" name="l04803"></a><span class="lineno"> 4803</span>    }</div>
</div>
<div class="line"><a id="l04804" name="l04804"></a><span class="lineno"> 4804</span></div>
<div class="line"><a id="l04850" name="l04850"></a><span class="lineno"> 4850</span>    [[nodiscard]] <span class="keywordtype">bool</span> <a class="code hl_function" href="group__udp.html#ga219654befe4bb7c3024e9fab59f0ca64">tryGetRemoteSockaddr</a>(sockaddr_storage&amp; out, socklen_t&amp; outLen) <span class="keyword">const</span>;</div>
<div class="line"><a id="l04851" name="l04851"></a><span class="lineno"> 4851</span> </div>
<div class="line"><a id="l04852" name="l04852"></a><span class="lineno"> 4852</span>  <span class="keyword">private</span>:</div>
<div class="line"><a id="l04853" name="l04853"></a><span class="lineno"> 4853</span>    <span class="keyword">mutable</span> sockaddr_storage</div>
<div class="line"><a id="l04854" name="l04854"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632"> 4854</a></span>        <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632">_remoteAddr</a>{}; </div>
<div class="line"><a id="l04855" name="l04855"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8"> 4855</a></span>    <span class="keyword">mutable</span> socklen_t <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8">_remoteAddrLen</a> =</div>
<div class="line"><a id="l04856" name="l04856"></a><span class="lineno"> 4856</span>        0; </div>
<div class="line"><a id="l04857" name="l04857"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#ac9e89ef197694e0464a7c8e076bd6e04"> 4857</a></span>    <span class="keyword">mutable</span> std::atomic_bool <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac9e89ef197694e0464a7c8e076bd6e04">_haveRemoteAddr</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l04858" name="l04858"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#a87523b567e1963c683584ed19c1d6f84"> 4858</a></span>    sockaddr_storage <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a87523b567e1963c683584ed19c1d6f84">_localAddr</a>{}; </div>
<div class="line"><a id="l04859" name="l04859"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#a471ce3677773b7fb9fb7766e247bc76f"> 4859</a></span>    socklen_t <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a471ce3677773b7fb9fb7766e247bc76f">_localAddrLen</a> = 0;   </div>
<div class="line"><a id="l04860" name="l04860"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#a97c828576d9ee0290be3feb35a1bc81c"> 4860</a></span>    std::atomic_bool <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a97c828576d9ee0290be3feb35a1bc81c">_haveLocalAddr</a> =</div>
<div class="line"><a id="l04861" name="l04861"></a><span class="lineno"> 4861</span>        <span class="keyword">false</span>;                         </div>
<div class="line"><a id="l04862" name="l04862"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#a03328f6602738b63c4a6c8a720ec1204"> 4862</a></span>    std::vector&lt;char&gt; <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a03328f6602738b63c4a6c8a720ec1204">_internalBuffer</a>; </div>
<div class="line"><a id="l04863" name="l04863"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#ac4995ba9286d5dc4ad521a80a43c634a"> 4863</a></span>    <a class="code hl_typedef" href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">Port</a> <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#ac4995ba9286d5dc4ad521a80a43c634a">_port</a>;                        </div>
<div class="line"><a id="l04864" name="l04864"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#a8c77f16fcae1c86b679a0567de055b7d"> 4864</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#a8c77f16fcae1c86b679a0567de055b7d">_isBound</a> = <span class="keyword">false</span>;             </div>
<div class="line"><a id="l04865" name="l04865"></a><span class="lineno"><a class="line" href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0"> 4865</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0">_isConnected</a> = <span class="keyword">false</span>;         </div>
<div class="line"><a id="l04866" name="l04866"></a><span class="lineno"> 4866</span>};</div>
</div>
<div class="line"><a id="l04867" name="l04867"></a><span class="lineno"> 4867</span> </div>
<div class="line"><a id="l04868" name="l04868"></a><span class="lineno"> 4868</span>} <span class="comment">// namespace jsocketpp</span></div>
<div class="ttc" id="aBufferView_8hpp_html"><div class="ttname"><a href="BufferView_8hpp.html">BufferView.hpp</a></div><div class="ttdoc">Represents a raw writable memory region for scatter/gather I/O.</div></div>
<div class="ttc" id="aDatagramPacket_8hpp_html"><div class="ttname"><a href="DatagramPacket_8hpp.html">DatagramPacket.hpp</a></div><div class="ttdoc">UDP datagram packet class for jsocketpp.</div></div>
<div class="ttc" id="aSocketOptions_8hpp_html"><div class="ttname"><a href="SocketOptions_8hpp.html">SocketOptions.hpp</a></div><div class="ttdoc">Defines the SocketOptions base class for cross-platform socket option access.</div></div>
<div class="ttc" id="abuffer__traits_8hpp_html"><div class="ttname"><a href="buffer__traits_8hpp.html">buffer_traits.hpp</a></div><div class="ttdoc">Type traits and utilities for detecting and validating buffer types.</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramPacket_html"><div class="ttname"><a href="classjsocketpp_1_1DatagramPacket.html">jsocketpp::DatagramPacket</a></div><div class="ttdoc">Represents a UDP datagram packet, encapsulating both payload and addressing information.</div><div class="ttdef"><b>Definition</b> DatagramPacket.hpp:48</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_a03328f6602738b63c4a6c8a720ec1204"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#a03328f6602738b63c4a6c8a720ec1204">jsocketpp::DatagramSocket::_internalBuffer</a></div><div class="ttdeci">std::vector&lt; char &gt; _internalBuffer</div><div class="ttdoc">Internal buffer for read operations.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4862</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_a471ce3677773b7fb9fb7766e247bc76f"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#a471ce3677773b7fb9fb7766e247bc76f">jsocketpp::DatagramSocket::_localAddrLen</a></div><div class="ttdeci">socklen_t _localAddrLen</div><div class="ttdoc">Size in bytes of the cached local address stored in _localAddr.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4859</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_a87523b567e1963c683584ed19c1d6f84"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#a87523b567e1963c683584ed19c1d6f84">jsocketpp::DatagramSocket::_localAddr</a></div><div class="ttdeci">sockaddr_storage _localAddr</div><div class="ttdoc">Cached local socket address (set by bind()/UDP connect() via getsockname()).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4858</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_a8c77f16fcae1c86b679a0567de055b7d"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#a8c77f16fcae1c86b679a0567de055b7d">jsocketpp::DatagramSocket::_isBound</a></div><div class="ttdeci">bool _isBound</div><div class="ttdoc">True if the socket is bound to an address.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4864</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_a9496226b4741c2ef3916b6dfad00442a"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#a9496226b4741c2ef3916b6dfad00442a">jsocketpp::DatagramSocket::rememberRemote</a></div><div class="ttdeci">void rememberRemote(const sockaddr_storage &amp;src, const socklen_t len) const noexcept</div><div class="ttdoc">Remember the last remote peer after an unconnected receive.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4294</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_a97c828576d9ee0290be3feb35a1bc81c"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#a97c828576d9ee0290be3feb35a1bc81c">jsocketpp::DatagramSocket::_haveLocalAddr</a></div><div class="ttdeci">std::atomic_bool _haveLocalAddr</div><div class="ttdoc">True if _localAddr/_localAddrLen contain a valid endpoint; reset on close().</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4860</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_ac4995ba9286d5dc4ad521a80a43c634a"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#ac4995ba9286d5dc4ad521a80a43c634a">jsocketpp::DatagramSocket::_port</a></div><div class="ttdeci">Port _port</div><div class="ttdoc">Port number the socket is bound to (if applicable).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4863</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_ac53f064c3e7249b78d895121d3ead632"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#ac53f064c3e7249b78d895121d3ead632">jsocketpp::DatagramSocket::_remoteAddr</a></div><div class="ttdeci">sockaddr_storage _remoteAddr</div><div class="ttdoc">Storage for the address of the most recent sender (used in unconnected mode).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4854</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_ac9e89ef197694e0464a7c8e076bd6e04"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#ac9e89ef197694e0464a7c8e076bd6e04">jsocketpp::DatagramSocket::_haveRemoteAddr</a></div><div class="ttdeci">std::atomic_bool _haveRemoteAddr</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4857</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_acc0850711b172f6c6c8bf0649c530ea0"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#acc0850711b172f6c6c8bf0649c530ea0">jsocketpp::DatagramSocket::_isConnected</a></div><div class="ttdeci">bool _isConnected</div><div class="ttdoc">True if the socket is connected to a remote host.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4865</div></div>
<div class="ttc" id="aclassjsocketpp_1_1DatagramSocket_html_acc234405e43a22139930c6b2611927c8"><div class="ttname"><a href="classjsocketpp_1_1DatagramSocket.html#acc234405e43a22139930c6b2611927c8">jsocketpp::DatagramSocket::_remoteAddrLen</a></div><div class="ttdeci">socklen_t _remoteAddrLen</div><div class="ttdoc">Length of the valid address data in _remoteAddr (0 if none received yet).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4855</div></div>
<div class="ttc" id="aclassjsocketpp_1_1SocketException_html"><div class="ttname"><a href="classjsocketpp_1_1SocketException.html">jsocketpp::SocketException</a></div><div class="ttdoc">Represents socket-related errors in the jsocketpp library.</div><div class="ttdef"><b>Definition</b> SocketException.hpp:63</div></div>
<div class="ttc" id="acommon_8hpp_html"><div class="ttname"><a href="common_8hpp.html">common.hpp</a></div><div class="ttdoc">Common platform and utility includes for jsocketpp.</div></div>
<div class="ttc" id="agroup__core_html_ga041bcd9d09d1d8e134c7b8af72523d66"><div class="ttname"><a href="group__core.html#ga041bcd9d09d1d8e134c7b8af72523d66">jsocketpp::MaxUdpPayloadIPv6</a></div><div class="ttdeci">constexpr std::size_t MaxUdpPayloadIPv6</div><div class="ttdoc">Theoretical maximum UDP payload size (in bytes) over IPv6.</div><div class="ttdef"><b>Definition</b> common.hpp:542</div></div>
<div class="ttc" id="agroup__core_html_ga1a7be273748ae3d91bc5ebe6499788a7"><div class="ttname"><a href="group__core.html#ga1a7be273748ae3d91bc5ebe6499788a7">jsocketpp::Port</a></div><div class="ttdeci">std::uint16_t Port</div><div class="ttdoc">Type alias representing a TCP or UDP port number (1–65535).</div><div class="ttdef"><b>Definition</b> common.hpp:392</div></div>
<div class="ttc" id="agroup__core_html_ga25eb16703a608853bca500682345bb89"><div class="ttname"><a href="group__core.html#ga25eb16703a608853bca500682345bb89">jsocketpp::MaxDatagramPayloadSafe</a></div><div class="ttdeci">constexpr std::size_t MaxDatagramPayloadSafe</div><div class="ttdoc">Maximum UDP payload size (in bytes) that is safely valid across common stacks.</div><div class="ttdef"><b>Definition</b> common.hpp:513</div></div>
<div class="ttc" id="agroup__core_html_ga2fb9d73742801c62e90aeb505c618c43"><div class="ttname"><a href="group__core.html#ga2fb9d73742801c62e90aeb505c618c43">jsocketpp::DefaultDatagramReceiveSize</a></div><div class="ttdeci">constexpr std::size_t DefaultDatagramReceiveSize</div><div class="ttdoc">Fallback receive size (in bytes) for UDP datagrams when the exact size is unknown.</div><div class="ttdef"><b>Definition</b> common.hpp:485</div></div>
<div class="ttc" id="agroup__core_html_ga63ed4637719268844616341e0f8908cb"><div class="ttname"><a href="group__core.html#ga63ed4637719268844616341e0f8908cb">jsocketpp::MaxUdpPayloadIPv4</a></div><div class="ttdeci">constexpr std::size_t MaxUdpPayloadIPv4</div><div class="ttdoc">Maximum UDP payload size (in bytes) over IPv4.</div><div class="ttdef"><b>Definition</b> common.hpp:525</div></div>
<div class="ttc" id="agroup__core_html_gac7021e2ae20ca2e2effd13f3279a4739"><div class="ttname"><a href="group__core.html#gac7021e2ae20ca2e2effd13f3279a4739">jsocketpp::internal::resolveNumericHostPort</a></div><div class="ttdeci">void resolveNumericHostPort(const sockaddr *sa, const socklen_t len, std::string &amp;host, Port &amp;port)</div><div class="ttdoc">Resolve numeric host and port from a socket address.</div><div class="ttdef"><b>Definition</b> common.hpp:1418</div></div>
<div class="ttc" id="agroup__internal_html_ga8826c90e1bb9e0023b75940ff4cd72f8"><div class="ttname"><a href="group__internal.html#ga8826c90e1bb9e0023b75940ff4cd72f8">jsocketpp::internal::sendExact</a></div><div class="ttdeci">void sendExact(SOCKET fd, const void *data, std::size_t size)</div><div class="ttdoc">Sends an entire datagram to a connected peer using send().</div><div class="ttdef"><b>Definition</b> common.cpp:477</div></div>
<div class="ttc" id="agroup__socketopts_html_ga97706ddf21aab33a18db00bd0b8eb65d"><div class="ttname"><a href="group__socketopts.html#ga97706ddf21aab33a18db00bd0b8eb65d">jsocketpp::SocketOptions::setSocketFd</a></div><div class="ttdeci">void setSocketFd(const SOCKET sock) noexcept</div><div class="ttdoc">Updates the socket descriptor used by this object.</div><div class="ttdef"><b>Definition</b> SocketOptions.hpp:2281</div></div>
<div class="ttc" id="agroup__socketopts_html_ga9e263722ea800db82c34769d8f49be3a"><div class="ttname"><a href="group__socketopts.html#ga9e263722ea800db82c34769d8f49be3a">jsocketpp::SocketOptions::SocketOptions</a></div><div class="ttdeci">SocketOptions()=delete</div><div class="ttdoc">Default constructor (deleted) for SocketOptions base class.</div></div>
<div class="ttc" id="agroup__socketopts_html_gaced4c6dc799564ece9ce4e6766b1d794"><div class="ttname"><a href="group__socketopts.html#gaced4c6dc799564ece9ce4e6766b1d794">jsocketpp::SocketOptions::getSocketFd</a></div><div class="ttdeci">SOCKET getSocketFd() const noexcept</div><div class="ttdoc">Retrieves the native socket handle (file descriptor or OS-level handle).</div><div class="ttdef"><b>Definition</b> SocketOptions.hpp:275</div></div>
<div class="ttc" id="agroup__udp_html_ga02b08c333a2f109a3b19ec7b3c0cecf9"><div class="ttname"><a href="group__udp.html#ga02b08c333a2f109a3b19ec7b3c0cecf9">jsocketpp::DatagramSocket::disconnect</a></div><div class="ttdeci">void disconnect()</div><div class="ttdoc">Disconnect this UDP socket from its current default peer.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:419</div></div>
<div class="ttc" id="agroup__udp_html_ga037a8dcf56048b94e398842993021f0a"><div class="ttname"><a href="group__udp.html#ga037a8dcf56048b94e398842993021f0a">jsocketpp::DatagramSocket::readvAllWithTotalTimeoutBytes</a></div><div class="ttdeci">std::size_t readvAllWithTotalTimeoutBytes(std::span&lt; BufferView &gt; buffers, int totalTimeoutMillis, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Convenience wrapper returning only the number of bytes copied.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:3639</div></div>
<div class="ttc" id="agroup__udp_html_ga06d5ac95a81132f8914473d59d333500"><div class="ttname"><a href="group__udp.html#ga06d5ac95a81132f8914473d59d333500">jsocketpp::DatagramSocket::readvAllBytes</a></div><div class="ttdeci">std::size_t readvAllBytes(std::span&lt; BufferView &gt; buffers, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Back-compat convenience returning only the number of bytes copied.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:3522</div></div>
<div class="ttc" id="agroup__udp_html_ga1973415ece2f77f191b250b9e9690733"><div class="ttname"><a href="group__udp.html#ga1973415ece2f77f191b250b9e9690733">jsocketpp::DatagramSocket::cleanupAndThrow</a></div><div class="ttdeci">void cleanupAndThrow(int errorCode)</div><div class="ttdoc">Releases all socket resources and throws a SocketException with the given error code.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:170</div></div>
<div class="ttc" id="agroup__udp_html_ga1b017c1366655d32a2ec5d19deef9d37"><div class="ttname"><a href="group__udp.html#ga1b017c1366655d32a2ec5d19deef9d37">jsocketpp::DatagramSocket::setInternalBufferSize</a></div><div class="ttdeci">void setInternalBufferSize(std::size_t newLen)</div><div class="ttdoc">Sets the size of the internal buffer used for string-based UDP receive operations.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1786</div></div>
<div class="ttc" id="agroup__udp_html_ga1ff1dc3fb9ed36e31bc62941edf1d44c"><div class="ttname"><a href="group__udp.html#ga1ff1dc3fb9ed36e31bc62941edf1d44c">jsocketpp::DatagramSocket::chooseReceiveSize</a></div><div class="ttdeci">std::size_t chooseReceiveSize() const</div><div class="ttdoc">Decide how many bytes to attempt to receive for the next UDP datagram.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4270</div></div>
<div class="ttc" id="agroup__udp_html_ga20eb26c65ff8d9c880494e028509e0a8"><div class="ttname"><a href="group__udp.html#ga20eb26c65ff8d9c880494e028509e0a8">jsocketpp::DatagramSocket::asBytes</a></div><div class="ttdeci">static std::span&lt; const std::byte &gt; asBytes(const std::string_view sv) noexcept</div><div class="ttdoc">View a textual buffer as raw bytes without copying.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4544</div></div>
<div class="ttc" id="agroup__udp_html_ga2124eae8cec6709a67be265f14da3bdd"><div class="ttname"><a href="group__udp.html#ga2124eae8cec6709a67be265f14da3bdd">jsocketpp::DatagramReceiveMode</a></div><div class="ttdeci">DatagramReceiveMode</div><div class="ttdoc">Receive-time sizing policy for UDP datagrams.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:65</div></div>
<div class="ttc" id="agroup__udp_html_ga219654befe4bb7c3024e9fab59f0ca64"><div class="ttname"><a href="group__udp.html#ga219654befe4bb7c3024e9fab59f0ca64">jsocketpp::DatagramSocket::tryGetRemoteSockaddr</a></div><div class="ttdeci">bool tryGetRemoteSockaddr(sockaddr_storage &amp;out, socklen_t &amp;outLen) const</div><div class="ttdoc">Retrieve the remote endpoint sockaddr for this socket, if available.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1713</div></div>
<div class="ttc" id="agroup__udp_html_ga243b470108bb0e02602780ee6c2ed8a7"><div class="ttname"><a href="group__udp.html#ga243b470108bb0e02602780ee6c2ed8a7">jsocketpp::DatagramSocket::discard</a></div><div class="ttdeci">void discard(const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Discard the next UDP datagram without copying it out.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1295</div></div>
<div class="ttc" id="agroup__udp_html_ga24a48ca4f6711d89e0a89531b3b31807"><div class="ttname"><a href="group__udp.html#ga24a48ca4f6711d89e0a89531b3b31807">jsocketpp::DatagramSocket::read</a></div><div class="ttdeci">T read(const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Read one UDP datagram into a fixed-size, contiguous byte container (zero allocation).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:2524</div></div>
<div class="ttc" id="agroup__udp_html_ga2b19edc594f75938a6028094744ec107"><div class="ttname"><a href="group__udp.html#ga2b19edc594f75938a6028094744ec107">jsocketpp::DatagramSocket::getLocalSocketAddress</a></div><div class="ttdeci">std::string getLocalSocketAddress(bool convertIPv4Mapped)</div><div class="ttdoc">Return the local endpoint as a single &quot;ip:port&quot; string.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1708</div></div>
<div class="ttc" id="agroup__udp_html_ga2e86bfec6de8b35caba5fc00a83489a4"><div class="ttname"><a href="group__udp.html#ga2e86bfec6de8b35caba5fc00a83489a4">jsocketpp::DatagramSocket::readvAtMostWithTimeout</a></div><div class="ttdeci">DatagramReadResult readvAtMostWithTimeout(std::span&lt; BufferView &gt; buffers, int timeoutMillis, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Scatter-gather, best-effort read of the next datagram with a per-call timeout.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1582</div></div>
<div class="ttc" id="agroup__udp_html_ga30912969f0808f064aaeee9a79025f41"><div class="ttname"><a href="group__udp.html#ga30912969f0808f064aaeee9a79025f41">jsocketpp::DatagramSocket::readIntoBuffer</a></div><div class="ttdeci">std::size_t readIntoBuffer(char *buf, std::size_t len, DatagramReceiveMode mode, int recvFlags, sockaddr_storage *outSrc, socklen_t *outSrcLen, std::size_t *outDatagramSz, bool *outTruncated) const</div><div class="ttdoc">Low-level, single-recv primitive that copies one UDP datagram into a caller buffer.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:695</div></div>
<div class="ttc" id="agroup__udp_html_ga38397874bcb62f889cb6fefa20b45ba6"><div class="ttname"><a href="group__udp.html#ga38397874bcb62f889cb6fefa20b45ba6">jsocketpp::DatagramSocket::operator=</a></div><div class="ttdeci">DatagramSocket &amp; operator=(DatagramSocket &amp;&amp;rhs) noexcept</div><div class="ttdoc">Move assignment operator for DatagramSocket.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:713</div></div>
<div class="ttc" id="agroup__udp_html_ga3afd5b0d48ee9f92759c6f2d4ea9d8f0"><div class="ttname"><a href="group__udp.html#ga3afd5b0d48ee9f92759c6f2d4ea9d8f0">jsocketpp::DatagramSocket::getRemoteIp</a></div><div class="ttdeci">std::string getRemoteIp(bool convertIPv4Mapped) const</div><div class="ttdoc">Return the remote peer IP address for this socket.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1751</div></div>
<div class="ttc" id="agroup__udp_html_ga3d08597b24d9c7a3fe43dd291ee85148"><div class="ttname"><a href="group__udp.html#ga3d08597b24d9c7a3fe43dd291ee85148">jsocketpp::DatagramSocket::DatagramSocket</a></div><div class="ttdeci">DatagramSocket(const DatagramSocket &amp;)=delete</div><div class="ttdoc">Copy constructor (deleted) for DatagramSocket.</div></div>
<div class="ttc" id="agroup__udp_html_ga3d9722c04df6d147773249d94df09135"><div class="ttname"><a href="group__udp.html#ga3d9722c04df6d147773249d94df09135">jsocketpp::DatagramSocket::write</a></div><div class="ttdeci">void write(const T &amp;value) const</div><div class="ttdoc">Send one UDP datagram whose payload is the raw object representation of value.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:1383</div></div>
<div class="ttc" id="agroup__udp_html_ga3f8607eac97767c09210d8836fdd860f"><div class="ttname"><a href="group__udp.html#ga3f8607eac97767c09210d8836fdd860f">jsocketpp::DatagramSocket::throwSizeMismatch</a></div><div class="ttdeci">static void throwSizeMismatch(const std::size_t expected, const std::size_t actual, const bool isProbedKnown)</div><div class="ttdoc">Throw a descriptive exception when a UDP datagram’s size differs from what was expected.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4343</div></div>
<div class="ttc" id="agroup__udp_html_ga463c1511ac0622b623fa2937314e1239"><div class="ttname"><a href="group__udp.html#ga463c1511ac0622b623fa2937314e1239">jsocketpp::DatagramSocket::sendPrefixedConnected</a></div><div class="ttdeci">void sendPrefixedConnected(const std::span&lt; const std::byte &gt; payload) const</div><div class="ttdoc">Build and send a length-prefixed UDP datagram to the connected peer (no pre-wait).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4668</div></div>
<div class="ttc" id="agroup__udp_html_ga465ec84374a81fa09cf486e054863673"><div class="ttname"><a href="group__udp.html#ga465ec84374a81fa09cf486e054863673">jsocketpp::DatagramSocket::cacheLocalEndpoint</a></div><div class="ttdeci">void cacheLocalEndpoint() noexcept</div><div class="ttdoc">Cache the actual local endpoint assigned by the OS.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4789</div></div>
<div class="ttc" id="agroup__udp_html_ga4a22b644010f53c741a8ea733e4abf0f"><div class="ttname"><a href="group__udp.html#ga4a22b644010f53c741a8ea733e4abf0f">jsocketpp::DatagramSocket::writeWithTimeout</a></div><div class="ttdeci">void writeWithTimeout(std::string_view data, int timeoutMillis) const</div><div class="ttdoc">Send one UDP datagram to the connected peer, waiting up to timeoutMillis for writability.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:509</div></div>
<div class="ttc" id="agroup__udp_html_ga4b4c631816f82eea0b6048a16682079e"><div class="ttname"><a href="group__udp.html#ga4b4c631816f82eea0b6048a16682079e">jsocketpp::DatagramSocket::DatagramSocket</a></div><div class="ttdeci">DatagramSocket(Port localPort=0, std::string_view localAddress=&quot;&quot;, std::optional&lt; std::size_t &gt; recvBufferSize=std::nullopt, std::optional&lt; std::size_t &gt; sendBufferSize=std::nullopt, std::optional&lt; std::size_t &gt; internalBufferSize=std::nullopt, bool reuseAddress=true, int soRecvTimeoutMillis=-1, int soSendTimeoutMillis=-1, bool nonBlocking=false, bool dualStack=true, bool autoBind=true, bool autoConnect=false, std::string_view remoteAddress=&quot;&quot;, Port remotePort=0, int connectTimeoutMillis=-1)</div><div class="ttdoc">Creates a UDP socket, optionally binds to a local address, and optionally connects to a remote peer.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:12</div></div>
<div class="ttc" id="agroup__udp_html_ga4d5295306a17e8fdf4a6e00556e043b5"><div class="ttname"><a href="group__udp.html#ga4d5295306a17e8fdf4a6e00556e043b5">jsocketpp::DatagramSocket::readAtMostWithTimeout</a></div><div class="ttdeci">std::string readAtMostWithTimeout(std::size_t n, int timeoutMillis) const</div><div class="ttdoc">Read up to n bytes from the next UDP datagram, waiting up to timeoutMillis for data.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1286</div></div>
<div class="ttc" id="agroup__udp_html_ga53fd92734f14407ce6c78d8df246c319"><div class="ttname"><a href="group__udp.html#ga53fd92734f14407ce6c78d8df246c319">jsocketpp::DatagramSocket::waitReady</a></div><div class="ttdeci">void waitReady(Direction dir, int timeoutMillis) const</div><div class="ttdoc">Block until the socket is ready for I/O or a timeout occurs.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:2085</div></div>
<div class="ttc" id="agroup__udp_html_ga550b67d7ad08c5cb068bb2b66d2c2c49"><div class="ttname"><a href="group__udp.html#ga550b67d7ad08c5cb068bb2b66d2c2c49">jsocketpp::DatagramSocket::bind</a></div><div class="ttdeci">void bind()</div><div class="ttdoc">Binds the datagram socket to all available interfaces on an ephemeral port.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:243</div></div>
<div class="ttc" id="agroup__udp_html_ga568d0cb2e5888b3dca1f949e171c98ec"><div class="ttname"><a href="group__udp.html#ga568d0cb2e5888b3dca1f949e171c98ec">jsocketpp::DatagramSocket::writePrefixedTo</a></div><div class="ttdeci">void writePrefixedTo(const std::string_view host, const Port port, const std::span&lt; const std::byte &gt; payload) const</div><div class="ttdoc">Send a length-prefixed UDP datagram to (host, port) from a byte span (unconnected path).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:1633</div></div>
<div class="ttc" id="agroup__udp_html_ga59d70a7a49451b0581757861d7fecf46"><div class="ttname"><a href="group__udp.html#ga59d70a7a49451b0581757861d7fecf46">jsocketpp::DatagramSocket::readvAll</a></div><div class="ttdeci">DatagramReadResult readvAll(std::span&lt; BufferView &gt; buffers, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Scatter-gather receive that guarantees the entire next datagram fits the provided buffers.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1562</div></div>
<div class="ttc" id="agroup__udp_html_ga5c4761b07760b1eadf84b9fbed700c98"><div class="ttname"><a href="group__udp.html#ga5c4761b07760b1eadf84b9fbed700c98">jsocketpp::DatagramSocket::sendPrefixedUnconnected</a></div><div class="ttdeci">void sendPrefixedUnconnected(const std::string_view host, const Port port, const std::span&lt; const std::byte &gt; payload)</div><div class="ttdoc">Build and send a length-prefixed UDP datagram to (host, port) on the unconnected path.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4752</div></div>
<div class="ttc" id="agroup__udp_html_ga5fd49284f279d17c851a356caafdd216"><div class="ttname"><a href="group__udp.html#ga5fd49284f279d17c851a356caafdd216">jsocketpp::DatagramSocket::writeFrom</a></div><div class="ttdeci">void writeFrom(const void *data, std::size_t len) const</div><div class="ttdoc">Send one UDP datagram to the connected peer from a raw memory buffer (no pre-wait).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:548</div></div>
<div class="ttc" id="agroup__udp_html_ga6608c56d08ccdb2807bd47cc862af24a"><div class="ttname"><a href="group__udp.html#ga6608c56d08ccdb2807bd47cc862af24a">jsocketpp::DatagramSocket::cleanupAndRethrow</a></div><div class="ttdeci">void cleanupAndRethrow()</div><div class="ttdoc">Cleans up the datagram socket and rethrows the currently active exception.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:176</div></div>
<div class="ttc" id="agroup__udp_html_ga6d1dbfd5b854e120b352a27b541e5841"><div class="ttname"><a href="group__udp.html#ga6d1dbfd5b854e120b352a27b541e5841">jsocketpp::DatagramSocket::getRemotePort</a></div><div class="ttdeci">Port getRemotePort() const</div><div class="ttdoc">Return the remote peer UDP port for this socket.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1760</div></div>
<div class="ttc" id="agroup__udp_html_ga6de9a0542180215e2f2520148c71f1b4"><div class="ttname"><a href="group__udp.html#ga6de9a0542180215e2f2520148c71f1b4">jsocketpp::DatagramSocket::encodeLengthPrefixBE</a></div><div class="ttdeci">static std::array&lt; std::byte, sizeof(T)&gt; encodeLengthPrefixBE(std::size_t n)</div><div class="ttdoc">Encode a length value into a fixed-size, big-endian (network-order) byte array.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4592</div></div>
<div class="ttc" id="agroup__udp_html_ga6fff302b8483605f25254bf0a1f00baf"><div class="ttname"><a href="group__udp.html#ga6fff302b8483605f25254bf0a1f00baf">jsocketpp::DatagramSocket::writev</a></div><div class="ttdeci">void writev(std::span&lt; const std::string_view &gt; buffers) const</div><div class="ttdoc">Send one UDP datagram to the connected peer by concatenating multiple fragments (no pre-wait).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:562</div></div>
<div class="ttc" id="agroup__udp_html_ga71ea4f3e14d566fe91a188f4cc4a5f64"><div class="ttname"><a href="group__udp.html#ga71ea4f3e14d566fe91a188f4cc4a5f64">jsocketpp::DatagramSocket::enforceSendCapConnected</a></div><div class="ttdeci">void enforceSendCapConnected(const std::size_t payloadSize) const</div><div class="ttdoc">Enforce UDP payload size limits for connected datagram sends.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4407</div></div>
<div class="ttc" id="agroup__udp_html_ga7fbd62107244e308dc0436f11fae7dad"><div class="ttname"><a href="group__udp.html#ga7fbd62107244e308dc0436f11fae7dad">jsocketpp::DatagramSocket::readFrom</a></div><div class="ttdeci">DatagramReadResult readFrom(T &amp;buffer, std::string *senderAddr, Port *senderPort, const DatagramReadOptions &amp;opts) const</div><div class="ttdoc">Read one UDP datagram into a caller-provided byte container and optionally return the sender address/...</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:2615</div></div>
<div class="ttc" id="agroup__udp_html_ga8272a360bdf6e0377f31ac8ce251a837"><div class="ttname"><a href="group__udp.html#ga8272a360bdf6e0377f31ac8ce251a837">jsocketpp::Direction</a></div><div class="ttdeci">Direction</div><div class="ttdoc">I/O readiness selector used by waitReady().</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:413</div></div>
<div class="ttc" id="agroup__udp_html_ga85c18071cceb1c0c679b7a444cfa9f65"><div class="ttname"><a href="group__udp.html#ga85c18071cceb1c0c679b7a444cfa9f65">jsocketpp::DatagramSocket::readAvailable</a></div><div class="ttdeci">std::string readAvailable() const</div><div class="ttdoc">Receive the next UDP datagram and return its payload as a string, attempting to avoid truncation.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1177</div></div>
<div class="ttc" id="agroup__udp_html_ga8b036d60faeaf712b6b477dc166061b8"><div class="ttname"><a href="group__udp.html#ga8b036d60faeaf712b6b477dc166061b8">jsocketpp::DatagramSocket::getLocalPort</a></div><div class="ttdeci">Port getLocalPort()</div><div class="ttdoc">Return the local UDP port this socket is bound to.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1681</div></div>
<div class="ttc" id="agroup__udp_html_ga915c790c7cfde485e680ddec2edb2e74"><div class="ttname"><a href="group__udp.html#ga915c790c7cfde485e680ddec2edb2e74">jsocketpp::DatagramSocket::connect</a></div><div class="ttdeci">void connect(std::string_view host, Port port, int timeoutMillis)</div><div class="ttdoc">Connect this UDP socket to a default peer (set the default destination).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:249</div></div>
<div class="ttc" id="agroup__udp_html_ga94a10f136669c41e25fa2be205bd90af"><div class="ttname"><a href="group__udp.html#ga94a10f136669c41e25fa2be205bd90af">jsocketpp::DatagramSocket::readvAllWithTotalTimeout</a></div><div class="ttdeci">DatagramReadResult readvAllWithTotalTimeout(std::span&lt; BufferView &gt; buffers, int totalTimeoutMillis, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Scatter-gather, strict no-truncation receive with a per-call total timeout.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1621</div></div>
<div class="ttc" id="agroup__udp_html_ga96bc239f42265d5c408c8f15046f24c8"><div class="ttname"><a href="group__udp.html#ga96bc239f42265d5c408c8f15046f24c8">jsocketpp::DatagramSocket::write</a></div><div class="ttdeci">void write(std::string_view message) const</div><div class="ttdoc">Send one UDP datagram to the currently connected peer (no pre-wait).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:458</div></div>
<div class="ttc" id="agroup__udp_html_ga9befab6dbf6e8fc0dd9ee0e9645ea099"><div class="ttname"><a href="group__udp.html#ga9befab6dbf6e8fc0dd9ee0e9645ea099">jsocketpp::DatagramSocket::hasPendingData</a></div><div class="ttdeci">bool hasPendingData(int timeoutMillis) const</div><div class="ttdoc">Check if the socket is readable within a timeout (no data is consumed).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1925</div></div>
<div class="ttc" id="agroup__udp_html_ga9d0a9582b3a2a72bf62f182dbc33c352"><div class="ttname"><a href="group__udp.html#ga9d0a9582b3a2a72bf62f182dbc33c352">jsocketpp::DatagramSocket::close</a></div><div class="ttdeci">void close()</div><div class="ttdoc">Closes the datagram socket and releases its underlying system resources.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:196</div></div>
<div class="ttc" id="agroup__udp_html_ga9f9e08f58d50d29e0f3fa9ccf83c1c97"><div class="ttname"><a href="group__udp.html#ga9f9e08f58d50d29e0f3fa9ccf83c1c97">jsocketpp::DatagramSocket::read</a></div><div class="ttdeci">T read(const DatagramReadOptions &amp;opts={}, std::size_t minCapacity=DefaultDatagramReceiveSize) const</div><div class="ttdoc">Read one UDP datagram into a dynamically resizable, contiguous byte container (zero-copy into caller ...</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:2426</div></div>
<div class="ttc" id="agroup__udp_html_gaa0727094596347aa858629f6e5c7febf"><div class="ttname"><a href="group__udp.html#gaa0727094596347aa858629f6e5c7febf">jsocketpp::DatagramSocket::cleanup</a></div><div class="ttdeci">void cleanup()</div><div class="ttdoc">Internal helper that releases socket resources and resets all internal state.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:155</div></div>
<div class="ttc" id="agroup__udp_html_gaa31790315a4bb8d20cd924157107a166"><div class="ttname"><a href="group__udp.html#gaa31790315a4bb8d20cd924157107a166">jsocketpp::DatagramSocket::getRemoteSocketAddress</a></div><div class="ttdeci">std::string getRemoteSocketAddress(bool convertIPv4Mapped) const</div><div class="ttdoc">Return the remote endpoint as a single &quot;ip:port&quot; string.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1769</div></div>
<div class="ttc" id="agroup__udp_html_gaa7f9cce85a502e58b8d86db95a8e0721"><div class="ttname"><a href="group__udp.html#gaa7f9cce85a502e58b8d86db95a8e0721">jsocketpp::DatagramSocket::read</a></div><div class="ttdeci">DatagramReadResult read(DatagramPacket &amp;packet, const DatagramReadOptions &amp;opts) const</div><div class="ttdoc">Read one UDP datagram into a DatagramPacket with optional growth/shrink and strict truncation policy.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:862</div></div>
<div class="ttc" id="agroup__udp_html_gaa848031032de9438dd560a8a9eba38d6"><div class="ttname"><a href="group__udp.html#gaa848031032de9438dd560a8a9eba38d6">jsocketpp::DatagramSocket::writePrefixed</a></div><div class="ttdeci">void writePrefixed(const std::string_view payload) const</div><div class="ttdoc">Send a length-prefixed UDP datagram to the connected peer from text bytes (no pre-wait).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:1535</div></div>
<div class="ttc" id="agroup__udp_html_gaaa04156c3da5af5cf724d46764a04c84"><div class="ttname"><a href="group__udp.html#gaaa04156c3da5af5cf724d46764a04c84">jsocketpp::DatagramSocket::discardExact</a></div><div class="ttdeci">void discardExact(std::size_t n, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Discard the next UDP datagram only if its payload size is exactly n bytes.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1315</div></div>
<div class="ttc" id="agroup__udp_html_gab12e38ad202aa788d89980864d3e83bc"><div class="ttname"><a href="group__udp.html#gab12e38ad202aa788d89980864d3e83bc">jsocketpp::DatagramSocket::sendUnconnectedTo</a></div><div class="ttdeci">void sendUnconnectedTo(std::string_view host, Port port, const void *data, std::size_t len)</div><div class="ttdoc">Resolve and send one unconnected UDP datagram to the first compatible destination.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:2168</div></div>
<div class="ttc" id="agroup__udp_html_gab33da807656e2ab920707d60605844f5"><div class="ttname"><a href="group__udp.html#gab33da807656e2ab920707d60605844f5">jsocketpp::DatagramSocket::isValid</a></div><div class="ttdeci">bool isValid() const noexcept</div><div class="ttdoc">Checks whether the datagram socket is valid and ready for use.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:3955</div></div>
<div class="ttc" id="agroup__udp_html_gab34fd67ebc17563f286dde70ba456cf9"><div class="ttname"><a href="group__udp.html#gab34fd67ebc17563f286dde70ba456cf9">jsocketpp::DatagramSocket::readExact</a></div><div class="ttdeci">DatagramReadResult readExact(void *buffer, std::size_t exactLen, const ReadExactOptions &amp;opts={}) const</div><div class="ttdoc">Receive exactly exactLen bytes from a single UDP datagram into buffer, with strict policy control.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1045</div></div>
<div class="ttc" id="agroup__udp_html_gab613123c8bf1aca6aec451b1140e2f82"><div class="ttname"><a href="group__udp.html#gab613123c8bf1aca6aec451b1140e2f82">jsocketpp::DatagramSocket::DatagramSocket</a></div><div class="ttdeci">DatagramSocket(DatagramSocket &amp;&amp;rhs) noexcept</div><div class="ttdoc">Move constructor for DatagramSocket.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:665</div></div>
<div class="ttc" id="agroup__udp_html_gab6486855380c97e18428a670f48f3efa"><div class="ttname"><a href="group__udp.html#gab6486855380c97e18428a670f48f3efa">jsocketpp::DatagramSocket::getLocalIp</a></div><div class="ttdeci">std::string getLocalIp(bool convertIPv4Mapped)</div><div class="ttdoc">Return the local interface IP address for this UDP socket.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1651</div></div>
<div class="ttc" id="agroup__udp_html_gab67aad3e2d477982f19d17ab80607417"><div class="ttname"><a href="group__udp.html#gab67aad3e2d477982f19d17ab80607417">jsocketpp::DatagramSocket::operator=</a></div><div class="ttdeci">DatagramSocket &amp; operator=(const DatagramSocket &amp;)=delete</div><div class="ttdoc">Copy assignment operator (deleted) for DatagramSocket.</div></div>
<div class="ttc" id="agroup__udp_html_gabac0f0e22e72fa908fa49e44302c2a12"><div class="ttname"><a href="group__udp.html#gabac0f0e22e72fa908fa49e44302c2a12">jsocketpp::DatagramSocket::readPrefixed</a></div><div class="ttdeci">std::string readPrefixed(std::size_t maxPayloadLen=MaxDatagramPayloadSafe, const std::endian prefixEndian=std::endian::big) const</div><div class="ttdoc">Read a length-prefixed UDP datagram and return the payload (prefix type T).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:3274</div></div>
<div class="ttc" id="agroup__udp_html_gabb163d329ca77150019c3e430f415209"><div class="ttname"><a href="group__udp.html#gabb163d329ca77150019c3e430f415209">jsocketpp::DatagramSocket::writeAll</a></div><div class="ttdeci">void writeAll(std::string_view message) const</div><div class="ttdoc">Send one UDP datagram to the connected peer, waiting indefinitely for writability.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:493</div></div>
<div class="ttc" id="agroup__udp_html_gabd73eb7df3c7871b1637ad03cc06b64c"><div class="ttname"><a href="group__udp.html#gabd73eb7df3c7871b1637ad03cc06b64c">jsocketpp::DatagramSocket::getMTU</a></div><div class="ttdeci">std::optional&lt; int &gt; getMTU() const</div><div class="ttdoc">Retrieves the Maximum Transmission Unit (MTU) of the local interface associated with the socket.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1982</div></div>
<div class="ttc" id="agroup__udp_html_gabddf96e6ee7f156a0fa09a054551744f"><div class="ttname"><a href="group__udp.html#gabddf96e6ee7f156a0fa09a054551744f">jsocketpp::DatagramSocket::readvAtMostWithTimeout</a></div><div class="ttdeci">std::size_t readvAtMostWithTimeout(std::span&lt; BufferView &gt; buffers, int timeoutMillis) const</div><div class="ttdoc">Convenience wrapper returning only the number of bytes read.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:3571</div></div>
<div class="ttc" id="agroup__udp_html_gac19051ec24961addb059f01f1e7f28c7"><div class="ttname"><a href="group__udp.html#gac19051ec24961addb059f01f1e7f28c7">jsocketpp::DatagramSocket::getLastPeerSockAddr</a></div><div class="ttdeci">std::optional&lt; std::pair&lt; sockaddr_storage, socklen_t &gt; &gt; getLastPeerSockAddr() const</div><div class="ttdoc">Retrieves the raw socket address of the last known remote peer.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:4043</div></div>
<div class="ttc" id="agroup__udp_html_gac3b7c4a5fc5a21372c4a9cadb3e85efb"><div class="ttname"><a href="group__udp.html#gac3b7c4a5fc5a21372c4a9cadb3e85efb">jsocketpp::DatagramSocket::isConnected</a></div><div class="ttdeci">bool isConnected() const noexcept</div><div class="ttdoc">Indicates whether the datagram socket is connected to a specific remote peer.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:1016</div></div>
<div class="ttc" id="agroup__udp_html_gac69845676b984d0876f7ad9311571846"><div class="ttname"><a href="group__udp.html#gac69845676b984d0876f7ad9311571846">jsocketpp::DatagramSocket::writevAll</a></div><div class="ttdeci">void writevAll(std::span&lt; const std::string_view &gt; buffers) const</div><div class="ttdoc">Send one UDP datagram to the connected peer by concatenating multiple fragments, waiting indefinitely...</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:615</div></div>
<div class="ttc" id="agroup__udp_html_gac74d3b4a3f6c64919382f8d3a9805eb8"><div class="ttname"><a href="group__udp.html#gac74d3b4a3f6c64919382f8d3a9805eb8">jsocketpp::DatagramSocket::writeTo</a></div><div class="ttdeci">void writeTo(const std::string_view host, const Port port, const T &amp;value) const</div><div class="ttdoc">Send one unconnected UDP datagram to (host, port) containing the raw bytes of value.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:2169</div></div>
<div class="ttc" id="agroup__udp_html_gad5548c6a422e710410315dd6fb92788d"><div class="ttname"><a href="group__udp.html#gad5548c6a422e710410315dd6fb92788d">jsocketpp::DatagramSocket::readAtMost</a></div><div class="ttdeci">std::size_t readAtMost(std::span&lt; char &gt; out, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Read up to out.size() bytes from the next UDP datagram into a caller-provided buffer (no allocation).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1146</div></div>
<div class="ttc" id="agroup__udp_html_gada22ab72b367e5123600bb3276422940"><div class="ttname"><a href="group__udp.html#gada22ab72b367e5123600bb3276422940">jsocketpp::DatagramSocket::readInto</a></div><div class="ttdeci">DatagramReadResult readInto(void *buffer, std::size_t len, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Read one UDP datagram into a caller-provided buffer with explicit truncation policy.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:964</div></div>
<div class="ttc" id="agroup__udp_html_gadd6a72af69e4e8e1e8701c60a7e728f1"><div class="ttname"><a href="group__udp.html#gadd6a72af69e4e8e1e8701c60a7e728f1">jsocketpp::DatagramSocket::isBound</a></div><div class="ttdeci">bool isBound() const noexcept</div><div class="ttdoc">Indicates whether the datagram socket has been explicitly bound to a local address or port.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:880</div></div>
<div class="ttc" id="agroup__udp_html_gadfec1ac007add5eddeabee9c19a621cf"><div class="ttname"><a href="group__udp.html#gadfec1ac007add5eddeabee9c19a621cf">jsocketpp::DatagramSocket::peek</a></div><div class="ttdeci">DatagramReadResult peek(DatagramPacket &amp;packet, bool allowResize=true, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Peek at the next UDP datagram without consuming it (single receive with MSG_PEEK).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1792</div></div>
<div class="ttc" id="agroup__udp_html_gae1222e5ce7f8c5e48f8fd997f4b57b42"><div class="ttname"><a href="group__udp.html#gae1222e5ce7f8c5e48f8fd997f4b57b42">jsocketpp::DatagramSocket::readv</a></div><div class="ttdeci">DatagramReadResult readv(std::span&lt; BufferView &gt; buffers, const DatagramReadOptions &amp;opts={}) const</div><div class="ttdoc">Scatter-gather receive: read one UDP datagram into multiple non-contiguous buffers.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1372</div></div>
<div class="ttc" id="agroup__udp_html_gae739db534b15bd856c9d83ac020a7796"><div class="ttname"><a href="group__udp.html#gae739db534b15bd856c9d83ac020a7796">jsocketpp::DatagramSocket::readIntoExact</a></div><div class="ttdeci">std::size_t readIntoExact(void *buffer, std::size_t len) const</div><div class="ttdoc">Strict exact-length UDP receive into a caller-provided buffer (single datagram).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:1268</div></div>
<div class="ttc" id="agroup__udp_html_gae91f746fb4cffa0eb8460c816a476d65"><div class="ttname"><a href="group__udp.html#gae91f746fb4cffa0eb8460c816a476d65">jsocketpp::DatagramSocket::isClosed</a></div><div class="ttdeci">bool isClosed() const noexcept</div><div class="ttdoc">Checks whether the datagram socket has been closed or is otherwise invalid.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:3988</div></div>
<div class="ttc" id="agroup__udp_html_gaf2398346dc295a530a70cc0f11bc5928"><div class="ttname"><a href="group__udp.html#gaf2398346dc295a530a70cc0f11bc5928">jsocketpp::DatagramSocket::writePrefixedTo</a></div><div class="ttdeci">void writePrefixedTo(const std::string_view host, const Port port, const std::string_view payload) const</div><div class="ttdoc">Send a length-prefixed UDP datagram to (host, port) from text bytes (unconnected path).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:1601</div></div>
<div class="ttc" id="agroup__udp_html_gaf2be0b146f197d55cc55a5ba8b619166"><div class="ttname"><a href="group__udp.html#gaf2be0b146f197d55cc55a5ba8b619166">jsocketpp::DatagramSocket::~DatagramSocket</a></div><div class="ttdeci">~DatagramSocket() noexcept override</div><div class="ttdoc">Destructor for DatagramSocket. Ensures socket resources are released.</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:182</div></div>
<div class="ttc" id="agroup__udp_html_gaf2d8f0e01d69beb2ae22383abf706e2c"><div class="ttname"><a href="group__udp.html#gaf2d8f0e01d69beb2ae22383abf706e2c">jsocketpp::DatagramSocket::readExact</a></div><div class="ttdeci">DatagramReadResult readExact(T &amp;buffer, const std::size_t exactLen, const ReadExactOptions &amp;opts={}) const</div><div class="ttdoc">Receive exactly exactLen bytes from a single UDP datagram into a contiguous byte container.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:2861</div></div>
<div class="ttc" id="agroup__udp_html_gafed0d7b0bbe66da82d795d013ed2b29d"><div class="ttname"><a href="group__udp.html#gafed0d7b0bbe66da82d795d013ed2b29d">jsocketpp::DatagramSocket::writeTo</a></div><div class="ttdeci">void writeTo(std::string_view host, Port port, std::string_view message)</div><div class="ttdoc">Send one unconnected UDP datagram to (host, port) from text bytes (no pre-wait).</div><div class="ttdef"><b>Definition</b> DatagramSocket.cpp:671</div></div>
<div class="ttc" id="agroup__udp_html_gaffb1e99dbfcac72f8936e43d2d35467e"><div class="ttname"><a href="group__udp.html#gaffb1e99dbfcac72f8936e43d2d35467e">jsocketpp::DatagramSocket::writePrefixed</a></div><div class="ttdeci">void writePrefixed(const std::span&lt; const std::byte &gt; payload) const</div><div class="ttdoc">Send a length-prefixed UDP datagram to the connected peer from a byte span (no pre-wait).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:1565</div></div>
<div class="ttc" id="agroup__udp_html_gga2124eae8cec6709a67be265f14da3bdda0882ede215c2d76da1b71837ab80e9bd"><div class="ttname"><a href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda0882ede215c2d76da1b71837ab80e9bd">jsocketpp::DatagramReceiveMode::PreflightSize</a></div><div class="ttdeci">@ PreflightSize</div><div class="ttdoc">Probe the exact size of the next datagram and size the receive accordingly.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:97</div></div>
<div class="ttc" id="agroup__udp_html_gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f"><div class="ttname"><a href="group__udp.html#gga2124eae8cec6709a67be265f14da3bdda4f0bde0267e64be026814e98c423c47f">jsocketpp::DatagramReceiveMode::NoPreflight</a></div><div class="ttdeci">@ NoPreflight</div><div class="ttdoc">Do not probe the datagram size; call recvfrom() directly.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:78</div></div>
<div class="ttc" id="agroup__udp_html_gga2124eae8cec6709a67be265f14da3bddac9a017cf1d4a5f3aff960a3f7e8bffd5"><div class="ttname"><a href="group__udp.html#gga2124eae8cec6709a67be265f14da3bddac9a017cf1d4a5f3aff960a3f7e8bffd5">jsocketpp::DatagramReceiveMode::PreflightMax</a></div><div class="ttdeci">@ PreflightMax</div><div class="ttdoc">Probe the size of the next datagram but cap it at the current buffer length.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:113</div></div>
<div class="ttc" id="agroup__udp_html_gga8272a360bdf6e0377f31ac8ce251a837a70a2a84088d405a2e3f1e3accaa16723"><div class="ttname"><a href="group__udp.html#gga8272a360bdf6e0377f31ac8ce251a837a70a2a84088d405a2e3f1e3accaa16723">jsocketpp::Direction::ReadWrite</a></div><div class="ttdeci">@ ReadWrite</div><div class="ttdoc">Wait until the socket is readable or writable (logical OR).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:416</div></div>
<div class="ttc" id="anamespacejsocketpp_1_1detail_html_a18306b136e94e5aaf18c6dd6d5f06f33"><div class="ttname"><a href="namespacejsocketpp_1_1detail.html#a18306b136e94e5aaf18c6dd6d5f06f33">jsocketpp::detail::is_fixed_buffer_v</a></div><div class="ttdeci">constexpr bool is_fixed_buffer_v</div><div class="ttdoc">Type trait for fixed-size buffer types.</div><div class="ttdef"><b>Definition</b> buffer_traits.hpp:147</div></div>
<div class="ttc" id="anamespacejsocketpp_1_1detail_html_aa46a9243f021ef54b04645f354feea30"><div class="ttname"><a href="namespacejsocketpp_1_1detail.html#aa46a9243f021ef54b04645f354feea30">jsocketpp::detail::is_dynamic_buffer_v</a></div><div class="ttdeci">constexpr bool is_dynamic_buffer_v</div><div class="ttdoc">Type trait for dynamic buffer types.</div><div class="ttdef"><b>Definition</b> buffer_traits.hpp:132</div></div>
<div class="ttc" id="anamespacejsocketpp_1_1internal_html_a592175a5a77f541b400879a5a4ca8978"><div class="ttname"><a href="namespacejsocketpp_1_1internal.html#a592175a5a77f541b400879a5a4ca8978">jsocketpp::internal::nextDatagramSize</a></div><div class="ttdeci">std::size_t nextDatagramSize(SOCKET fd) noexcept</div><div class="ttdoc">Query the exact size of the next UDP datagram, if the platform can provide it.</div><div class="ttdef"><b>Definition</b> common.hpp:1280</div></div>
<div class="ttc" id="anamespacejsocketpp_html"><div class="ttname"><a href="namespacejsocketpp.html">jsocketpp</a></div><div class="ttdoc">A C++ socket library providing Java-style networking interfaces.</div><div class="ttdef"><b>Definition</b> BufferView.hpp:16</div></div>
<div class="ttc" id="anamespacejsocketpp_html_a0d2868e06cd95730d5088336f8c3c174a1129c0e4d43f2d121652a7302712cff6"><div class="ttname"><a href="namespacejsocketpp.html#a0d2868e06cd95730d5088336f8c3c174a1129c0e4d43f2d121652a7302712cff6">jsocketpp::ShutdownMode::Write</a></div><div class="ttdeci">@ Write</div><div class="ttdoc">Shutdown write operations (SHUT_WR or SD_SEND).</div><div class="ttdef"><b>Definition</b> common.hpp:371</div></div>
<div class="ttc" id="anamespacejsocketpp_html_a0d2868e06cd95730d5088336f8c3c174a7a1a5f3e79fdc91edf2f5ead9d66abb4"><div class="ttname"><a href="namespacejsocketpp.html#a0d2868e06cd95730d5088336f8c3c174a7a1a5f3e79fdc91edf2f5ead9d66abb4">jsocketpp::ShutdownMode::Read</a></div><div class="ttdeci">@ Read</div><div class="ttdoc">Shutdown read operations (SHUT_RD or SD_RECEIVE).</div><div class="ttdef"><b>Definition</b> common.hpp:370</div></div>
<div class="ttc" id="anamespacejsocketpp_html_a1d0357025eb782be52907801696556ca"><div class="ttname"><a href="namespacejsocketpp.html#a1d0357025eb782be52907801696556ca">jsocketpp::SocketErrorMessage</a></div><div class="ttdeci">std::string SocketErrorMessage(int error, bool gaiStrerror=false)</div><div class="ttdoc">Convert a socket-related error code to a human-readable message.</div><div class="ttdef"><b>Definition</b> common.cpp:5</div></div>
<div class="ttc" id="anamespacejsocketpp_html_a3ddf4938a63ed33a5e2f7d2625cb4405"><div class="ttname"><a href="namespacejsocketpp.html#a3ddf4938a63ed33a5e2f7d2625cb4405">jsocketpp::INVALID_SOCKET</a></div><div class="ttdeci">constexpr SOCKET INVALID_SOCKET</div><div class="ttdef"><b>Definition</b> common.hpp:264</div></div>
<div class="ttc" id="anamespacejsocketpp_html_aac009a479ad7c6c77530e5e270cb25ad"><div class="ttname"><a href="namespacejsocketpp.html#aac009a479ad7c6c77530e5e270cb25ad">jsocketpp::GetSocketError</a></div><div class="ttdeci">int GetSocketError()</div><div class="ttdef"><b>Definition</b> common.hpp:246</div></div>
<div class="ttc" id="anamespacejsocketpp_html_adc2dd9860dec2a3c3189e756288d5ba2"><div class="ttname"><a href="namespacejsocketpp.html#adc2dd9860dec2a3c3189e756288d5ba2">jsocketpp::SOCKET_ERROR</a></div><div class="ttdeci">constexpr SOCKET SOCKET_ERROR</div><div class="ttdef"><b>Definition</b> common.hpp:265</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html">jsocketpp::DatagramReadOptions</a></div><div class="ttdoc">Options controlling a single UDP receive operation.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:136</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html_a133704136dd9f7b68ca2b954e705c8b2"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html#a133704136dd9f7b68ca2b954e705c8b2">jsocketpp::DatagramReadOptions::allowShrink</a></div><div class="ttdeci">bool allowShrink</div><div class="ttdoc">Whether the packet buffer may shrink after receive (applies to DatagramPacket).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:161</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html_a135ca2ae6fc586542956653b239f106b"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html#a135ca2ae6fc586542956653b239f106b">jsocketpp::DatagramReadOptions::errorOnTruncate</a></div><div class="ttdeci">bool errorOnTruncate</div><div class="ttdoc">When true, the read fails if the incoming datagram would be truncated.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:220</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html_a1e0a5d17aeaa7205658058cfd218f8eb"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html#a1e0a5d17aeaa7205658058cfd218f8eb">jsocketpp::DatagramReadOptions::resolveNumeric</a></div><div class="ttdeci">bool resolveNumeric</div><div class="ttdoc">Whether to resolve numeric host/port into DatagramPacket after receive.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:190</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html_a4253951c03481252f5c1e8928dcb1e9c"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html#a4253951c03481252f5c1e8928dcb1e9c">jsocketpp::DatagramReadOptions::allowGrow</a></div><div class="ttdeci">bool allowGrow</div><div class="ttdoc">Whether the packet buffer may grow before receive (applies to DatagramPacket).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:152</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html_aa343a807611fa5b42e9663c4890d4cca"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html#aa343a807611fa5b42e9663c4890d4cca">jsocketpp::DatagramReadOptions::mode</a></div><div class="ttdeci">DatagramReceiveMode mode</div><div class="ttdoc">Datagram sizing policy to use during receive.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:143</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html_acc981c9de41d7deb5bf3a14a006bb430"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html#acc981c9de41d7deb5bf3a14a006bb430">jsocketpp::DatagramReadOptions::updateLastRemote</a></div><div class="ttdeci">bool updateLastRemote</div><div class="ttdoc">Whether to persist sender into the socket&#39;s &quot;last remote&quot; (unconnected sockets).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:181</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadOptions_html_ae165365764844b3d87e0b1767bca3121"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadOptions.html#ae165365764844b3d87e0b1767bca3121">jsocketpp::DatagramReadOptions::recvFlags</a></div><div class="ttdeci">int recvFlags</div><div class="ttdoc">Extra flags passed to recv/recvfrom (e.g., MSG_PEEK).</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:172</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadResult_html"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadResult.html">jsocketpp::DatagramReadResult</a></div><div class="ttdoc">Telemetry data about a single UDP datagram receive operation.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:249</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadResult_html_a0028f6f4fdf7a1b16332196d135b049a"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadResult.html#a0028f6f4fdf7a1b16332196d135b049a">jsocketpp::DatagramReadResult::bytes</a></div><div class="ttdeci">std::size_t bytes</div><div class="ttdoc">Number of bytes successfully copied into the destination buffer.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:259</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadResult_html_a10940ceb847102cee0ecd0310454918e"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadResult.html#a10940ceb847102cee0ecd0310454918e">jsocketpp::DatagramReadResult::srcLen</a></div><div class="ttdeci">socklen_t srcLen</div><div class="ttdoc">Length in bytes of the valid address data in src.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:305</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadResult_html_a10f694b065db3a3ab96a68445bee6dea"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadResult.html#a10f694b065db3a3ab96a68445bee6dea">jsocketpp::DatagramReadResult::datagramSize</a></div><div class="ttdeci">std::size_t datagramSize</div><div class="ttdoc">Full size of the original datagram when it can be determined.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:271</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadResult_html_a3df9efe5356dd91cc9085c9ea12c6d6a"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadResult.html#a3df9efe5356dd91cc9085c9ea12c6d6a">jsocketpp::DatagramReadResult::src</a></div><div class="ttdeci">sockaddr_storage src</div><div class="ttdoc">Raw storage for the sender&#39;s address information.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:294</div></div>
<div class="ttc" id="astructjsocketpp_1_1DatagramReadResult_html_a830a7a1e1451dd93f23f44ddb063c4f3"><div class="ttname"><a href="structjsocketpp_1_1DatagramReadResult.html#a830a7a1e1451dd93f23f44ddb063c4f3">jsocketpp::DatagramReadResult::truncated</a></div><div class="ttdeci">bool truncated</div><div class="ttdoc">Indicates whether datagram truncation occurred.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:282</div></div>
<div class="ttc" id="astructjsocketpp_1_1ReadExactOptions_html"><div class="ttname"><a href="structjsocketpp_1_1ReadExactOptions.html">jsocketpp::ReadExactOptions</a></div><div class="ttdoc">Policy for enforcing an exact-byte receive on a single UDP datagram.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:327</div></div>
<div class="ttc" id="astructjsocketpp_1_1ReadExactOptions_html_a0814487705ccc55adc3a25ae47fe9084"><div class="ttname"><a href="structjsocketpp_1_1ReadExactOptions.html#a0814487705ccc55adc3a25ae47fe9084">jsocketpp::ReadExactOptions::requireExact</a></div><div class="ttdeci">bool requireExact</div><div class="ttdoc">Controls whether the datagram size must match exactly.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:351</div></div>
<div class="ttc" id="astructjsocketpp_1_1ReadExactOptions_html_a1b206449f5e0443cc97bb6ee3a6e8fdd"><div class="ttname"><a href="structjsocketpp_1_1ReadExactOptions.html#a1b206449f5e0443cc97bb6ee3a6e8fdd">jsocketpp::ReadExactOptions::base</a></div><div class="ttdeci">DatagramReadOptions base</div><div class="ttdoc">Base receive options for controlling preflight behavior, system flags, and side effects.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:339</div></div>
<div class="ttc" id="astructjsocketpp_1_1ReadExactOptions_html_a1b3dca16ac543ff80a42b9468fd11759"><div class="ttname"><a href="structjsocketpp_1_1ReadExactOptions.html#a1b3dca16ac543ff80a42b9468fd11759">jsocketpp::ReadExactOptions::padIfSmaller</a></div><div class="ttdeci">bool padIfSmaller</div><div class="ttdoc">Controls zero-padding behavior for undersized datagrams.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:363</div></div>
<div class="ttc" id="astructjsocketpp_1_1ReadExactOptions_html_a825f4af595e6ab4dd4e8fd95b8a92a52"><div class="ttname"><a href="structjsocketpp_1_1ReadExactOptions.html#a825f4af595e6ab4dd4e8fd95b8a92a52">jsocketpp::ReadExactOptions::errorOnTruncate</a></div><div class="ttdeci">bool errorOnTruncate</div><div class="ttdoc">Controls error handling for oversized datagrams.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:374</div></div>
<div class="ttc" id="astructjsocketpp_1_1ReadExactOptions_html_ade6b57f1416832fc093804eb907ce3cf"><div class="ttname"><a href="structjsocketpp_1_1ReadExactOptions.html#ade6b57f1416832fc093804eb907ce3cf">jsocketpp::ReadExactOptions::autoResizeDynamic</a></div><div class="ttdeci">bool autoResizeDynamic</div><div class="ttdoc">Controls automatic resizing of dynamic containers.</div><div class="ttdef"><b>Definition</b> DatagramSocket.hpp:387</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a href="dir_e94b15c7ff9417df3f606cd4c674cf2e.html">jsocketpp</a></li><li class="navelem"><a href="DatagramSocket_8hpp.html">DatagramSocket.hpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
